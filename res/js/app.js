"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=86)}([function(t,e){t.exports=function(t,e,n,i,a,s){var o,r=t=t||{},c=_typeof(t.default);"object"!==c&&"function"!==c||(o=t,r=t.default);var l="function"==typeof r?r.options:r;e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),a&&(l._scopeId=a);var d;if(s?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=d):i&&(d=i),d){var u=l.functional,h=u?l.render:l.beforeCreate;u?(l._injectStyles=d,l.render=function(t,e){return d.call(e),h(t,e)}):l.beforeCreate=h?[].concat(h,d):[d]}return{esModule:o,exports:r,options:l}}},function(t,e,n){e.a={cavasSize:18e3,elHeight:32,elSpaceHeight:32,elUPSpace:50,hideStyle:"left:-300px;top:-300px"}},function(t,e,n){e.a=["#56baff","#d6337d","#62B0FF","#cf0606","#ff7a7a","#764df8","#6bc859","#9a7aff","#388bdd","#ffca65","#e17aff","#7B8F18"]},function(t,e,n){var i={}.hasOwnProperty;e.a={uploadDomain:function(){if(zen.user&&zen.user.isLocal)return"";var t="//bridge.kooteam.com";return"daily"===zen.env&&(t="//bridge.dev.zeto.me"),t},extend:function(t,e){function n(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t}}},function(t,e,n){e.a={pathZ:function(t,e,n,i,a){var s=void 0,o=void 0,r=void 0;return a?(s=t-8,o=t-16):(s=t+8,o=t+16),r=e>i?i+8:e<i?i-8:i,"M"+t+","+e+" L"+s+","+e+" L"+s+","+r+" C"+s+","+i+" "+s+","+i+" "+o+","+i+" L"+n+","+i},pathC:function(t,e,n,i,a,s){var o=void 0,r=void 0,c=void 0,l=void 0;return a?(o=t-.3*s,c=n+.4*s):(o=t+.4*s,c=n-.3*s),r=e,l=i,"M"+t+","+e+" C"+o+","+r+" "+c+","+l+" "+n+","+i},pathZType2:function(t,e,n,i,a){var s=void 0,o=void 0,r=void 0;return a?(s=e-8,o=e-16):(s=e+8,o=e+16),r=t>n?n+8:t<n?n-8:n,"M"+t+","+e+" L"+t+","+s+" L"+r+","+s+" C"+n+","+s+" "+n+","+s+" "+n+","+o+" L"+n+","+i},pathCType2:function(t,e,n,i,a,s){var o=void 0,r=void 0,c=void 0,l=void 0;return a?(r=e-.3*s,l=i+.4*s):(r=e+.4*s,l=i-.3*s),o=t,c=n,"M"+t+","+e+" C"+o+","+r+" "+c+","+l+" "+n+","+i}}},function(t,e,n){function i(t,e,n){var a=e.children;if(a&&a.length>0)for(var s=0;s<a.length;s++)i(t,a[s],n);t.mindNode(e,n,t)}var a=n(10),s=n(11),o=n(12),r=n(1);e.a={reset:function(t,e){e.clear(),this.init(t,e)},init:function(t,e){var n=parseInt(t.grapType),c=r.a.cavasSize,l=void 0,d=void 0;1===n||4===n?(d=t.children.length/2)%1==0?d-=1:d=Math.floor(d):2===n||5===n?d=-1:3!==n&&6!==n||(d=t.children.length-1),1===n||2===n||3===n?((l=a.a.height(e,t)).x=c/2,l.y=c/2,Object(s.a)(l,d,e)):4!==n&&5!==n&&6!==n||((l=a.a.width(e,t)).x=c/2,l.y=c/2,Object(o.a)(l,d,e)),i(e,l,t.shape)}}},function(t,e,n){var i=n(17),a=n(91),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){e.a={dragConfig:{helper:"clone",cancel:".title",opacity:.9,zIndex:10,containment:".k-chapter"},dropConfig:{accept:".item",classes:{"ui-droppable-hover":"draghover"},drop:function(t,e){var n=$(this),i={event:"move",from:e.helper.data("id"),to:$(this).data("id"),isSon:!0};i.to!==i.from&&(n.hasClass("guide")&&(i.isSon=!1),zen.vue.$emit("chapterEvt",i))}},initData:function(){return{id:3,sons:[{title:"\u6b22\u8fce\u4f7f\u7528",link:"",date:"2016-09-18",id:1,sons:[{title:"\u600e\u4e48\u521b\u5efa",id:3,link:"",date:"2016-09-18",sons:[]}]},{title:"\u5173\u4e8ekooteam",id:2,link:"",date:"2016-09-18",sons:[]}]}}}},function(t,e,n){function i(t,e,n){var i={type:n,evt:t,target:e};zen.vue.$emit("mindEvt","nodeEvent",i)}var a=n(2);e.a=function(){Raphael.fn.mindNode=function(t,e){var n=t.x,s=t.y,o=t.width,r=t.id,c=void 0,l=void 0,d="t_"+r,u=this.getById(d),h=this.getById(r);if(u.attr({x:n+o/2,y:s+15}),1===e){if("#ffffff"===t.color){var v=Math.floor(Math.random()*a.a.length);c=a.a[v]}else c=t.color;l={fill:c,stroke:c,"fill-opacity":.15,"stroke-width":1,cursor:"pointer"}}else l=2===e?"root"===t.id?{fill:"#ffffff",stroke:"#000","fill-opacity":.15,cursor:"pointer"}:{fill:"#ffffff",stroke:"","fill-opacity":.15,cursor:"pointer"}:{fill:t.color,stroke:t.color,"fill-opacity":.15,"stroke-width":1,cursor:"pointer"};h?(h.attr({x:n,y:s,width:o,height:32}),h.attr(l)):((h=this.rect(n,s,o,32,3)).click(function(t){i(t,this,"click")}),h.dblclick(function(t){i(t,this,"dblclick")}),h.mouseover(function(t){i(t,this,"mouseover")}),h.mouseout(function(t){i(t,this,"mouseout")}),h.attr(l),h.id=r)}}},function(t,e,n){e.a=function(){Raphael.fn.mindLine=function(t,e){var n="l_"+t,i=this.getById(n);i?i.attr({path:e}):(i=this.path(e).attr({stroke:"#aaa","stroke-width":1,fill:"none"})).id=n}}},function(t,e,n){function i(t,e){var n="t_"+e.id,i=t.getById(n);return i?i.attr({text:e.name}):(i=t.text(-200,-200,e.name).attr(s).attr("id",n)).id=n,i.getBBox().width+20}var a=n(1),s={fill:"#000","font-size":13};e.a={height:function(t,e){var n=0,s=void 0,o=void 0;if(e.children||(e.children=[]),0===e.children.length)n=a.a.elHeight;else{o=e.children.length;for(var r=0;r<e.children.length;r++)(s=e.children[r]).children?n+=(s=this.height(t,s)).height:(n+=a.a.elHeight,s.top=0,s.height=a.a.elHeight,s.width=i(t,s));n+=(o-1)*a.a.elSpaceHeight}return e.top=0,e.height=n,e.width=i(t,e),e},width:function(t,e){var n=0,s=void 0,o=void 0,r=0;if(e.children||(e.children=[]),0===e.children.length)n=i(t,e),r+=n;else{o=e.children.length;for(var c=0;c<o;c++)(s=e.children[c]).children?r+=(s=this.width(t,s)).widthCount:(s.top=0,s.width=i(t,s),r+=s.widthCount);r+=(o-1)*a.a.elUPSpace,n=i(t,e)}return e.top=0,e.height=a.a.elHeight,e.width=n,e.childWidthCount=r,e.widthCount=r>n?r:n,e}}},function(t,e,n){function i(t,e,n){if(n?(t.x=e.x-c-t.width,t.left=n):(t.x=e.x+c+e.width,t.left=n),t.color||(t.color=e.color),e.top||(e.top=e.y-e.height/2),t.y=e.top+t.height/2,"root"===e.id){var a=e.grapType,s=e.children.length;1===a?s>2&&(n&&(s+=1),t.y=t.y-(Math.floor(s/2)-1)*r.a.elSpaceHeight/2):2!==a&&3!==a||(t.y=t.y-(s-1)*r.a.elSpaceHeight/2)}if(e.top+=t.height+r.a.elSpaceHeight,!t.children||0===t.children.length)return t;for(var o=0;o<t.children.length;o++)t.children[o]=i(t.children[o],t,n);return t}function a(t,e,n,i,s){var l=void 0,d=void 0,u=void 0,h=void 0;n?(l=e.x,u=t.x+t.width):(l=e.x+e.width,u=t.x),d=e.y+r.a.elHeight/2,h=t.y+r.a.elHeight/2;var v=void 0;if(1===s&&(v=o.a.pathZ(l,d,u,h,n)),2===s&&(v=o.a.pathC(l,d,u,h,n,c)),i.mindLine(t.id,v),t.children)for(var f=0;f<t.children.length;f++)a(t.children[f],t,n,i,s)}var s=n(2),o=n(4),r=n(1),c=100;e.a=function(t,e,n){t.top=0,t.color||(t.color=s.a[s.a.length-1]);var o=0,r=void 0,c=void 0,l=void 0,d=parseInt(t.lineType);for(r=0;r<=e;r++)o+=(l=t.children[r]).height,l.color||(c=r%s.a.length,l.color=s.a[c]);for(t.height=o,r=0;r<=e;r++)i(t.children[r],t,!0),a(t.children[r],t,!0,n,d);for(o=0,r=++e;r<t.children.length;r++)o+=(l=t.children[r]).height,l.color||(c=r%s.a.length,l.color=s.a[c]);for(t.top=0,t.height=o,r=e;r<t.children.length;r++)i(t.children[r],t,!1),a(t.children[r],t,!1,n,d);return t}},function(t,e,n){function i(t,e,n){if(t.y=n?e.y-r.a.elHeight-c:e.y+r.a.elHeight+c,t.color||(t.color=e.color),e.top||(e.widthCount>e.childWidthCount?e.top=e.x+e.width/2-e.childWidthCount/2:e.top=e.x+e.width/2-e.widthCount/2),t.x=e.top+t.widthCount/2-t.width/2,"root"===e.id){var a=e.grapType,s=e.children.length;"4"===a?s>2&&(n&&(s+=1),t.x=t.x-(Math.floor(s/2)-1)*r.a.elUPSpace/2):"5"!==a&&"6"!==a||(t.x=t.x-(s-1)*r.a.elUPSpace/2)}if(e.top+=t.widthCount+r.a.elUPSpace,!t.children||0===t.children.length)return t;for(var o=0;o<t.children.length;o++)t.children[o]=i(t.children[o],t,n);return t}function a(t,e,n,i,s){var c=void 0,l=void 0,d=void 0,u=void 0;c=e.x+e.width/2,d=t.x+t.width/2,n?(l=e.y,u=t.y+r.a.elHeight):(l=e.y+r.a.elHeight,u=t.y);var h=void 0;if(h=o.a.pathZType2(c,l,d,u,n),1===s?h=o.a.pathZType2(c,l,d,u,n):2===s&&(h=o.a.pathCType2(c,l,d,u,n,r.a.elUPSpace)),i.mindLine(t.id,h),t.children)for(var v=0;v<t.children.length;v++)a(t.children[v],t,n,i,s)}var s=n(2),o=n(4),r=n(1),c=50;e.a=function(t,e,n){t.top=0,t.color||(t.color=s.a[s.a.length-1]);var o=0,r=void 0,c=void 0,l=void 0,d=parseInt(t.lineType);for(r=0;r<=e;r++)o+=(l=t.children[r]).widthCount,l.color||(c=r%s.a.length,l.color=s.a[c]);for(t.widthCount=o,r=0;r<=e;r++)i(t.children[r],t,!0),a(t.children[r],t,!0,n,d);for(o=0,r=++e;r<t.children.length;r++)o+=(l=t.children[r]).widthCount,l.color||(c=r%s.a.length,l.color=s.a[c]);for(t.top=0,t.widthCount=o,r=e;r<t.children.length;r++)i(t.children[r],t,!1),a(t.children[r],t,!1,n,d)}},function(t,e,n){e.a=function(t,e){e||(e=$(window));var n=e.width(),i=e.height(),a=parseInt(n-18e3)/2,s=parseInt(i-18e3)/2-100;t.css({left:a+"px",top:s+"px"})}},function(t,e,n){var i=n(88);e.a={data:function(){return{data:[{tag:"a",title:"\u91cd\u8981\u4e14\u7d27\u6025",sons:[]},{tag:"b",title:"\u91cd\u8981\u4e0d\u7d27\u6025",sons:[]},{tag:"c",title:"\u7d27\u6025\u4e0d\u91cd\u8981",sons:[]},{tag:"d",title:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025",sons:[]}],now:0,showDetail:!1}},components:{Quadrant:i.a},mounted:function(){this.load();var t=new Date;this.now=t.getTime()%1e3},methods:{load:function(){zen.http(null,"/thing/latest.do",function(t){var e=t.data,n=void 0,i=void 0;if(e)for(var a=0;a<e.length;a++)n=e[a],(i=this.getQuadrant(n.quadrant))&&i.sons.push(n)},this)},getQuadrant:function(t){for(var e=void 0,n=0;n<4;n++)if((e=this.data[n]).tag===t)return e;return null}}}},function(t,e,n){var i=n(89),a=n(6),s=n(18);e.a={props:["data","now"],components:{Title:i.a,Thing:a.a},data:function(){return{things:{},currentId:""}},mounted:function(){var t=this;this.things=this.data,$(".block",this.$el).droppable({accept:".k-thing",cancel:".k-thing",classes:{"ui-droppable-hover":"draghover"},drop:function(e,n){var i=n.helper.data("id"),a=$(e.target).data("id");if(t.currentId===i)return t.currentId="";0===$(".draghover",t.$el).length&&t.exchange(i,a,!0)}})},methods:{sort:function(t,e){s.a.sort(t,e,this.things.sons)},exchange:function(t,e,n){for(var i=void 0,a=void 0,s=void 0,o=0;o<4;o++){for(i=this.$parent.data[o],a=0;a<i.sons.length;a++)if(i.sons[a]._id===t){s=i.sons.splice(a,1)[0];break}if(s)break}if(n)i=this.$parent.getQuadrant(e),s.quadrant=e,i.sons.push(s);else for(i=this.$parent.getQuadrant(e.quadrant),a=0;a<i.sons.length;a++)if(i.sons[a]._id===e._id){e.order||(e.order=0),s.order=e.order+1,s.quadrant=e.quadrant,i.sons.splice(a,0,s);break}this.currentId="";var r={_id:s._id,quadrant:s.quadrant,order:s.order};zen.http(r,"/thing/patch.do",function(t){},this)}}}},function(t,e,n){e.a={props:["quadrant","name","todoList"],data:function(){return{text:"",isBlur:!0,active:!1}},methods:{stop:function(t){t.stopPropagation()},hide:function(){this.active=!1,this.isBlur=!0,this.$nextTick(function(){this.isBlur=!1})},show:function(){if(this.active||this.isBlur)return this.isBlur=!1;this.active=!this.active,this.active&&this.$nextTick(function(){$("input",this.$el).focus()})},keyup:function(t){if(t.stopPropagation(),t.preventDefault(),13===t.keyCode){var e={},n=this.text;if(!n)return;e.title=n,e.quadrant=this.quadrant,zen.http(e,"/thing/put.do",function(t){var n=t.data;e._id=n._id;var i=n.status;e.status=parseInt(i),this.$parent.things.sons.unshift(e),this.text=""},this)}}}}},function(t,e,n){e.a={props:["data","now","drag"],data:function(){return{item:null}},created:function(){this.item=this.data},mounted:function(){this.drag&&this.dragEvt(),zen.vue.$on("thingUpdate",this.sync)},methods:{sync:function(t){var e=this.item;t._id===e._id&&e.title!==t.title&&(e.title=t.title)},doFinish:function(t){var e="finish",n=this.item._id,i=void 0,a=$(t.currentTarget).parent();a.hasClass(e)?(a.removeClass(e),i=0):(a.addClass(e),i=1);var s={_id:n,status:i,projectId:this.item.projectId};zen.http(s,"/thing/patch.do",function(){this.data.status=i;var t=this.$parent;t.sort&&t.sort(n,i)},this)},detail:function(){zen.vue.$emit("thingDetail",this.item._id)},dragEvt:function(){var t=$(this.$el),e=this;t.draggable({helper:"clone",appendTo:"body",zIndex:10}),t.droppable({accept:".k-thing",greedy:!0,classes:{"ui-droppable-hover":"draghover"},drop:function(t,n){var i=n.helper.data("id");i!==e.item._id&&e.$parent.exchange(i,e.item)}})}}}},function(t,e,n){e.a={sort:function(t,e,n){for(var i=null,a=0;a<n.length;a++)if(n[a]._id===t){i=n.splice(a,1);break}if(null!=i){if(i=i[0],0===e)return n.unshift(i);for(var s=n.length-1;s>=0;s--)if(0===n[s].status)return void n.splice(s+1,0,i);n.unshift(i)}}}},function(t,e,n){var i=n(95),a=n(97),s=n(99),o=n(101),r=n(103),c=n(107),l=n(27),d=n(110),u=n(112);e.a={props:["quadrant"],data:function(){return{item:null,showUserSearch:!1,onwerNick:"",owner:{},isShow:!1}},components:{Comment:i.a,Describe:a.a,Owner:s.a,SubThing:o.a,Tag:c.a,Plan:r.a,Priority:l.a,CommentPost:d.a,Clock:u.a},mounted:function(){this.$nextTick(function(){zen.vue.$on("thingDetail",this.init)})},watch:{owner:function(t){this.onwerNick=t.nick,this.item.owner=t.uid}},methods:{init:function(t){zen.http({_id:t},"/thing/get.do",function(t){this.item=t.data,this.isShow=!0},this)},click:function(){this.showUserSearch&&(this.showUserSearch=!1)},close:function(){this.isShow=!1},preventEvt:function(t){t.stopPropagation()},doFinish:function(){var t=this.item.status,e=this.item._id,n=void 0;1===t&&(n=0),0!==t&&2!==t||(n=1),zen.http({_id:e,status:n},"/thing/patch.do",function(t){this.item.status=n},this)},delTodo:function(){zen.http({_id:this.item._id,status:2},"/thing/patch.do",function(t){this.item.status=2},this)},save:function(){zen.http(this.item,"/thing/patch.do",function(t){this.isShow=!1,zen.vue.$emit("thingUpdate",this.item)},this)}}}},function(t,e,n){e.a={props:["value"],data:function(){return{commentsData:[],targetId:"",myId:""}},mounted:function(){this.value&&(this.targetId=this.value._id,this.queryComments(),this.myId=zen.user.id,this.$nextTick(function(){zen.vue.$on("addNewComent",this.addNewComent)}))},methods:{queryComments:function(){({}).targetId=this.targetId,zen.http({targetId:this.targetId},"/comment/selectByParent.do",function(t){var e=t.data;e&&(this.commentsData=e)},this)},remove:function(t){var e=this.commentsData[t]._id;this.commentsData.splice(t,1),zen.http({_id:e,status:0},"/patch/comment.json",function(){})},addNewComent:function(){this.queryComments()}}}},function(t,e,n){var i=n(3);e.a={props:["content"],data:function(){return{thing:null,localEmit:!1}},mounted:function(){LazyLoad.lib(["/note/simditor.css","/note/simditor.min.js"],this.init,null,this)},methods:{init:function(){var t=i.a.uploadDomain();Simditor.locale="zh-CN";var e=["title","bold","italic","underline","strikethrough","fontScale","color","ol","ul","blockquote","code","table","link","image","hr","alignment"];this.editor=new Simditor({textarea:$("textarea",this.$el),placeholder:"\u8fd9\u91cc\u8f93\u5165\u5f85\u529e\u63cf\u8ff0...",defaultImage:"//a.yimiyisu.com/kooteam/preview.png",params:{},tabIndent:!0,toolbar:e,toolbarFloat:!1,toolbarFloatOffset:0,height:"200px",toolbarHidden:!1,pasteImage:!0,cleanPaste:!0,upload:{url:t+"/upload/image.do",fileKey:"file"}}),this.editor.uploader.on("uploadsuccess",function(t,e,n){var i=JSON.parse(n);if(23===i.action)return alert(i.message);e.img.attr("src",i.data)});var n=this;void 0!==this.content&&n.editor.setValue(this.content),n.editor.on("valuechanged",function(){n.localEmit=!0,n.$parent.item.content=n.editor.getValue()})}}}},function(t,e,n){e.a={props:["value","nick"],data:function(){return{name:""}},watch:{nick:function(t){t&&(this.name=t)}},mounted:function(){var t=this.value.owner;if(t===zen.user.id)return this.name="\u6211\u81ea\u5df1";zen.http({uid:t},"/user/getById.do",function(t){this.name=t.data.nick},this)},methods:{show:function(){this.$parent.showUserSearch=!0}}}},function(t,e,n){e.a={}},function(t,e,n){var i=n(104);e.a={props:["value"],data:function(){return{modal:1,cal:null,thing:null,name:"\u5355\u65e5",modals:["","\u5355\u65e5","\u591a\u65e5","\u8d77\u6b62","\u91cd\u590d"],range:[],text:"",dateStr:"",isShow:!1,selected:{}}},components:{Repeat:i.a},mounted:function(){var t=this.value;this.thing=t,t.plan&&(this.modal=t.plan),1===this.modal?this.text=zen.date(t.start):this.text="\u91cd\u590d\u4efb\u52a1",this.name=this.modals[this.modal],this.modal>1&&t.planContent&&(this.selected=JSON.parse(t.planContent))},methods:{show:function(){LazyLoad.lib(["/flatpickr2/flatpickr.min.css","/flatpickr2/flatpickr.min.js"],this.init,null,this)},submit:function(){if(this.thing.plan=this.modal,4===this.modal)this.text="\u91cd\u590d\u4efb\u52a1",this.thing.planContent=JSON.stringify(this.selected);else{this.text=this.dateStr;var t=new Date(this.dateStr).getTime()/1e3;(!this.thing.end||this.thing.end<this.thing.start)&&(this.thing.end=t+7200),this.thing.start=t}this.$emit("input",this.thing),this.close()},close:function(){this.isShow=!1},changeModal:function(t){if(t!==this.modal){if(t<4){var e=["","single","multiple","range"];this.name=this.modals[t],this.cal.clear(),this.cal.set("mode",e[t])}this.modal=t}},init:function(){if(this.isShow=!0,!this.cal){var t=zen.date(this.thing.start),e=this,n=["","single","multiple","range"];this.cal=$(".J_calendar",this.$el).flatpickr({inline:!0,minDate:"today",defaultDate:t,mode:n[this.modal],enableTime:!0,time_24hr:!0,onChange:function(t,n){e.dateStr=n}})}},choseRepeat:function(t){this.modal=4,this.selected=t}}}},function(t,e,n){e.a={props:["value"],data:function(){return{repeatType:1,time:"9:00",result:[],repeats:["\u6bcf\u5929","\u6bcf\u5468","\u6bcf\u6708"],weeks:["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d","\u5468\u65e5"],days:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],weekSelected:[],daySelected:[],selected:{}}},mounted:function(){var t=this,e=this.value;this.repeatType=e.type,1===e.type&&(this.weekSelected=e.data),2===e.type&&(this.daySelected=e.data),this.selected=e,$(".J_calendar-2",this.$el).flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:this.time,time_24hr:!0,onChange:function(e,n){t.time=n,this.emit()}})},methods:{change:function(t){this.repeatType=t,this.emit()},selectWeek:function(t){var e=this.weekSelected.indexOf(t);e>-1?this.weekSelected.splice(e,1):this.weekSelected.unshift(t),this.emit()},selectDay:function(t){var e=this.daySelected.indexOf(t);e>-1?this.daySelected.splice(e,1):this.daySelected.unshift(t),this.emit()},emit:function(){1===this.repeatType&&(this.selected.data=this.weekSelected),2===this.repeatType&&(this.selected.data=this.daySelected),this.selected.time=this.time,this.selected.type=this.repeatType,this.$emit("input",this.selected)}}}},function(t,e,n){var i=n(2);e.a={props:["value"],data:function(){return{isShow:!1,isEdit:!1,newText:"",newColor:0,selected:[],tags:[],colors:[]}},created:function(){this.colors=i.a},methods:{close:function(){this.isShow=!1},addTag:function(){},newTag:function(){if(!this.newText)return alert("\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a");var t={text:this.newText,color:this.colors[this.newColor]};this.tags.push(t),this.newText="",this.cancel()},cancel:function(){this.isEdit=!1},editModal:function(){this.isEdit=!0},selectTag:function(t){},show:function(){this.isShow=!0,0===this.tags.length&&(this.isEdit=!0)},selectColor:function(t){this.newColor=t}}}},function(t,e,n){var i=n(28),a=n(109),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){e.a={props:["value"],data:function(){return{thing:{}}},mounted:function(){this.thing=this.value},methods:{select:function(t){t!==this.thing.quadrant&&(this.thing.quadrant=t,this.$emit("input",this.thing))}}}},function(t,e,n){e.a={props:["item"],data:function(){return{text:"",placeholder:"\u6309\u56de\u8f66\u5065\u53d1\u9001\u8bc4\u8bba",isInput:!0}},methods:{submitComment:function(){var t={targetId:this.item._id,content:this.text,status:1};zen.http(t,"/put/comment.json",function(){this.text="",zen.vue.$emit("addNewComent",null)},this)}}}},function(t,e,n){e.a={props:["value"],data:function(){return{selected:[],thing:{},options:[{name:"\u5f00\u59cb\u65f6\u524d5\u5206\u949f",value:0,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d15\u5206\u949f",value:1,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d30\u5206\u949f",value:2,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d1\u5929",value:3,checked:!1}]}},mounted:function(){if(this.thing=this.value,!this.thing.remind)return this.selected=[];this.selected=this.thing.remind.split(","),this.checkStatus()},methods:{select:function(t){if($.inArray(t,this.selected)<0)this.selected.push(t);else for(var e=0;e<this.selected.length;e++)this.selected[e]===t&&this.selected.splice(e,1);this.emit()},checkStatus:function(){for(var t=0;t<this.options.length;t++){this.options[t].checked=!1;for(var e=0;e<this.selected.length;e++)this.options[t].value===this.selected[e]&&(this.options[t].checked=!0)}},emit:function(){this.checkStatus(),this.thing.remind=this.selected.join(","),this.$emit("input",this.thing)}}}},function(t,e,n){var i=n(116);e.a={props:["value"],data:function(){return{calendar:null,currentEvt:null,eventData:{},isShow:!1}},mounted:function(){LazyLoad.lib(["/calendar/moment.min.js","/calendar/fullcalendar.min.js"],this.init),zen.vue.$on("thingUpdate",this.update)},methods:{init:function(){var t={editable:!0,header:{left:"prev,next today",center:"title",right:"month,agendaWeek"},views:{month:{titleFormat:"YYYY\u5e74MM\u6708  DD"}},locale:"zh-cn",timezone:"local",fixedWeekCount:!1,aspectRatio:1.8,windowResizeDelay:300,selectable:!0,selectHelper:!0,select:this.add,eventClick:this.detail,eventResize:this.change,eventDrop:this.change,minTime:"06:00:00",maxTime:"23:00:00",eventLimit:!0,events:[]},e=zen.user.calendar;e&&(t.defaultView=e),t.defaultDate=new Date,t.events=i.a.convert(this.value);var n=$(".cal",this.$el).fullCalendar(t);this.calendar=n.fullCalendar("getCalendar"),this.$nextTick(function(){this.calendar.render(),this.calendar.refetchEvents()})},change:function(t){var e={_id:t.id,start:i.a.unixTime(t.start)};t.end&&(e.end=i.a.unixTime(t.end)),zen.http(e,"/thing/patch.do",function(t){},this)},update:function(t){if(t.owner!==zen.user.id)return this.remove(t._id);this.currentEvt.color=i.a.getColor(t.quadrant),this.currentEvt.title=t.title,this.calendar.updateEvent(this.currentEvt)},add:function(t,e){this.isShow=!0,this.eventData={start:t,end:e}},addThing:function(t){if(t){var e=i.a.convert(t);this.calendar.renderEvent(e)}else this.calendar.unselect()},detail:function(t,e,n){this.currentEvt=t,zen.vue.$emit("thingDetail",t.id)},remove:function(t){this.calendar.removeEvents([t])},getThing:function(t){for(var e=void 0,n=0;n<this.value.length;n++)if((e=this.value[n])._id===t)return e;return null}}}},function(t,e,n){var i=n(33),a=n(7),s=n(154);e.a={data:function(){return{chapterData:{},content:null,value:null}},watch:{value:function(t){this.chapterData=t,this.loadContent(t._id,a.a.initData())}},components:{Editor:i.a,Tree:s.a},methods:{save:function(t,e,n){if(!t)return!1;void 0===n&&(n=3);var i={_id:this.chapterData._id,content:JSON.stringify(e)};zen.http(i,"/note/patch.do",function(t){0===n&&zen.notice(t.data,"success")},this,n)},loadContent:function(t,e){t&&zen.http({_id:t},"/extend/note.json",function(t){var n=t.data;n.content?this.content=JSON.parse(n.content):this.content=e},this)}}}},function(t,e,n){var i=n(34),a=n(153),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(119),a=n(123),s=n(124),o=n(126),r=n(151);e.a={props:["data","summary","pid"],components:{Chapter:i.a,AddDoc:s.a,Board:o.a,Set:r.a},data:function(){return{chapterData:{},content:{},showSet:!1,readonly:!1,docId:null}},watch:{data:function(t){this.chapterData=t},summary:function(t){this.content=t}},mounted:function(){this.chapterData=this.data,this.content=this.summary,this.$nextTick(function(){zen.vue.$on("chapterEvt",this.subscribe)});var t=zen.getParam("docId");t&&(this.docId=t)},methods:a.a}},function(t,e,n){var i=n(7),a=n(120);e.a={name:"Chapter",props:["value","readonly","parent"],components:{Icon:a.a},data:function(){return{title:"",data:[],current:null,isEdit:!1}},watch:{value:function(){this.dragAndDrop()}},mounted:function(){this.dragAndDrop()},methods:{toggle:function(){this.isEdit=!this.isEdit},dragAndDrop:function(){this.data=[];var t=void 0;if(this.value){for(var e=0;e<this.value.length;e++)!0===(t=this.value[e]).status&&(t.status=!1),this.data.push(t);this.$nextTick(function(){for(var t=$(".item",this.$el),e=void 0,n=0;n<t.length;n++)(e=$(t[n])).hasClass("ui-draggable")||(e.draggable(i.a.dragConfig),e.droppable(i.a.dropConfig),e.prev().droppable(i.a.dropConfig))})}},change:function(t){this.current=t,this.title=t.title,this.isEdit=!0},update:function(){this.current.title=this.title,this.isEdit=!1;var t={_id:this.current.link,title:this.title};t._id&&zen.http(t,"/note/patch.do",function(t){},this),this.trigger(null,"save")},view:function(t){return"folder"===t.link?t.status=!t.status:t.link?"folder"===t.link?(t.status=!t.status,this.trigger(t.id,"folder")):void this.trigger(t.link,"doc"):this.trigger(t,"newDoc")},fold:function(t){t.status=!t.status},trigger:function(t,e){if("remove"!==e||confirm("\u786e\u5b9a\u5220\u9664\u6587\u6863\u3010"+t.title+"\u3011\u5417")){var n={event:e,data:t};zen.vue.$emit("chapterEvt",n)}}}}},function(t,e,n){e.a={props:["type"]}},function(t,e,n){e.a={props:["parent"],data:function(){return{type:1,isShow:!1,title:"",item:{},types:[{value:1,title:"\u6587\u672c"},{value:2,title:"\u8111\u56fe"},{value:5,title:"\u6d41\u7a0b\u56fe"},{value:4,title:"\u76ee\u5f55"}]}},mounted:function(){this.$nextTick(function(){zen.vue.$on("showAddDocBox",this.show)})},methods:{show:function(t,e){this.item=e.data,this.title=e.data.title,this.isShow=t},add:function(){var t={content:"",title:this.item.title,type:this.type,chapterId:this.item.id,parentId:this.parent};if(this.$parent.pid&&(t.isProject="1"),4===this.type){var e={event:"edit",link:"folder",data:this.item.id,uid:zen.user.id,title:this.title};return zen.vue.$emit("chapterEvt",e),this.toggle()}zen.http(t,"/note/add.do",function(t){var e=t.data,n={event:"edit",link:e._id,data:this.item.id,type:this.type,uid:e.uid,title:this.title};zen.vue.$emit("chapterEvt",n),this.title="",this.toggle(),n={event:"doc",data:e._id},zen.vue.$emit("chapterEvt",n)},this)},toggle:function(){this.isShow=!this.isShow},keydown:function(){}}}},function(t,e,n){var i=n(127),a=n(135),s=n(146),o=n(148),r={1:"Editor",2:"Mind",3:"Flow",5:"Graph"},c={1:"\u6309Ctr+S \u7acb\u5373\u4fdd\u5b58\u6587\u6863",2:"\u9009\u4e2d\u8282\u70b9\uff0c\u6309enter\u952e\u6dfb\u52a0\u5b50\u8282\u70b9\uff0ctab\u952e\u6dfb\u52a0\u540c\u7ea7\u8282\u70b9",3:"\u9009\u4e2d\u8282\u70b9\uff0c\u53cc\u51fb\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f\uff0c\u6309del\u952e\u5220\u9664\u8282\u70b9",5:""};e.a={props:["itemId","nodes"],components:{Editor:i.a,Mind:a.a,Nav:o.a,Graph:s.a},data:function(){return{isShow:!1,showNav:!1,readonly:!1,emitSave:!1,timerId:1,tipMsg:"",value:null,tooltip:"",name:"Editor"}},watch:{itemId:function(t){this.init(t)}},mounted:function(){this.init(this.itemId)},methods:{init:function(t){if(!t)return this.isShow=!1;zen.http({_id:t},"/note/get.do",function(e){zen.lockBody(!0);var n=e.data;this.name=r[n.type],this.tooltip=c[n.type],this.value=n,n&&n.content||(this.readonly=!1),this.isShow=!0;var i=window.location.href;i.indexOf("docId")>-1?(i=zen.setParam("docId",t,i),window.history.replaceState(null,n.title,i)):(i=zen.setParam("docId",t,i),window.history.pushState(null,n.title,i))},this)},edit:function(){this.readonly=!this.readonly},saved:function(){"Graph"!==this.name?this.emitSave=!0:document.getElementById("J_graphIframe").contentWindow.postMessage({type:"save"},"/")},nav:function(){this.showNav=!this.showNav},close:function(){this.$parent.docId="";var t=zen.setParam("docId","");zen.lockBody(!1),window.history.replaceState(null,null,t)},tip:function(t){this.tipMsg=t,this.emitSave=!1,clearTimeout(this.timerId);var e=this;this.timerId=setTimeout(function(){e.tipMsg=""},5e3)}}}},function(t,e,n){var i=n(128),a=n(132);e.a={props:["readonly","value","emitSave"],components:{Rich:i.a,MD:a.a},data:function(){return{isMD:!1,item:null}},created:function(){this.item=this.value,"md"===window.localStorage.editorMode&&(this.isMD=!0)},methods:{save:function(t,e){var n=this.value,i={_id:this.value._id,title:n.title,content:t};i.title||(i.title="\u65b0\u5efa\u6587\u7ae0\u6807\u9898");var a=0;e&&(a=15),zen.http(i,"/note/patch.do",function(e){this.$parent.tip(e.data),this.item.content=t},this,a)}}}},function(t,e,n){var i=n(3),a=n(129),s=n(130);e.a={props:["value","readonly","emitSave"],data:function(){return{editor:null,isChange:!1,item:{}}},watch:{value:function(t){this.item=t},readonly:function(t){t||this.initEditor()},emitSave:function(t){t&&this.save()}},mounted:function(){this.item=this.value;var t=$(window).height()-50;$(".k-rich-content",this.$el).css("height",t+"px"),this.readonly||this.initEditor()},methods:{initEditor:function(){LazyLoad.lib(["/note/simditor.css","/note/simditor.min.js"],this.init)},init:function(){Object(a.a)($,Simditor),Object(s.a)($,Simditor,this.$parent),Simditor.locale="zh-CN";var t=["markdown","|","title","bold","italic","underline","strikethrough","fontScale","color","ol","ul","blockquote","code","table","link","image","hr","indent","outdent","alignment"],e=i.a.uploadDomain()+"/upload/image.do";this.editor=new Simditor({textarea:$("textarea",this.$el),placeholder:"\u8fd9\u91cc\u8f93\u5165\u6587\u5b57...",defaultImage:"//a.yimiyisu.com/kooteam/preview.png",params:{},tabIndent:!0,toolbar:t,toolbarFloat:!1,toolbarFloatOffset:37,toolbarHidden:!1,pasteImage:!0,cleanPaste:!0,allowedAttributes:{},upload:{url:e,fileKey:"file",crossDomain:!0,xhrFields:{withCredentials:!0}}});var n=this;this.editor.uploader.on("uploadsuccess",function(t,e,n){var i=JSON.parse(n);return 4===i.action?alert("\u767b\u5f55\u5df2\u5931\u6548"):23===i.action?alert(i.message):void e.img.attr("src",i.data)}),simple.hotkeys().add("ctrl + s",function(t){t.preventDefault(),n.save()}).add("command + s",function(t){t.preventDefault(),n.save()}),this.editor.setValue(this.item.content)},save:function(t){this.$parent.save(this.editor.getValue(),t)},change:function(t,e){"oninput"===e&&this.save(!0)}}}},function(t,e,n){var i=n(3);e.a={props:["value","readonly","emitSave"],data:function(){return{isShow:!1,fileDom:null,editor:null}},watch:{value:function(t){this.editor.value(t.content)},emitSave:function(t){if(t){var e=this.editor.value();this.$parent.save(e)}}},mounted:function(){this.fileDom=$(".uploadImage",this.$el),LazyLoad.lib(["/note/markdown.css","/note/markdown.js"],this.init)},methods:{init:function(){var t=$("textarea",this.$el);this.editor=new mdEditor({element:t[0],spellChecker:!1,saveDoc:this.$parent.save,changeModel:this.changeMode,uploadImage:this.image,status:!1}),this.editor.value(this.value.content)},image:function(t){this.fileDom.trigger("click"),this.isShow=!0},toggle:function(){this.isShow=!this.isShow},selectFile:function(){var t=new window.FormData,e=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var t=n.responseText,i=JSON.parse(t);if(4===i.action)return alert("\u767b\u5f55\u5df2\u5931\u6548");if(23===i.action)return alert(i.message);e.insertImage(i.data),$("input",e.fileDom).val("")}};var a=$("input",this.fileDom)[0].files[0];if(a){t.append("file",a);var s=i.a.uploadDomain()+"/upload/image.do";n.open("POST",s,!0),n.send(t)}},insertImage:function(t){this.editor.insertImage(t)},changeMode:function(){this.$parent.isMD=!1,window.localStorage.editorMode="rich"}}}},function(t,e,n){var i=n(8),a=n(9),s=n(1),o=n(5),r=n(136),c=n(139),l=n(141),d=n(143),u=n(13);e.a={props:["value","readonly","emitSave"],data:function(){return{current:null,paper:null,data:{id:"root",ids:1,name:"\u65b0\u5efa\u601d\u7ef4\u5bfc\u56fe",children:[],lineType:1,grapType:1,shape:1}}},components:{Node:Node,Editor:r.a,Sidebar:c.a,Tool:d.a},watch:{value:function(){this.init()},emitSave:function(t){t&&this.save()}},mounted:function(){LazyLoad.lib(["/raphael.min.js"],this.init),$(".k-mind-map",this.$el).draggable()},methods:{init:function(){var t=this.value.content;t&&(this.data=JSON.parse(t)),l.a.init(this),Raphael.fn.mindLine||(Object(i.a)(),Object(a.a)(),l.a.keyboard());var e=$(".k-mind-map",this.$el);this.paper&&this.paper.clear();var n=this.data,r=s.a.cavasSize;this.paper=Raphael(e[0],r,r),o.a.init(n,this.paper),Object(u.a)(e)},emitEditor:function(t){this.$emit("showEditor",t,this.current),t&&this.$emit("showTool",!1)},emitTool:function(t){this.$emit("showTool",t,this.current)},save:function(){if(!this.readonly){var t={_id:this.value._id,content:JSON.stringify(this.data)};zen.http(t,"/note/patch.do",function(t){this.$parent.tip(t.data)},this,4),o.a.reset(this.data,this.paper)}},right:function(t){t.preventDefault(),t.stopPropagation()}}}},function(t,e,n){var i=n(2),a=n(137),s=n(1);e.a={props:["current"],data:function(){return{isShow:!1,isColor:!1,node:null,title:null,color:i.a[0],colors:[],style:"",txt:"",id:""}},mounted:function(){var t=this;this.colors=i.a,this.$parent.$on("showEditor",function(e,n){t.init(e,n)})},methods:{init:function(t,e){if(!t){if(!1===this.isShow)return;return this.isShow=!1,this.style=s.a.hideStyle}this.isShow=!0,this.id=e.id,this.isColor=!1;var n=this.$parent,i=e.attrs.x-30,a=e.attrs.y-30,o=e.getBBox().width+60,r=e.getBBox().height+60;o<150&&(o=150),r<110&&(r=110),this.style="top:"+a+"px;left:"+i+"px;width:"+o+"px;height:"+r+"px",this.txt=n.paper.getById("t_"+e.id),this.title=this.txt.attrs.text;var c=$("textarea",this.$el);this.$nextTick(function(){c.focus()})},keyup:function(t){t.stopPropagation();var e=t.keyCode,n=this.$parent;return 27===e?n.emitEditor(!1):13===e?this.save():void 0},save:function(){var t=this.$parent;if(this.txt.attrs.text!==this.title){var e=a.a.queryNodeById(this.id,t.data);if(!e)return;e.name=this.title,t.save()}t.emitEditor(!1)},colorClick:function(){this.isColor=!this.isColor},select:function(t){if(this.color!==t){this.color=t;var e=this.$parent;a.a.queryNodeById(this.id,e.data).color=t,e.save()}},click:function(t){t.stopPropagation()}}}},function(t,e,n){var i=n(5);e.a={props:["value"],data:function(){return{line:1,grap:1,lineType:{1:"\u6298\u7ebf",2:"\u66f2\u7ebf"},grapType:{1:"\u5de6\u53f3",2:"\u5411\u53f3",3:"\u5411\u5de6",4:"\u4e0a\u4e0b",5:"\u5411\u4e0b",6:"\u5411\u4e0a"}}},mounted:function(){this.line=this.value.lineType,this.grap=this.value.grapType,$(this.$el).draggable({handle:".handle"})},methods:{choseLineType:function(t){if(this.line!==t){var e=this.$parent;this.line=t,e.data.lineType=t,i.a.reset(e.data,e.paper)}},choseGrapType:function(t){if(this.grap!==t){var e=this.$parent;this.grap=t,e.data.grapType=t,i.a.reset(e.data,e.paper)}}}}},function(t,e,n){var i=n(1);e.a={data:function(){return{isShow:!1,readonly:!1,style:""}},mounted:function(){var t=this;this.$parent.$on("showTool",function(e,n){t.init(e,n)})},methods:{add:function(t){t.stopPropagation(),zen.vue.$emit("mindEvt","addNode",!0)},remove:function(t){t.stopPropagation(),zen.vue.$emit("mindEvt","removeNode",!0)},edit:function(t){t.stopPropagation(),this.$parent.emitEditor(!0)},init:function(t,e){if(!t){if(!1===this.isShow)return;return this.isShow=!1,this.style=i.a.hideStyle}this.readonly=this.$parent.readonly,this.isShow=!0;var n=e.getBBox(),a=n.y-i.a.elHeight;this.style="left:"+n.x+"px;top:"+a+"px"}}}},function(t,e,n){e.a={props:["value"],watch:{value:function(){this.changeData()}},mounted:function(){var t=this;window.addEventListener("message",function(e){var n=e.data;"graphLoad"===n.type&&t.changeData(),"xmlsave"===n.type&&t.$parent.tip("\u4fdd\u5b58\u5b8c\u6210")},!1)},methods:{changeData:function(){var t=document.getElementById("J_graphIframe"),e=this.value,n={type:"load",content:e.content,id:e._id};t.contentWindow.postMessage(n,"/")}}}},function(t,e,n){e.a={props:["value","current"],name:"Nav",methods:{selected:function(t){if(!t.link)return alert(t.title+"\u6587\u6863\u5c1a\u672a\u521b\u5efa");if("folder"!==t.link){var e={event:"doc",data:t.link};zen.vue.$emit("chapterEvt",e)}}}}},function(t,e,n){e.a={props:["note","permision"],data:function(){return{def:"1",users:[],current:{},searchTag:!1}},watch:{def:function(){var t={_id:this.note,permision:this.def};zen.http(t,"/note/patch.do",function(e){this.$parent.chapterData.public=t.permision},this)}},mounted:function(){this.def=this.permision,this.loadData()},methods:{cancel:function(){this.searchTag=!1},select:function(){var t={noteId:this.note,permision:2,uid:this.current.uid};t.uid&&zen.http(t,"/note/addUser.do",function(t){this.searchTag=!1,this.loadData()},this)},showSearch:function(){this.searchTag=!0},close:function(){this.$parent.showSet=!1},remove:function(t){zen.http({_id:t._id,noteId:this.note},"/note/removeUser.do",function(t){this.loadData()},this)},loadData:function(){zen.http({noteId:this.note},"/note/users.do",function(t){this.users=t.data},this)}}}},function(t,e,n){e.a={data:function(){return{data:[],current:null,total:0}},mounted:function(){zen.http(null,"/note/my.do",function(t){var e=t.data;this.data=e.data,this.total=t.total,this.load()||(this.$parent.value=this.data[0])},this)},methods:{select:function(t){if(this.current!==t._id){this.current=t._id,this.$parent.value=t;var e=zen.setParam("rid",t._id);window.history.replaceState(null,null,e)}},load:function(){var t=zen.getParam("rid");return!!t&&(this.current=t,zen.http({_id:t},"/get/note.json",function(t){this.$parent.value=t.data},this),!0)}}}},function(t,e,n){e.a={data:function(){return{show:!1}},methods:{click:function(){this.show=!this.show}}}},function(t,e,n){var i=n(160),a=n(162);e.a={props:["value"],data:function(){return{scales:[],things:[],length:180,isShow:!1,now:{},time:0,start:{}}},components:{Scale:i.a,Thing:a.a},mounted:function(){this.projectId=zen.getParam("id"),zen.http({projectId:this.projectId},"/select/thingByprojectId.json",function(t){t.data&&(this.things=t.data.data)},this),this.initScale(),this.$nextTick(function(){this.startPosition()})},methods:{add:function(){this.isShow=!0},addThing:function(t){t.start=0,t.end=0,this.things.unshift(t)},startPosition:function(){$("#J_wrap").scrollLeft(2520)},initScale:function(){var t=-parseInt(this.length/3),e=new Date,n=void 0;this.time=parseInt(e.getTime()/1e3),this.now=this.createScale(e),e.setDate(t);for(var i=0;i<this.length;i++)e.setDate(e.getDate()+1),n=this.createScale(e),0===i?this.start=n:this.scales.push(n)},createScale:function(t){var e=void 0,n=void 0,i=void 0;return n=t.getDate(),e={date:null,month:t.getMonth()+1,text:null,isWeekend:!1,isFirst:!1},e.date=t.getFullYear()+"-"+e.month+"-"+n,1===n?(e.isFirst=!0,e.text=e.month+"\u6708"):(n<10&&(n="0"+n),e.text=n),0!==(i=t.getDay())&&6!==i||(e.isWeekend=!0),e}}}},function(t,e,n){e.a={props:["data","start"],data:function(){return{list:[]}},created:function(){}}},function(t,e,n){e.a={props:["scales","value","length","start","time"],data:function(){return{data:{},lefe:0,width:0,css:""}},created:function(){this.data=this.value,this.left=45*(Math.floor((this.data.start-this.time)/86400)+60),this.width=45*(this.data.end-this.data.start)/86400,this.css="left:"+this.left+"px;width:"+this.width+"px"},mounted:function(){var t=$(".scale",this.$el),e=this;t.resizable({grid:[45,0],handles:"e",stop:function(t,n){var i=n.size.width;e.save(e.left,i)}}),t.draggable({grid:[45,0],axis:"x",stop:function(t,n){var i=n.position.left;e.save(i,e.width)}})},methods:{addDate:function(t){if($(this.$el).hasClass("empty")){var e=45*(t+1);this.data.start=86400*(t-59)+this.time,this.css="left:"+e+"px;width:45px",this.save(e,45)}},mousedown:function(t){2===t.button&&(t.preventDefault(),t.stopPropagation())},show:function(){zen.vue.$emit("thingDetail",this.data)},save:function(t,e){this.left=t,this.width=e;var n=86400*(t/45-60)+this.time;isNaN(n)||(this.data.start=n,this.data.end=e/45*86400+n,zen.http(this.data,"/thing/patch.do",function(){},this))}}}},function(t,e,n){var i=n(27);e.a={props:["value","visible","isCal"],data:function(){return{quadrant:"a",title:"",user:{},isShow:!1,item:{quadrant:"a"}}},components:{Priority:i.a},watch:{user:function(t){this.user=t,this.isShow=!1}},created:function(){var t=zen.user;this.user={userId:t.id,nick:t.nick}},methods:{close:function(){this.isCal&&this.$parent.addThing(null),this.$parent.isShow=!1},show:function(){this.isShow=!0},blur:function(){this.isShow=!1},submit:function(){if(!this.title)return alert("\u5f85\u529e\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var t={quadrant:this.item.quadrant,title:this.title,projectId:"",onwer:this.user.userId,tag:""};if(this.isCal){var e=parseInt(this.value.start._d.getTime()/1e3),n=parseInt(this.value.end._d.getTime()/1e3);t.start=e;var i=n-e;(i>86400||i<43200)&&(t.end=n)}this.$parent.projectId&&(t.projectId=this.$parent.projectId),zen.http(t,"/thing/put.do",function(e){t._id=e.data._id,this.$parent.addThing(t),this.close(),this.title=""},this)},select:function(t){this.quadrant=t}}}},function(t,e,n){e.a={props:["timer","showTip","type"],data:function(){return{timerId:null,isDD:!1,checkId:null,isShow:!1}},mounted:function(){if(this.type&&(this.isDD=!0,this.timer&&zen.http(null,"/ding/qr.do",function(t){var e=$(".qr",this.$el),n=t.data,i=n.host+"/ding/home.wap?checkId="+n.checkId;new QRCode(e[0],{width:150,height:150}).makeCode(i),this.checkId=n.checkId},this)),this.timer){var t=this;this.timerId=setInterval(function(){t.login()},1e3*this.timer)}else this.login()},destroyed:function(){clearInterval(this.timerId)},methods:{login:function(){var t=$("#J_qrId").val(),e=void 0;if(this.isDD)e="/ding/checkLogin.do";else{var n="//bridge.kooteam.com";"daily"===zen.env&&(n="//bridge.dev.zeto.me"),e=n+"/weixin/checkLogin.do"}zen.http({id:t},e,function(t){if(!t.hasError){this.timerId&&(clearInterval(this.timerId),this.timerId=null);var e=window.localStorage.config,n="/todo/home.htm";e&&e.home&&(n=(e=JSON.parse(e)).home),window.location=n}},this)}}}},function(t,e,n){var i=n(33),a=n(7);e.a={data:function(){return{isLoad:!1,id:null,data:{}}},components:{Editor:i.a},mounted:function(){this.id=zen.getParam("id"),zen.http({id:this.id},"/project/chapter.do",function(t){var e=t.data;e.content?this.content=JSON.parse(e.content):this.content=a.a.initData(),this.data={_id:this.id,title:e.title+"-\u6587\u6863"},this.isLoad=!0},this)},methods:{save:function(t,e,n){if(void 0===n&&(n=3),!t)return!1;var i={_id:this.id,content:JSON.stringify(e)};zen.http(i,"/project/saveDoc.do",function(t){0===n&&zen.notice(t.data,"success")},this,n)}}}},function(t,e,n){var i=n(173),a=n(178),s=n(180);e.a={props:["value"],data:function(){return{projectId:"",now:0,data:{},columns:[]}},watch:{value:function(){this.init()}},components:{Column:i.a,Add:a.a},mounted:function(){this.init()},destroyed:function(){zen.lockBody(!1)},methods:{hideUserSearch:function(){this.$emit("hideUserSearch",!0)},init:function(){var t=this;this.columns=[],this.projectId=zen.getParam("id");var e=new Date,n=this.value;if(this.now=e.getTime()%1e3,n.board){var i=JSON.parse(n.board);this.rndId=i.id,this.columns=i.content}else this.rndId=zen.id++,this.columns=s.a;var a=310*this.columns.length+360;$(".k-board-detail",this.$el).css("width",a+"px");for(var o=0;o<this.columns.length;o++)this.columns[o].sons=[];var r=n.things;r&&0!==r.length&&(r.forEach(function(e){var n=t.getColumn(e.tag);1===e.status?n.sons.push(e):n.sons.unshift(e)}),"\u672a\u5f52\u7c7b"===this.columns[0].tag&&0===this.columns[0].length&&this.columns.splice(0,1),this.$nextTick(function(){zen.lockBody(!0);var t=$(window).height()-150;t<680&&$("#J_app .k-project-toolbar").css("min-height",t+"px"),$(".column",this.$el).css("height",t+"px"),this.resize()}))},resize:function(){var t=300*(this.columns.length+2)+20;$(".k-board-detail",this.$el).css("width",t+"px")},getColumn:function(t){for(var e=void 0,n=0;n<this.columns.length;n++)if((e=this.columns[n]).tag===t)return e;if("\u672a\u5f52\u7c7b"===this.columns[0].tag)return this.columns[0];var i={tag:"\u672a\u5f52\u7c7b",title:"\u672a\u5f52\u7c7b",sons:[]};return this.columns.unshift(i),this.columns[0]},save:function(){var t={id:this.rndId,content:[]};this.columns.forEach(function(e){t.content.push({title:e.title,tag:e.tag,sons:[]})});var e={_id:this.projectId,board:JSON.stringify(t)};zen.http(e,"/patch/project.json",function(){this.resize()},this)}}}},function(t,e,n){var i=n(6),a=n(174),s=n(18);e.a={props:["data","now"],components:{Thing:i.a,AddThing:a.a},data:function(){return{things:{},currentId:"",title:"",isAddThing:!1,isEdit:!1,showAction:!1}},mounted:function(){var t=this,e=$(this.$el);this.things=this.data,e.draggable({helper:"clone",handle:".h4",opacity:.9,zIndex:10}),$(e).droppable({accept:".column",cancel:".k-thing",classes:{"ui-droppable-hover":"draghover"},drop:function(e,n){for(var i=n.helper.data("id"),a=$(e.target).data("id"),s=t.$parent.columns,o=void 0,r=0;r<s.length;r++)if(s[r].tag===i){r,o=s.splice(r,1)[0];break}for(var c=0;c<s.length;c++)if(s[c].tag===a){s.splice(c,0,o);break}t.$parent.save()}}),$(".things",e).droppable({accept:".k-thing",classes:{"ui-droppable-hover":"draghover"},start:function(t,e){t.stopPropagation()},drop:function(e,n){e.stopPropagation();var i=n.helper.data("id"),a=$(e.target).data("id");if(t.currentId===i)return t.currentId="";t.exchange(i,a,!0)}})},methods:{blur:function(){this.showAction=!1},add:function(){this.isAddThing=!0,this.$nextTick(function(){$("input",this.$el).focus()})},focus:function(){this.showAction=!0,this.$nextTick(function(){$(".action",this.$el).focus()})},renameClk:function(){this.isEdit=!0,this.$nextTick(function(){$("input",this.$el).focus()})},keyup:function(t){var e=t.keyCode;if(27===e)return this.blur();13===e&&this.rename(t)},rename:function(t){var e=$(t.currentTarget).val(),n=this.$parent.columns;if(e&&(this.isEdit=!1,e!==this.things.title)){for(var i=0;i<n.length;i++)n[i].tag===this.things.tag&&(n[i].title=e);this.$parent.save()}},sort:function(t,e){s.a.sort(t,e,this.things.sons)},exchange:function(t,e,n){for(var i=void 0,a=void 0,s=void 0,o=this.$parent.columns,r={},c=this,l=0;l<o.length;l++){for(i=o[l],a=0;a<i.sons.length;a++)if(i.sons[a]._id===t){s=i.sons.splice(a,1)[0];break}if(s)break}if(n)i=c.$parent.getColumn(e),s.tag=e,i.sons.push(s);else for(i=c.$parent.getColumn(e.tag),a=0;a<i.sons.length;a++)if(i.sons[a]._id===e._id){s.order=e.order+1,s.tag=e.tag,i.sons.splice(a,0,s);break}r._id=s._id,r.tag=s.tag,r.order=s.order,zen.http(r,"/thing/patch.do",function(t){},this)},remove:function(){if(confirm("\u786e\u5b9a\u5220\u9664\u5417\uff1f")){for(var t=this.$parent.columns,e=void 0,n=0;n<t.length;n++)if((e=t[n]).tag===this.things.tag){e=t.splice(n,1)[0];break}this.$parent.save(),e.sons.length>0&&t.length>0&&zen.refresh()}}}}},function(t,e,n){var i=n(175);e.a={props:["data"],data:function(){return{title:"",owner:null,uid:"",nick:"",prority:"",prorityData:i.a,isShow:!1}},watch:{owner:function(t){this.nick=t.nick,this.uid=t.userId,this.isShow=!1}},mounted:function(){this.nick="\u6211\u81ea\u5df1",this.uid=zen.user.id,this.$parent.$parent.$on("hideUserSearch",this.userBlur)},methods:{userShow:function(){this.isShow=!0},userBlur:function(){this.isShow&&(this.isShow=!1)},select:function(t,e){t.key!==this.prority&&(this.prority=t.key,$(".k-prority",this.$el).removeClass("active"),$(e.currentTarget).addClass("active"))},save:function(){var t=this.$parent.$parent;if(!this.title)return alert("\u4efb\u52a1\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var e={title:this.title,tag:this.data.tag,projectId:t.projectId,quadrant:"b",status:0};this.prority&&(e.quadrant=this.prority),this.owner&&(e.owner=this.owner.uid),zen.http(e,"/thing/put.do",function(n){var i=n.data,a=t.columns;e._id=i._id;for(var s=0;s<a.length;s++)a[s].tag===e.tag&&a[s].sons.unshift(e);this.close()},this)},close:function(){this.$parent.isAddThing=!1}}}},function(t,e,n){e.a={data:function(){return{title:"",isEdit:!1}},methods:{focus:function(){this.isEdit=!0,this.$nextTick(function(){$("input",this.$el).focus()})},cancel:function(){this.isEdit=!1},keyup:function(t){var e=t.keyCode;if(27===e)return this.cancel();13===e&&this.save()},save:function(){if(!this.title)return alert("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a");var t=this.$parent;t.rndId++;var e={title:this.title,tag:"t"+t.rndId,sons:[]};t.columns.push(e),this.title="",this.cancel(),t.save()}}}},function(t,e,n){e.a={props:["name","max","value","my","fixed"],data:function(){return{keyword:"",loaded:!1,uid:"",history:{},localApp:!0,users:[]}},watch:{keyword:function(){this.load()}},mounted:function(){this.localApp=!!window.localApp;var t=window.localStorage.userCache;t&&(this.history=JSON.parse(t));for(var e in this.history){var n={uid:e,nick:this.history[e]};this.users.push(n)}if(this.my){var i={uid:zen.user.id,nick:"\u6211\u81ea\u5df1"};this.users.unshift(i)}},methods:{stop:function(){},err:function(t){$(t.currentTarget).attr("src","https://img.yimiyisu.com/avator.jpg")},select:function(t,e){e.stopPropagation();var n=$(e.currentTarget);n.hasClass("selected")?(n.removeClass("selected"),this.uid="",this.$emit("input",null)):($(".selected",this.$el).removeClass("selected"),n.addClass("selected"),this.uid=t.uid,this.uid!==zen.user.id&&(this.history[t.uid]=t.nick),window.localStorage.userCache=JSON.stringify(this.history),this.$emit("input",t))},load:function(){zen.http({keyword:this.keyword,size:6},"/user/searchFriend.do",function(t){if(t.data?this.users=t.data:this.users=[],this.loaded=!0,this.my){var e=zen.user,n={_id:"my",uid:e.id,nick:e.nick};this.users.unshift(n)}},this)}}}},function(t,e,n){var i=n(185),a=n(187),s=n(189),o=n(191),r=n(193);e.a={props:["name","value"],components:{skin:i.a,logout:a.a,things:s.a,set:o.a,menus:r.a}}},function(t,e,n){e.a={props:["value"],data:function(){return{imgs:[1,2,3,4,5,6,7,8,9,10],def:3}},mounted:function(){this.value&&(this.def=this.value)},methods:{select:function(t){this.def=t;var e="//a.yimiyisu.com/kooteam/bg/"+t+".jpg";$("body").css("background-image","url('"+e+"')")}}}},function(t,e,n){e.a={mounted:function(){var t="//bridge.kooteam.com";"daily"===zen.env&&(t="//bridge.dev.zeto.me");var e=t+"/home/logout.do";zen.user.isLocal&&(e="/home/quit.do"),zen.http(null,e,function(){window.localStorage.removeItem("config"),document.cookie="",window.location="/home.html"})}}},function(t,e,n){var i=n(6);e.a={props:["value"],components:{Thing:i.a},data:function(){return{list:[],now:0}},created:function(){var t=new Date;this.now=t.getTime()%1e3}}},function(t,e,n){e.a={methods:{save:function(t){var e=t.data;zen.user.calendar=e.calendar,zen.user.home=e.home,window.localStorage.config=""}}}},function(t,e,n){e.a={data:function(){return{current:"",isRoot:!1,mode:0,menus:[{icon:"",href:"",title:""}]}},mounted:function(){"root"===zen.user.username&&(this.isRoot=!0),this.mode=zen.user.mode,this.$nextTick(function(){var t=window.location.pathname;$("li",this.$el).each(function(){var e=$(this);e.data("href")===t&&e.addClass("active")})})},methods:{jump:function(t){var e=$(t.currentTarget);e.hasClass("active")||zen.goto(e.data("href"))}}}},function(t,e,n){var i=n(197);e.a={props:["name","value"],components:{action:i.a}}},function(t,e,n){e.a={props:["value"],data:function(){return{id:"",isOnwer:!1}},mounted:function(){this.id=this.value._id;var t=zen.user.id;this.value.owner===t&&(this.isOnwer=!0)},methods:{click:function(t){t.stopPropagation()}}}},function(t,e,n){var i=n(201),a=n(203);e.a={props:["name","value"],components:{login:i.a,employee:a.a}}},function(t,e,n){e.a={mounted:function(){dd.ready(function(){dd.runtime.permission.requestAuthCode({corpId:"ding757b036387e60579",onSuccess:function(t){},onFail:function(t){}})})}}},function(t,e,n){e.a={}},function(t,e,n){var i=n(207),a=n(209);e.a={props:["check","timer"],components:{Password:i.a,QR:a.a},data:function(){return{isQr:!1,hasQr:!1,params:null,target:"/todo/home.htm",timerId:null}},mounted:function(){this.check?this.status():zen.http(null,"/login/type.do",function(t){var e=t.data;this.params=e,e.qr&&(this.isQr=!0,this.hasQr=!0,this.timerId=setInterval(this.checkId,2e3))},this)},destory:function(){clearInterval(this.timerId)},methods:{change:function(){this.isQr=!this.isQr},checkId:function(){var t=this.params.checkId;t&&zen.http({checkId:t},"/login/checkId.do",function(t){t.hasError||(window.location.href=this.target)},this)},status:function(){zen.http(null,"/login/checkStatus.do",function(t){if(!t.hasError){var e=this.target,n=t.data;n.home&&(e=n.home),window.location=e}},this)}}}},function(t,e,n){e.a={props:["value","target"],data:function(){return{user:"",pwd:""}},mounted:function(){},methods:{submit:function(){zen.http({user:this.user,pwd:this.pwd},"/login/checkPwd.do",function(t){t.hasError||(window.location=this.target)},this)}}}},function(t,e,n){e.a={props:["value"],mounted:function(){var t=$(".qr",this.$el),e=this.value,n=e.host+"?checkId="+e.checkId;new QRCode(t[0],{width:150,height:150}).makeCode(n)}}},,,,,,,,,,,function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(87),a=n(94),s=n(115),o=n(118),r=n(157),c=n(159),l=n(165),d=n(167),u=n(169),h=n(170),v=n(172),f=n(182),p=n(184),m=n(196),_=n(200),g=n(206);Object(u.a)(),Vue.component("k-doc",o.a),Vue.component("k-project-doc",h.a),Vue.component("k-board",v.a),Vue.component("k-doc-search",r.a),Vue.component("k-check-login",d.a),Vue.component("k-calendar",s.a),Vue.component("k-todo",i.a),Vue.component("k-todo-add",l.a),Vue.component("k-todo-detail",a.a),Vue.component("k-plan",c.a),Vue.component("k-user-search",f.a),Vue.component("k-system",p.a),Vue.component("k-project",m.a),Vue.component("k-ding",_.a),Vue.component("k-login",g.a)},function(t,e,n){var i=n(14),a=n(93),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(15),a=n(92),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(16),a=n(90),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header z-row"},[n("div",{staticClass:"z-col"},[n("i",{staticClass:"z-icon flag"},[t._v("\ue153")]),t._v(t._s(t.name)+"\n    ")]),t._v(" "),n("div",{staticClass:"z-1",class:{active:t.active}},[n("label",{on:{click:t.show}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",maxlength:"60",placeholder:"\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u9700\u8981\u5904\u7406\u7684\u4e8b\u9879"},domProps:{value:t.text},on:{blur:t.hide,keyup:t.keyup,input:function(e){e.target.composing||(t.text=e.target.value)}}})]),t._v(" "),n("i",{staticClass:"z-icon close",on:{click:t.show}})])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:2!==t.item.status,expression:"item.status !== 2"}],staticClass:"k-thing",class:{finish:t.item.status},attrs:{"data-id":t.item._id},on:{click:t.detail}},[n("label",{attrs:{"data-id":t.item._id},on:{click:function(e){return e.stopPropagation(),t.doFinish(e)}}},[n("i",{staticClass:"z-icon"})]),t._v(" "),n("div",[t._v(t._s(t.item.title))]),t._v(" "),t.item.finish<t.now?n("span",[t._v("\u5ef6\u671f"+t._s(t._f("time")(t.item.finish)))]):t._e()])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"z-12",class:t.things.tag},[n("Title",{attrs:{quadrant:t.things.tag,name:t.things.title}}),t._v(" "),n("div",{staticClass:"block",attrs:{"data-id":t.things.tag}},[t._l(t.things.sons,function(e){return n("Thing",{key:e._id,attrs:{data:e,now:t.now,drag:"qu"}})}),t._v(" "),t.things.sons&&0!==t.things.sons.length?t._e():n("div",{staticClass:"empty"},[t._v("\u606d\u559c\u4f60\uff01\u5df2\u5b8c\u6210\u4e86\u6240\u6709\u5f85\u529e")])],2)],1)},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-todo z-row"},t._l(t.data,function(e){return n("Quadrant",{key:e.tag,attrs:{data:e,now:t.now}})}))},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(19),a=n(114),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(20),a=n(96),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-thing-comment"},[t._m(0),t._v(" "),0===t.commentsData.length?n("div",{staticClass:"empty"},[n("i",{staticClass:"z-icon"},[t._v("\ue24e")]),t._v("\u6682\u65e0\u8bc4\u8bba")]):t._e(),t._v(" "),t._l(t.commentsData,function(e,i){return n("div",{staticClass:"comment"},[n("div",{staticClass:"header z-row"},[n("div",{staticClass:"z-8"},[t._v(t._s(e.nick))]),t._v(" "),n("div",{staticClass:"z-16"},[t.myId===e.uid?n("span",{staticClass:"delete",on:{click:function(e){t.remove(i)}}},[t._v("\u5220\u9664")]):t._e(),t._v(" "),n("span",[t._v(t._s(t._f("idate")(e._id)))])])]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.content))])])})],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header z-row"},[n("div",{staticClass:"z-6"},[n("i",{staticClass:"z-icon"},[t._v("\ue53b")]),t._v("\u52a8\u6001\n        ")]),t._v(" "),n("div",{staticClass:"z-18"})])}]};e.a=i},function(t,e,n){var i=n(21),a=n(98),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this;t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"describe"},[n("textarea")])}]};e.a=i},function(t,e,n){var i=n(22),a=n(100),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-todo-owner"},[n("span",{staticClass:"nick",on:{click:function(e){return e.stopPropagation(),t.show(e)}}},[t._v(t._s(t.name))])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(23),a=n(102),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this;t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-thing"},[n("h4",[n("i",{staticClass:"z-icon"},[t._v("\ue8d2")]),t._v("\u5b50\u4efb\u52a1")])])}]};e.a=i},function(t,e,n){var i=n(24),a=n(106),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(25),a=n(105),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"repeat"},[n("div",{staticClass:"repeat-type"},[t._v("\n        \u91cd\u590d\u65b9\u5f0f\n        "),n("span",[t._v("\n            "+t._s(t.repeats[t.repeatType])+"\n            "),n("ul",t._l(t.repeats,function(e,i){return n("li",{key:i,on:{click:function(e){t.change(i)}}},[t._v(t._s(e))])}))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.repeatType,expression:"repeatType===1"}],staticClass:"weeks"},t._l(t.weeks,function(e,i){return n("span",{key:i,class:{active:t.weekSelected.indexOf(i)>-1},on:{click:function(e){t.selectWeek(i,e)}}},[t._v("\n                    "+t._s(e)+"\n                ")])})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2===t.repeatType,expression:"repeatType===2"}],staticClass:"days"},t._l(t.days,function(e,i){return n("span",{key:i,class:{active:t.daySelected.indexOf(i)>-1},on:{click:function(e){t.selectDay(i,e)}}},[t._v("\n                    "+t._s(e)+"\n                ")])})),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"repeat-time"},[n("input",{staticClass:"J_calendar-2",attrs:{type:"text",placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4\u70b9"}})])}]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-todo-plan"},[n("label",{on:{click:t.show}},[t._v("\n        "+t._s(t.text)+"\n    ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"calendar"},[n("div",{staticClass:"z-row"},[n("div",{staticClass:"z-12 modal"},[n("div",{staticClass:"day"},[n("span",{class:{active:t.modal<4},on:{click:function(e){t.changeModal(1)}}},[t._v("\u5355\u65e5")])]),t._v(" "),n("span",{class:{active:4===t.modal},on:{click:function(e){t.changeModal(4)}}},[t._v("\u91cd\u590d")])]),t._v(" "),n("div",{staticClass:"z-12"},[n("div",{staticClass:"operator"},[n("span",{staticClass:"z-button small",on:{click:t.close}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button small primary",on:{click:t.submit}},[t._v("\u786e\u5b9a")])])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.modal<4,expression:"modal<4"}]},[n("div",{staticClass:"J_calendar"})]),t._v(" "),t.cal?n("Repeat",{directives:[{name:"show",rawName:"v-show",value:4===t.modal,expression:"modal===4"}],on:{choseRepeat:t.choseRepeat},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}):t._e()],1)])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(26),a=n(108),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-todo-tag"},[n("label",{on:{click:t.show}},[t._v("\u5f85\u6dfb\u52a0")]),t._v(" "),t.isShow&&t.isEdit?n("div",{staticClass:"tags"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newText,expression:"newText"}],attrs:{type:"text",placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0"},domProps:{value:t.newText},on:{input:function(e){e.target.composing||(t.newText=e.target.value)}}}),t._v(" "),n("div",{staticClass:"tag"},t._l(t.colors,function(e,i){return n("span",{style:"background:"+e,on:{click:function(e){t.selectColor(i)}}},[t.newColor===i?n("i",{staticClass:"z-icon"},[t._v("\ue5ca")]):t._e()])})),t._v(" "),n("div",{staticClass:"operator"},[n("span",{staticClass:"z-button small",on:{click:t.cancel}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button primary small",on:{click:t.newTag}},[t._v("\u786e\u5b9a")])])]):t._e(),t._v(" "),t.isShow&&!t.isEdit?n("div",{staticClass:"tags"},[n("div",{staticClass:"tag"},t._l(t.tags,function(e,i){return n("span",{style:"background:"+e.color,on:{click:function(e){t.selectTag(i)}}},[t._v(t._s(e.text))])})),t._v(" "),n("div",{staticClass:"operator"},[n("span",{staticClass:"z-button small",on:{click:t.editModal}},[t._v("\u65b0\u589e")]),t._v(" "),n("span",{staticClass:"z-button small",on:{click:t.close}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button small primary",on:{click:t.addTag}},[t._v("\u786e\u5b9a")])])]):t._e()])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{directives:[{name:"tip",rawName:"v-tip",value:"\u91cd\u8981\u4e14\u7d27\u6025",expression:"'\u91cd\u8981\u4e14\u7d27\u6025'"}],staticClass:"k-prority a",class:{active:"a"===t.thing.quadrant},on:{click:function(e){t.select("a")}}}),t._v(" "),n("label",{directives:[{name:"tip",rawName:"v-tip",value:"\u91cd\u8981\u4e0d\u7d27\u6025",expression:"'\u91cd\u8981\u4e0d\u7d27\u6025'"}],staticClass:"k-prority b",class:{active:"b"===t.thing.quadrant},on:{click:function(e){t.select("b")}}}),t._v(" "),n("label",{directives:[{name:"tip",rawName:"v-tip",value:"\u7d27\u6025\u4e0d\u91cd\u8981",expression:"'\u7d27\u6025\u4e0d\u91cd\u8981'"}],staticClass:"k-prority c",class:{active:"c"===t.thing.quadrant},on:{click:function(e){t.select("c")}}}),t._v(" "),n("label",{directives:[{name:"tip",rawName:"v-tip",value:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025",expression:"'\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025'"}],staticClass:"k-prority d",class:{active:"d"===t.thing.quadrant},on:{click:function(e){t.select("d")}}})])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(29),a=n(111),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-comment-post"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"input",attrs:{placeholder:"\u6309\u56de\u8f66\u5065\u53d1\u9001\u8bc4\u8bba",type:"text"},domProps:{value:t.text},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitComment(e):null},input:function(e){e.target.composing||(t.text=e.target.value)}}})])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(30),a=n(113),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"clock"},[0===t.selected.length?n("span",[t._v("\u5f85\u8bbe\u7f6e")]):t._e(),t._v(" "),t._l(t.selected,function(e,i){return n("span",{key:e},[t._v(t._s(t.options[e].name))])}),t._v(" "),n("ul",t._l(t.options,function(e){return n("li",{class:{active:e.checked},on:{click:function(n){t.select(e.value)}}},[t._v(t._s(e.name))])}))],2)},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item&&t.isShow?n("div",{staticClass:"k-thing-detail-bg",on:{dblclick:t.close,click:t.click}},[n("div",{staticClass:"k-thing-detail",on:{dblclick:t.preventEvt}},[n("div",{staticClass:"z-row header"},[n("div",{staticClass:"z-12"},[0===t.item.status?n("span",{staticClass:"button",on:{click:function(e){return e.stopPropagation(),t.doFinish(e)}}},[n("i",{staticClass:"z-icon"},[t._v("\ue5ca")]),t._v("\u6807\u8bb0\u5b8c\u6210\n                ")]):t._e(),t._v(" "),1===t.item.status?n("span",{staticClass:"button",on:{click:function(e){return e.stopPropagation(),t.doFinish(e)}}},[n("i",{staticClass:"z-icon"},[t._v("\ue5cd")]),t._v("\u6807\u8bb0\u672a\u5b8c\u6210\n                ")]):t._e(),t._v(" "),2===t.item.status?n("span",{staticClass:"button",on:{click:function(e){return e.stopPropagation(),t.doFinish(e)}}},[n("i",{staticClass:"z-icon"},[t._v("\ue042")]),t._v("\u64a4\u9500\u5220\u9664\n                ")]):t._e(),t._v(" "),n("span",{staticClass:"button",on:{click:t.save}},[n("i",{staticClass:"z-icon"},[t._v("\ue161")]),t._v("\u4fdd\u5b58\n                ")])]),t._v(" "),n("div",{staticClass:"z-12"},[n("div",{staticClass:"action"},[n("span",{staticClass:"z-icon",on:{click:t.close}},[t._v("\ue14c")])])])]),t._v(" "),t.item?n("div",{staticClass:"wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.item.title,expression:"item.title"}],staticClass:"title",attrs:{maxlength:"60",type:"text"},domProps:{value:t.item.title},on:{input:function(e){e.target.composing||t.$set(t.item,"title",e.target.value)}}}),t._v(" "),n("Describe",{attrs:{content:t.item.content}}),t._v(" "),n("div",{staticClass:"form"},[n("dl",{staticClass:"z-left"},[t._m(0),t._v(" "),n("dd",[n("Plan",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),t._v(" "),n("dl",{staticClass:"z-left"},[t._m(1),t._v(" "),n("dd",[n("Owner",{attrs:{nick:t.onwerNick},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}}),t._v(" "),t.showUserSearch?n("k-user-search",{attrs:{fixed:"true",my:"true"},model:{value:t.owner,callback:function(e){t.owner=e},expression:"owner"}}):t._e()],1)]),t._v(" "),t.quadrant?t._e():n("dl",{staticClass:"z-left"},[t._m(2),t._v(" "),n("dd",[n("Priority",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),t._v(" "),n("dl",{staticClass:"z-left",staticStyle:{width:"98%"}},[t._m(3),t._v(" "),n("dd",[n("Clock",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)])]),t._v(" "),n("Comment",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1):t._e(),t._v(" "),n("CommentPost",{attrs:{item:t.item}})],1)]):t._e()},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("i",{staticClass:"z-icon"},[t._v("\ue916")]),t._v("\u8ba1\u5212\u65e5\u671f\n                    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("i",{staticClass:"z-icon"},[t._v("\ue7fc")]),t._v("\u8d1f\u8d23\u4eba:")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",[n("i",{staticClass:"z-icon"},[t._v("\ue228")]),t._v("\u4f18\u5148\u7ea7")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dt",{staticStyle:{"line-height":"32px"}},[n("i",{staticClass:"z-icon"},[t._v("\ue190")]),t._v("\u63d0\u9192\u8bbe\u7f6e\n                    ")])}]};e.a=i},function(t,e,n){var i=n(31),a=n(117),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){function i(t){var e={id:t._id,title:t.title};return t.quadrant&&(e.color=a[t.quadrant]),t.start>0&&(e.start=moment.unix(t.start)),t.end>0&&(e.end=moment.unix(t.end),t.end-t.start>s&&(e.allDay=!0)),e}var a={a:"#f80e15",b:"#d9b403",c:"#009fe3",d:"#79AA1C"},s=86400;e.a={unixTime:function(t){var e=t._d.getTime();return parseInt(e/1e3)},convert:function(t){if(!Array.isArray(t))return i(t);for(var e=[],n=void 0,a=0;a<t.length;a++)n=i(t[a]),e.push(n);return e},getColor:function(t){return a[t]}}},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{margin:"20px"}},[n("div",{staticClass:"cal"}),t._v(" "),n("k-todo-add",{attrs:{value:t.eventData,visible:t.isShow,"is-cal":!0}})],1)},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(32),a=n(156),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(35),a=n(122),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(36),a=n(121),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tip"},[1===t.type?n("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u6587\u672c\u6587\u6863",expression:"'\u6587\u672c\u6587\u6863'"}],staticClass:"doc-txt"}):t._e(),t._v(" "),2===t.type?n("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u601d\u7ef4\u5bfc\u56fe",expression:"'\u601d\u7ef4\u5bfc\u56fe'"}],staticClass:"doc-mind"}):t._e(),t._v(" "),3===t.type?n("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u6d41\u7a0b\u56fe",expression:"'\u6d41\u7a0b\u56fe'"}],staticClass:"doc-graph"}):t._e(),t._v(" "),5===t.type?n("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u6d41\u7a0b\u56fe",expression:"'\u6d41\u7a0b\u56fe'"}],staticClass:"doc-graph"}):t._e(),t._v(" "),t.type?t._e():n("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u6b64\u6587\u6863\u5c1a\u672a\u521b\u5efa",expression:"'\u6b64\u6587\u6863\u5c1a\u672a\u521b\u5efa'"}],staticClass:"z-icon why"},[t._v("\ue8fd")])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.data,function(e){return n("div",{key:e.id,staticClass:"group"},[n("div",{staticClass:"guide",attrs:{"data-id":e.id}}),t._v(" "),n("div",{staticClass:"item",attrs:{"data-id":e.id}},[n("hr"),t._v(" "),"folder"===e.link?n("i",{staticClass:"folder z-icon",class:{hide:!1===e.status},on:{click:function(n){t.fold(e)}}}):t._e(),t._v(" "),n("div",{staticClass:"header"},[n("Icon",{attrs:{type:e.type||e.link}}),t._v(" "),n("div",{staticClass:"title",on:{click:function(n){t.view(e)}}},[t._v("\n                    "+t._s(e.title)+"\n                ")])],1),t._v(" "),t.readonly?n("div",{staticClass:"info"},[t._v("\n                "+t._s(t._f("idate")(e.link))+"\n            ")]):n("div",{staticClass:"info"},[n("i",{staticClass:"z-icon hover",attrs:{title:"\u4fee\u6539\u6807\u9898"},on:{click:function(n){t.change(e)}}},[t._v("\ue22b")]),t._v(" "),n("i",{staticClass:"z-icon hover",attrs:{title:"\u6dfb\u52a0\u5b50\u7ae0\u8282"},on:{click:function(n){t.trigger(e,"add")}}},[t._v("\ue145")]),t._v(" "),n("i",{staticClass:"z-icon hover",attrs:{title:"\u5220\u9664\u7ae0\u8282"},on:{click:function(n){t.trigger(e,"remove")}}},[t._v("\ue872")])])]),t._v(" "),!1!==e.status&&e.sons&&e.sons.length>0?n("Chapter",{key:"s"+e.id,attrs:{readonly:t.readonly,value:e.sons}}):t._e()],1)}),t._v(" "),n("z-modal",{attrs:{title:"\u4fee\u6539\u6807\u9898",visible:t.isEdit,model:!1,size:"small",close:t.toggle}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("dl",[n("dt",[t._v("\u6587\u6863\u6807\u9898")]),t._v(" "),n("dd",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",koo:"need"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"z-button close",on:{click:t.toggle}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button primary",on:{click:t.update}},[t._v("\u786e\u5b9a")])])])],2)},staticRenderFns:[]};e.a=i},function(t,e,n){e.a={set:function(){this.showSet=!0},remove:function(t,e,n){for(var i=void 0,a=void 0,s=0;s<e.length;s++){if((i=e[s]).id===t)return!n&&i.sons.length>0?(alert("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u5148\u5220\u9664\u5b50\u6587\u6863\u3002"),null):(a=e.splice(s,1))[0];if(i.sons&&i.sons.length>0&&(a=this.remove(t,i.sons,n)))return a}return null},addNode:function(){var t={title:"\u65b0\u589e\u6587\u6863",link:"",date:"",sons:[]};this.content.id++,t.id=this.content.id,this.content.sons.push(t),this.save(!0)},add:function(t,e,n,i){for(var a=void 0,s=0;s<e.length;s++){if((a=e[s]).id===t)return i?a.sons.unshift(n):e.splice(s,0,n),!0;if(a.sons&&a.sons.length>0&&this.add(t,a.sons,n,i))return!0}return!1},edit:function(t,e){for(var n=void 0,i=0;i<e.length;i++){if((n=e[i]).id===t.data){if("folder"===t.event)return n.status=!n.status,!1;if("edit"===t.event&&(n.link=t.link,"folder"===t.link&&(n.status=!0),n.title=t.title,n.uid=t.uid,t.type&&(n.type=t.type)),"title"===t.event){if(n.title===t.title)return!1;n.title=t.title}return!0}if(n.sons&&n.sons.length>0&&this.edit(t,n.sons))return!0}return!1},move:function(t){var e=this.remove(t.from,this.content.sons,!0),n=$.extend({},e,!1);return this.add(t.to,this.content.sons,n,t.isSon)},subscribe:function(t){var e=void 0,n=this.content;if("move"===t.event)return e=this.move(t),this.save(e);if("add"===t.event){var i={title:"\u65b0\u589e\u6587\u6863",link:"",date:"",sons:[]};return n.id++,i.id=n.id,t.data.sons.push(i),this.save(!0)}return"remove"===t.event?(e=this.remove(t.data.id,n.sons),this.save(e)):"save"===t.event?this.save(!0):"doc"===t.event?this.docId=t.data:"newDoc"===t.event?zen.vue.$emit("showAddDocBox",!0,t):(e=this.edit(t,n.sons),void this.save(e))},saveModel:function(){this.readonly=!0,this.$parent.save(!0,this.content,0)},cancel:function(){this.readonly=!0},editModel:function(){this.readonly=!1},changeTitle:function(t,e){this.data.title=$("input[name='title']",e.$el).val(),e.destory()},save:function(t){this.$parent.save(t,this.content)}}},function(t,e,n){var i=n(37),a=n(125),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("z-modal",{attrs:{title:"\u65b0\u5efa\u6587\u6863",visible:t.isShow,model:!1,size:"small",close:t.toggle}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("dl",[n("dt",[t._v("\u6587\u6863\u6807\u9898")]),t._v(" "),n("dd",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{keydown:function(e){return e.stopPropagation(),t.keydown(e)},input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),t._v(" "),n("dl",[n("dt",[t._v("\u6587\u6863\u7c7b\u578b")]),t._v(" "),n("dd",[n("z-radio",{attrs:{data:t.types},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"z-button close",on:{click:t.toggle}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button primary",on:{click:t.add}},[t._v("\u786e\u5b9a")])])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(38),a=n(150),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(39),a=n(134),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(40),a=n(131),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(3);e.a=function(t,e){var n=void 0,a=[].slice;return n=function(e){function n(){var t=void 0;t=1<=arguments.length?a.call(arguments,0):[],n.__super__.constructor.apply(this,t)}return i.a.extend(n,e),n.i18n={"zh-CN":{attach:"\u4e0a\u4f20\u9644\u4ef6"},"en-US":{attach:"upload attach"}},n.prototype.name="attach",n.prototype.icon="upload",n.prototype.command=function(e){var n=t("#J_uploadFile001"),i=t("input",n);n.trigger("click"),i.change(function(e){var n=void 0,i=t(e.currentTarget);(n=new FormData).append(i.fileKey,i.obj),n.append("original_filename",i.name),t.ajax({url:"",data:n,processData:!1,contentType:!1,crossDomain:!0,type:"POST",headers:{"X-File-Name":encodeURIComponent(i.name)},xhrFields:{withCredentials:!0},xhr:function(){var e;return(e=t.ajaxSettings.xhr())&&(e.upload.onprogress=function(t){return function(e){return t.progress(e)}}(this)),e},error:function(t){}})})},n}(e.Button),e.Toolbar.addButton(n),n}},function(t,e,n){var i=n(3);e.a=function(t,e,n){var a=void 0,s=[].slice;return a=function(t){function e(){var t=void 0;t=1<=arguments.length?s.call(arguments,0):[],e.__super__.constructor.apply(this,t)}return i.a.extend(e,t),e.i18n={"zh-CN":{attach:"Markdown\u6a21\u5f0f"},"en-US":{attach:"Markdown Mode"}},e.prototype.name="markdown",e.prototype.icon="markdown",e.prototype.command=function(t){n.isMD=!0,window.localStorage.editorMode="md"},e}(e.Button),e.Toolbar.addButton(a),a}},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.readonly,expression:"readonly"}],staticClass:"k-rich-content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"title"},[t._v(t._s(t.item.title))]),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.item.content)}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.readonly,expression:"!readonly"}],staticClass:"k-rich"},[n("textarea",{staticClass:"hide"},[t._v(t._s(t.item.content))]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"hide",attrs:{id:"J_uploadFile001"}},[n("input",{attrs:{type:"file"}})])}]};e.a=i},function(t,e,n){var i=n(41),a=n(133),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-md",attrs:{id:"J_md"}},[n("textarea",{staticClass:"hide"}),t._v(" "),n("label",{staticClass:"uploadImage hide"},[n("input",{attrs:{type:"file"},on:{change:t.selectFile}})])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isMD?n("MD",{attrs:{readonly:t.readonly,value:t.item,emitSave:t.emitSave}}):n("Rich",{attrs:{readonly:t.readonly,value:t.item,emitSave:t.emitSave}})],1)},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(42),a=n(145),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(43),a=n(138),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){e.a={queryNodeById:function(t,e){if(e.id===t)return e;var n=e.children,i=void 0;if(n&&n.length>0)for(var a=0;a<n.length;a++)if(i=this.queryNodeById(t,n[a]))return i;return null}}},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShow?n("div",{staticClass:"k-grap-editor",style:t.style,on:{click:t.click}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],domProps:{value:t.title},on:{keydown:t.keyup,blur:t.save,input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),n("div",{staticClass:"theme",style:{background:t.color},on:{click:t.colorClick}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isColor,expression:"isColor"}],staticClass:"colors"},t._l(t.colors,function(e,i){return n("span",{key:i,class:{active:e===t.color},style:{background:e},on:{click:function(n){t.select(e)}}})}))]):t._e()},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(44),a=n(140),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbar"},[t._m(0),t._v(" "),n("div",{staticClass:"tools"},[n("div",{staticClass:"attr"},[t._v("\n            "+t._s(t.grapType[t.grap])+"\n            "),n("div",[n("span",{on:{click:function(e){t.choseGrapType("1")}}},[t._v(t._s(t.grapType[1]))]),t._v(" "),n("span",{on:{click:function(e){t.choseGrapType("3")}}},[t._v(t._s(t.grapType[3]))]),t._v(" "),n("span",{on:{click:function(e){t.choseGrapType("2")}}},[t._v(t._s(t.grapType[2]))]),t._v(" "),n("span",{on:{click:function(e){t.choseGrapType("4")}}},[t._v(t._s(t.grapType[4]))]),t._v(" "),n("span",{on:{click:function(e){t.choseGrapType("5")}}},[t._v(t._s(t.grapType[5]))]),t._v(" "),n("span",{on:{click:function(e){t.choseGrapType("6")}}},[t._v(t._s(t.grapType[6]))])])]),t._v(" "),n("div",{staticClass:"attr"},[t._v("\n            "+t._s(t.lineType[t.line])+"\n            "),n("div",[n("span",{on:{click:function(e){t.choseLineType("1")}}},[t._v(t._s(t.lineType[1]))]),t._v(" "),n("span",{on:{click:function(e){t.choseLineType("2")}}},[t._v(t._s(t.lineType[2]))])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"handle"},[n("i",{staticClass:"z-icon"},[t._v("\ue25d")])])}]};e.a=i},function(t,e,n){var i=n(142);e.a={context:null,init:function(t){this.context=t},on:function(t,e){if("addNode"===t)return i.a.add(e,this.context);"removeNode"===t&&i.a.remove(this.context),"nodeEvent"===t&&this.nodeEvent(e)},nodeEvent:function(t){var e=this.context,n=t.target,i=t.type,a=n.id;if(a&&(!e.readonly||"click"!==i&&"dblclick"!==i)){if("click"===i){if(e.current){if(e.current.id===a)return;e.current.attr({"stroke-width":1,"fill-opacity":.15})}return e.current=n}if("mouseover"===i)return e.current=n,e.emitTool(!0),n.attr({"stroke-width":2,"fill-opacity":.1});if("mouseout"===i)return n.attr({"stroke-width":1,"fill-opacity":.15});if("dblclick"===i){if(!n.id)return;return e.current=n,e.emitEditor(!0)}}},keydown:function(t,e){var n=this.context;if(null!==n.current&&!n.readonly){var a=!0;13===t&&(e.ctrlKey||e.metaKey)&&(a=!1),9===t&&(a=!1),i.a.add(a,n)}},keyboard:function(){var t=this;zen.vue.$on("mindEvt",function(e,n){t.on(e,n)}),$(window).click(function(e){return t.context.emitTool(!1),t.context.emitEditor(!1)}),$(window).keydown(function(e){var n=e.keyCode;13!==n&&9!==n||(e.preventDefault(),e.stopPropagation(),t.keydown(n,e))})}}},function(t,e,n){function i(t,e,n,a){for(var s=void 0,o=0;o<n.children.length;o++){if((s=n.children[o]).id===t)return a?(s.children||(s.children=[]),s.children.push(e)):n.children.splice(o,0,e),!0;if(s.children&&s.children.length>0&&i(t,e,s,a))return!0}return!1}function a(t,e){for(var n=void 0,i=0;i<e.children.length;i++){if((n=e.children[i]).id===t)return n.children.length>0?(alert("\u8bf7\u5148\u5220\u9664\u5b50\u8282\u70b9"),!1):(e.children.splice(i,1),!0);if(n.children&&n.children.length>0&&a(t,n))return!0}return!1}e.a={context:null,add:function(t,e){var n=e.current;if(n){var a=n.id,s={y:0,x:0,top:0,children:[],name:"\u65b0\u5efa\u8282\u70b9",color:null},o=e.data,r=o.ids++;s.id="i"+r,"root"===a?o.children.push(s):i(a,s,o,t),e.save()}},remove:function(t){var e=t.current;if(e){var n=e.id;"root"!==n&&a(n,t.data)&&(t.current=null,t.save())}}}},function(t,e,n){var i=n(45),a=n(144),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tool",style:t.style},[t.readonly?t._e():n("span",{staticClass:"z-icon",attrs:{title:"\u6dfb\u52a0"},on:{click:t.add}},[t._v("\ue145")]),t._v(" "),t.readonly?t._e():n("span",{staticClass:"z-icon",attrs:{title:"\u7f16\u8f91"},on:{click:t.edit}},[t._v("\ue3c9")]),t._v(" "),t.readonly?t._e():n("span",{staticClass:"z-icon",attrs:{title:"\u5220\u9664"},on:{click:t.remove}},[t._v("\ue92b")])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"z-mind",attrs:{tabindex:"-1"}},[n("Sidebar",{class:{show:!t.readonly},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),t._v(" "),n("div",{staticClass:"k-mind-map",on:{contextmenu:function(e){return t.right(e)}}},[n("Editor"),t._v(" "),n("Tool")],1)],1)},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(46),a=n(147),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this;t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-graph"},[n("iframe",{attrs:{id:"J_graphIframe",src:"/doc/flow.html"}})])}]};e.a=i},function(t,e,n){var i=n(47),a=n(149),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.value,function(e){return n("div",{key:"nav"+e.id,staticClass:"chapter"},[n("div",{staticClass:"item",class:{active:e.link===t.current},on:{click:function(n){t.selected(e)}}},[t._v("\n            "+t._s(e.title)+"\n        ")]),t._v(" "),e.sons&&e.sons.length>0?n("Nav",{attrs:{current:t.current,value:e.sons}}):t._e()],1)}))},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShow?n("div",{staticClass:"k-doc-board"},[n("dl",{staticClass:"rep-nav z-left"},[n("dt",{staticClass:"active",on:{click:t.close}},[n("i",{staticClass:"z-icon"},[t._v("\ue5d9")])]),t._v(" "),n("dt",{directives:[{name:"tip",rawName:"v-tip",value:"\u6587\u5e93\u76ee\u5f55",expression:"'\u6587\u5e93\u76ee\u5f55'"}],on:{click:t.nav}},[n("i",{staticClass:"z-icon"},[t._v("\ue8fe")])]),t._v(" "),n("dt",{directives:[{name:"show",rawName:"v-show",value:!t.readonly,expression:"!readonly"},{name:"tip",rawName:"v-tip",value:"\u4fdd\u5b58\u6587\u6863",expression:"'\u4fdd\u5b58\u6587\u6863'"}],on:{click:t.saved}},[n("i",{staticClass:"z-icon"},[t._v("\ue161")])]),t._v(" "),n("dt",{directives:[{name:"tip",rawName:"v-tip",value:"\u9605\u8bfb\u6a21\u5f0f",expression:"'\u9605\u8bfb\u6a21\u5f0f'"}]},[n("a",{attrs:{href:"/view.html?id="+t.itemId,target:"_blank"}},[n("i",{staticClass:"z-icon"},[t._v("\ue8f4")])])]),t._v(" "),n("dd",{staticClass:"z-noselect"},[t._v("\n            "+t._s(t.tooltip)+"\n        ")])]),t._v(" "),n("div",{staticClass:"success"},[t._v(t._s(t.tipMsg))]),t._v(" "),n(t.name,{tag:"component",attrs:{readonly:t.readonly,emitSave:t.emitSave},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),n("div",{staticClass:"doc-nav",class:{show:t.showNav}},[n("i",{directives:[{name:"show",rawName:"v-show",value:t.showNav,expression:"showNav"}],staticClass:"z-icon close hover",on:{click:t.nav}},[t._v("\ue14c")]),t._v(" "),n("Nav",{attrs:{value:t.nodes,current:t.itemId}})],1)],1):t._e()},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(48),a=n(152),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-repository-set"},[n("div",{staticClass:"modal"},[n("h4",[t._v("\u77e5\u8bc6\u5e93\u6743\u9650\u8bbe\u7f6e")]),t._v(" "),n("i",{staticClass:"close z-icon hover",on:{click:t.close}},[t._v("\ue14c")]),t._v(" "),n("div",{staticClass:"z-row"},[n("div",{staticClass:"z-6"},[t._v("\u6587\u5e93\u7c7b\u578b")]),t._v(" "),n("div",{staticClass:"z-18"},[n("z-radio",{model:{value:t.def,callback:function(e){t.def=e},expression:"def"}},[n("var",{attrs:{value:"1"}},[t._v("\u79c1\u6709\u6587\u5e93")]),t._v(" "),n("var",{attrs:{value:"3"}},[t._v("\u540c\u4e8b\u5f00\u653e")]),t._v(" "),n("var",{attrs:{value:"2"}},[t._v("\u5b8c\u5168\u5f00\u653e")])])],1)]),t._v(" "),"1"===t.def?n("div",{staticClass:"z-row"},[n("div",{staticClass:"z-6"},[t._v("\u6587\u5e93\u6210\u5458")]),t._v(" "),n("div",{staticClass:"z-18"},[n("div",{staticClass:"add"},[n("em",{staticClass:"z-button small primary",on:{click:t.showSearch}},[t._v("\u6dfb\u52a0\u7528\u6237")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.searchTag,expression:"searchTag"}],staticClass:"search"},[n("k-user-search",{model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}),t._v(" "),n("div",{staticClass:"action"},[n("span",{staticClass:"z-button small",on:{click:t.cancel}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button small primary",on:{click:t.select}},[t._v("\u786e\u5b9a")])])],1),t._v(" "),t._l(t.users,function(e){return n("div",{key:e._id,staticClass:"user"},[n("z-avator",{attrs:{uid:e._id}}),t._v(" "),n("strong",[t._v(t._s(e.nick))]),t._v(" "),n("span",{staticClass:"z-icon hover",on:{click:function(n){t.remove(e)}}},[t._v("\ue5c9")])],1)})],2)]):t._e()])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"k-repository"},[n("div",{staticClass:"z-row"},[n("div",{staticClass:"z-12 h3"},[t._v("\n                "+t._s(t.chapterData.title)+"\n            ")]),t._v(" "),n("div",{staticClass:"z-12",staticStyle:{"text-align":"right"}},[n("a",{staticClass:"z-button",attrs:{target:"_blank",href:"/view.html?id="+t.chapterData._id}},[t._v("\u67e5\u770b")]),t._v(" "),t.pid?t._e():n("span",{staticClass:"z-button",on:{click:t.set}},[t._v("\u8bbe\u7f6e")]),t._v(" "),n("z-form",{staticClass:"z-button",attrs:{target:"/note/patch.do",prop:t.chapterData,size:"small",view:"J_title",callback:t.changeTitle}},[t._v("\u4fee\u6539\u6807\u9898\n                ")]),t._v(" "),n("span",{staticClass:"z-button primary",on:{click:t.addNode}},[t._v("\u65b0\u589e\u7ae0\u8282")])],1)]),t._v(" "),n("Chapter",{key:"root",attrs:{value:t.content.sons,readonly:t.readonly}})],1),t._v(" "),n("AddDoc",{attrs:{parent:t.chapterData._id}}),t._v(" "),n("Board",{attrs:{itemId:t.docId,nodes:t.content.sons}}),t._v(" "),t.showSet?n("Set",{attrs:{permision:t.chapterData.permision,note:t.chapterData._id}}):t._e()],1)},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(49),a=n(155),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[t._l(t.data,function(e,i){return n("div",{key:e._id,staticClass:"doc-item",class:{active:t.current===e._id},on:{click:function(n){t.select(e,n)}}},[t._v(t._s(e.title)),n("span",[t._v("\n            "+t._s(t._f("idate")(e._id))+"\n            "),n("z-execute",{staticClass:"z-icon hover",attrs:{tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",target:"/note/remove.do?_id="+e._source,destory:{index:i,parent:t.data}}},[t._v("\ue5c9")])],1)])}),t._v(" "),t.total>10?n("z-pager",{attrs:{type:"simple",total:t.list.total,target:"list"}}):t._e()],2)},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-doc z-row"},[n("div",{staticClass:"z-4"},[n("h3",[t._v("\u6211\u7684\u77e5\u8bc6\u5e93\n            "),n("z-form",{staticClass:"new",attrs:{size:"small",view:"J_new",target:"/note/add.do",title:"\u65b0\u5efa\u77e5\u8bc6\u5e93"}},[n("i",{staticClass:"z-icon hover"},[t._v("\ue145")])])],1),t._v(" "),n("Tree")],1),t._v(" "),n("div",{staticClass:"z-20"},[t.content?n("Editor",{attrs:{data:t.chapterData,summary:t.content}}):t._e()],1)])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(50),a=n(158),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("i",{staticClass:"z-icon search-icon hover",on:{click:t.click}},[t._v("\ue8b6")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"search-dialog"})])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(51),a=n(164),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(52),a=n(161),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[t._m(0),t._v(" "),n("td",{key:"scale",class:{weekend:t.start.isWeekend,month:t.start.isFirst}},[t._v(t._s(t.start.text)+"\n    ")]),t._v(" "),t._l(t.data,function(e,i){return n("td",{key:"scale"+i,class:{weekend:e.isWeekend,month:e.isFirst}},[t._v(t._s(e.text)+"\n    ")])})],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("span",[t._v("\u6240\u6709\u4e8b\u9879")])])}]};e.a=i},function(t,e,n){var i=n(53),a=n(163),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{class:{empty:0===t.data.start}},[n("th",[n("div",{staticClass:"thing"},[t._v(t._s(t.data.title))])]),t._v(" "),n("td",{key:"thing"+t.data._id,class:{weekend:t.start.isWeekend},attrs:{date:t.start.date}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.data.start>0,expression:"data.start>0"},{name:"tip",rawName:"v-tip",value:"\u65f6\u95f4\u63d0\u793a",expression:"'\u65f6\u95f4\u63d0\u793a'"}],class:"scale "+t.data.quadrant,style:t.css,on:{mousedown:t.mousedown,dblclick:t.show}})]),t._v(" "),t._l(t.scales,function(e,i){return n("td",{key:"thing"+t.data._id+i,class:{weekend:e.isWeekend},on:{click:function(e){t.addDate(i)}}})})],2)},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"z-1"},[n("div",{staticClass:"z-row header"},[n("div",{staticClass:"z-20"},[t._v("\u76d8\u53e4\u9879\u76ee\u7518\u7279\u56fe"),n("i",{staticClass:"z-icon add",on:{click:t.add}},[t._v("\ue148")])]),t._v(" "),n("div",{staticClass:"z-4",on:{click:t.startPosition}},[t._v(t._s(t.now.date)),n("i",{staticClass:"z-icon hover"},[t._v("\ue0c8")])])]),t._v(" "),n("div",{staticClass:"table-fixed"},[n("span",{staticClass:"z-icon prev"},[t._v("\ue408")]),t._v(" "),n("span",{staticClass:"z-icon next"},[t._v("\ue409")]),t._v(" "),n("div",{staticClass:"wrap",attrs:{id:"J_wrap"}},[n("table",[n("thead",[n("Scale",{attrs:{data:t.scales,start:t.start}})],1),t._v(" "),n("tbody",t._l(t.things,function(e,i){return n("Thing",{key:e._id,attrs:{time:t.time,start:t.start,scales:t.scales},model:{value:t.things[i],callback:function(e){t.$set(t.things,i,e)},expression:"things[idx]"}})}))])])]),t._v(" "),n("k-todo-add",{attrs:{visible:t.isShow}})],1)},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(54),a=n(166),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("z-modal",{attrs:{title:"\u6dfb\u52a0\u5f85\u529e",visible:t.visible,all:"true",size:"small",model:!1,close:t.close}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{placeholder:"\u8bf7\u8f93\u5165\u5f85\u529e\u5185\u5bb9",maxlength:"60"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),n("div",{staticClass:"k-cal-add"},[n("div",{staticClass:"config-item"},[n("div",[n("i",{staticClass:"z-icon"},[t._v("\ue228")]),t._v("\u4f18\u5148\u7ea7:")]),t._v(" "),n("div",{staticStyle:{margin:"0 10px"}},[n("Priority",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),t._v(" "),t.isCal?t._e():n("div",{staticClass:"config-item"},[n("div",[n("i",{staticClass:"z-icon"},[t._v("\ue7fc")]),t._v("\u8d1f\u8d23\u4eba:")]),t._v(" "),n("div",{staticStyle:{margin:"0 10px"}},[n("div",{staticClass:"user-info",on:{click:t.show}},[t._v("\n                        "+t._s(t.user.nick)+"\n                    ")]),t._v(" "),t.isShow?n("k-user-search",{attrs:{fixed:"true",my:"true"},on:{blur:t.blur},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}):t._e()],1)])])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"z-button",on:{click:t.close}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button primary",on:{click:t.submit}},[t._v("\u786e\u5b9a")])])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(55),a=n(168),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.login}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isDD&&t.timer,expression:"isDD&&timer"}],staticStyle:{width:"150px",margin:"20px auto"}},[t.checkId?n("input",{attrs:{type:"hidden",id:"J_qrId"},domProps:{value:t.checkId}}):t._e(),t._v(" "),n("div",{staticClass:"qr"})]),t._v(" "),n("div",{staticClass:"z-link"},[t._t("default")],2)])},staticRenderFns:[]};e.a=i},function(t,e,n){function i(t,e){var n=t.localStorage.config;if(n&&(zen.user=JSON.parse(n),zen.user.id))return e(zen.user);zen.http(null,"/system/my.do",function(n){var i=n.data,a={id:i._id,nick:i.nick,username:i.username,home:i.home,skin:i.skin,isLocal:i.isLocal,mode:i.mode,calendar:i.calendar};zen.user=a,t.localStorage.config=JSON.stringify(a),e(a)})}function a(t){$(document).ready(function(){if(t.skin){var e="url('//a.yimiyisu.com/kooteam/bg/"+t.skin+".jpg')";$("body").css("background-image",e)}var n=$("#J_navbar"),i="active";$("h2",n).click(function(){zen.goto(zen.user.home)}),$("a",n).click(function(t){var e=$(t.currentTarget).parent();"DD"===e[0].tagName&&(e.hasClass(i)||($("."+i,n).removeClass(i),e.addClass(i)))})})}e.a=function(){var t=window,e=t.location.pathname;"/"===e||e.indexOf(".html")>-1||i(t,function(t){a(t)})}},function(t,e,n){var i=n(56),a=n(171),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"z-1",staticStyle:{background:"#fff"}},[t.isLoad?n("Editor",{attrs:{pid:t.id,data:t.data,summary:t.content}}):t._e()],1)},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(57),a=n(181),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(58),a=n(177),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(59),a=n(176),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){e.a=[{key:"a",title:"\u91cd\u8981\u4e14\u7d27\u6025"},{key:"b",title:"\u91cd\u8981\u4e0d\u7d27\u6025"},{key:"c",title:"\u7d27\u6025\u4e0d\u91cd\u8981"},{key:"d",title:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025"}]},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-board-add"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",maxlength:"60",placeholder:"\u8bf7\u8f93\u5165\u8981\u5904\u7406\u7684\u4efb\u52a1"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),n("div",{staticClass:"owner"},[t._v("\u8d1f\u8d23\u4eba\uff1a\n        "),n("div",{staticClass:"avator",on:{click:function(e){return e.stopPropagation(),t.userShow(e)}}},[n("z-avator",{attrs:{uid:t.uid}}),t._v(" "),n("span",[t._v(t._s(t.nick))])],1),t._v(" "),t.isShow?n("k-user-search",{attrs:{my:"true"},on:{blur:t.userBlur},model:{value:t.owner,callback:function(e){t.owner=e},expression:"owner"}}):t._e()],1),t._v(" "),n("div",{staticClass:"prority"},[n("span",{staticClass:"title"},[t._v("\u4f18\u5148\u7ea7\uff1a")]),t._v(" "),t._l(t.prorityData,function(e){return n("label",{class:"k-prority "+e.key,on:{click:function(n){t.select(e,n)}}})})],2),t._v(" "),n("div",{staticClass:"btns"},[n("span",{staticClass:"z-button small",on:{click:t.close}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button small primary",on:{click:t.save}},[t._v("\u4fdd\u5b58")])])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column",attrs:{"data-id":t.things.tag}},[n("div",{staticClass:"header"},[t.isAddThing?n("AddThing",{attrs:{data:t.things}}):t._e(),t._v(" "),n("div",{staticClass:"h4"},[t.isEdit?n("input",{attrs:{maxlength:"10",type:"text"},domProps:{value:t.things.title},on:{blur:t.rename,keyup:t.keyup}}):n("div",[t._v("\n                "+t._s(t.things.title)+"\n                "),n("i",{staticClass:"z-icon hover plus",on:{click:t.add}},[t._v("\ue148")])]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!isEdit"}],staticClass:"z-icon hover do",on:{click:t.focus}},[t._v("\ue313")]),t._v(" "),t.showAction?n("div",{staticClass:"action",attrs:{tabindex:"-1"},on:{blur:t.blur}},[n("span",{on:{click:t.renameClk}},[t._v("\u91cd\u547d\u540d")]),t._v(" "),n("span",{on:{click:t.remove}},[t._v("\u5220\u9664")])]):t._e()])],1),t._v(" "),n("div",{staticClass:"things",attrs:{"data-id":t.things.tag}},[t._l(t.things.sons,function(e){return n("Thing",{key:e._id,attrs:{data:e,now:t.now,drag:"board"}})}),t._v(" "),t.things.sons&&0!==t.things.sons.length?t._e():n("div",{staticClass:"empty"},[t._v("\u6682\u65e0\u5f85\u529e\u4e8b\u9879")])],2)])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(60),a=n(179),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add"},[n("div",{staticClass:"wrap"},[t.isEdit?n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{maxlength:"12",type:"text"},domProps:{value:t.title},on:{keyup:t.keyup,input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),n("div",{staticClass:"btn"},[n("span",{staticClass:"z-button",on:{click:t.cancel}},[t._v("\u53d6\u6d88")]),t._v(" "),n("span",{staticClass:"z-button primary",on:{click:t.save}},[t._v("\u4fdd\u5b58")])])]):n("div",{staticClass:"tip",on:{click:t.focus}},[n("i",{staticClass:"z-icon"},[t._v("\ue145")]),t._v("\u65b0\u5efa\u4efb\u52a1")])])])},staticRenderFns:[]};e.a=i},function(t,e,n){e.a=[{title:"\u4ea7\u54c1\u89c4\u5212",tag:"t1",sons:[]},{title:"\u524d\u7aef\u5f00\u53d1",tag:"t2",sons:[]},{title:"\u540e\u7aef\u5f00\u53d1",tag:"t3",sons:[]},{title:"\u6d4b\u8bd5",tag:"t4",sons:[]},{title:"\u53d1\u5e03",tag:"t5",sons:[]},{title:"\u5176\u5b83",tag:"t6",sons:[]}]},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"z-1"},[n("div",{staticClass:"k-board-detail",on:{click:t.hideUserSearch}},[t._l(t.columns,function(e){return n("Column",{key:e.tag+t.projectId,attrs:{now:t.now,data:e}})}),t._v(" "),n("Add")],2)])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(61),a=n(183),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"k-user-search z-form",class:{fixed:t.fixed},on:{click:function(e){return e.stopPropagation(),t.stop(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{placeholder:"\u8f93\u5165\u6635\u79f0\u5173\u952e\u5b57\u641c\u7d22",type:"text"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),n("div",[t._l(t.users,function(e){return n("label",{key:e.uid,staticClass:"item",on:{click:function(n){t.select(e,n)}}},[n("z-avator",{attrs:{uid:e.uid}}),t._v(" "),n("div",[t._v(t._s(e.nick))])],1)}),t._v(" "),t.name?n("input",{attrs:{name:t.name,type:"hidden"},domProps:{value:t.uid}}):t._e()],2),t._v(" "),t.localApp&&t.loaded&&0===t.users.length?n("div",{staticStyle:{"text-align":"center"}},[n("div",[t._v("\u6ca1\u6709\u641c\u7d22\u5230\u76f8\u5173\u597d\u53cb\uff0c\u53ef\u4ee5\u7528\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801\u6dfb\u52a0\u597d\u53cb")]),t._v(" "),n("img",{attrs:{width:"180",src:"//a.yimiyisu.com/kooteam/friend.png"}})]):t._e()])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(62),a=n(195),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(63),a=n(186),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[t._l(t.imgs,function(e){return n("div",{staticClass:"skin",class:{active:e===t.def},on:{click:function(n){t.select(e)}}},[n("img",{attrs:{src:"//a.yimiyisu.com/kooteam/bg/"+e+".jpg"}})])}),t._v(" "),n("input",{attrs:{type:"hidden",name:"skin"},domProps:{value:t.def}})],2)},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(64),a=n(188),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\u6b63\u5728\u9000\u51fa\uff0c\u8bf7\u7a0d\u7b49...")])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(65),a=n(190),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},t._l(t.value,function(e){return n("Thing",{key:e._id,attrs:{now:t.now,data:e}})}))},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(66),a=n(192),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("z-submit",{staticClass:"z-button primary",attrs:{target:"/patch/user.json",callback:t.save}},[t._v("\u4fdd\u5b58")])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(67),a=n(194),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",{attrs:{"data-href":"/system/theme.htm"},on:{click:t.jump}},[n("i",{staticClass:"z-icon"},[t._v("\ue886")]),t._v("\u504f\u597d\u8bbe\u7f6e")]),t._v(" "),n("li",{attrs:{"data-href":"/system/todo.htm"},on:{click:t.jump}},[n("i",{staticClass:"z-icon"},[t._v("\ue614")]),t._v("\u6211\u521b\u5efa\u7684\u4efb\u52a1")]),t._v(" "),n("li",{attrs:{"data-href":"/system/finish.htm"},on:{click:t.jump}},[n("i",{staticClass:"z-icon"},[t._v("\ue862")]),t._v("\u5df2\u5b8c\u6210\u5f85\u529e")]),t._v(" "),n("li",{attrs:{"data-href":"/system/project.htm"},on:{click:t.jump}},[n("i",{staticClass:"z-icon"},[t._v("\ue01d")]),t._v("\u6211\u7684\u6536\u85cf")]),t._v(" "),n("li",{attrs:{"data-href":"/system/profile.htm"},on:{click:t.jump}},[n("i",{staticClass:"z-icon"},[t._v("\ue7fd")]),t._v("\u4e2a\u4eba\u8d44\u6599")]),t._v(" "),t.mode>2?n("li",{attrs:{"data-href":"/system/password.htm"},on:{click:t.jump}},[n("i",{staticClass:"z-icon"},[t._v("\ue897")]),t._v("\u8d26\u53f7\u5bc6\u7801")]):t._e(),t._v(" "),t.isRoot?n("li",{attrs:{"data-href":"/system/home.htm"},on:{click:t.jump}},[n("i",{staticClass:"z-icon"},[t._v("\ue8b8")]),t._v("\u7cfb\u7edf\u8bbe\u7f6e")]):t._e()])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.name,{tag:"component",attrs:{value:t.value}})},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(68),a=n(199),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(69),a=n(198),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{on:{click:t.click}},[n("li",[n("z-execute",{attrs:{target:"/project/favi.do?projectId="+t.id}},[t._v("\u6536\u85cf")])],1),t._v(" "),t.isOnwer?n("li",[n("z-form",{attrs:{view:"J_trans",size:"small",prop:t.id,target:"/project/trans.do",title:"\u8bf7\u9009\u62e9\u7528\u6237"}},[t._v("\u8f6c\u4ea4\u9879\u76ee")])],1):t._e(),t._v(" "),t.isOnwer?n("li",[n("z-execute",{attrs:{tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",target:"/project/remove.do?_id="+t.id}},[t._v("\u5220\u9664")])],1):t._e(),t._v(" "),t.isOnwer?t._e():n("li",[n("z-execute",{attrs:{target:"/project/quit.do?projectId="+t.id}},[t._v("\u9000\u51fa")])],1)])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.name,{tag:"component",attrs:{value:t.value}})},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(70),a=n(205),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(71),a=n(202),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\u9489\u9489\u767b\u5f55")])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(72),a=n(204),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.name,{tag:"component",attrs:{value:t.value}})},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(73),a=n(211),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i=n(74),a=n(208),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"z-form"},[n("dl",[n("dt",[t._v("\u7528\u6237\u540d")]),t._v(" "),n("dd",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"user"}],attrs:{type:"text"},domProps:{value:t.user},on:{input:function(e){e.target.composing||(t.user=e.target.value)}}})])]),t._v(" "),n("dl",[n("dt",[t._v("\u5bc6\u7801")]),t._v(" "),n("dd",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],attrs:{type:"password"},domProps:{value:t.pwd},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submit(e):null},input:function(e){e.target.composing||(t.pwd=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"action"},[n("span",{staticClass:"z-button primary",on:{click:t.submit}},[t._v("\u63d0\u4ea4")])])])},staticRenderFns:[]};e.a=i},function(t,e,n){var i=n(75),a=n(210),s=n(0)(i.a,a.a,!1,null,null,null);e.a=s.exports},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["dd"===t.value.qr?n("div",[t._v("\u8bf7\u7528\u9489\u9489\u626b\u7801\u4e8c\u7ef4\u7801")]):t._e(),t._v(" "),"wechat"===t.value.qr?n("div",[t._v("\u8bf7\u7528\u4f01\u4e1a\u5fae\u4fe1\u626b\u7801\u4e8c\u7ef4\u7801")]):t._e(),t._v(" "),n("div",{staticClass:"qr"})])},staticRenderFns:[]};e.a=i},function(t,e,n){var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.check?t._e():n("div",{staticClass:"k-login"},[t.isQr?n("QR",{model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e(),t._v(" "),t.isQr?t._e():n("Password",{attrs:{target:t.target},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}),t._v(" "),t.isQr?n("span",{staticClass:"z-red hover",on:{click:t.change}},[t._v("\u5207\u6362\u5230\u8d26\u6237\u767b\u9646")]):t._e(),t._v(" "),!t.isQr&&t.hasQr?n("span",{staticClass:"z-red hover",on:{click:t.change}},[t._v("\u5207\u6362\u5230\u626b\u7801\u767b\u9646")]):t._e()],1)},staticRenderFns:[]};e.a=i}]);