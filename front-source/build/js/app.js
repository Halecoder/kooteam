!function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)e.d(n,a,function(e){return t[e]}.bind(null,a));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,i){"use strict";function n(t,e,i,n,a,s,o,r){var l="function"==typeof t?t.options:t;e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId="data-v-"+s);var c;if(o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):a&&(c=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";e.a={cavasSize:18e3,elHeight:32,elSpaceHeight:32,elUPSpace:50,hideStyle:"left:-300px;top:-300px"}},function(t,e,i){"use strict";e.a=["#56baff","#d6337d","#62B0FF","#cf0606","#ff7a7a","#764df8","#6bc859","#9a7aff","#388bdd","#ffca65","#e17aff","#7B8F18"]},function(t,e,i){"use strict";function n(t,e){var i="t_"+e.id,n=t.getById(i);return n?n.attr({text:e.name}):(n=t.text(-200,-200,e.name).attr(d).attr("id",i)).id=i,n.getBBox().width+20}function a(t,e,i){if(i?(t.x=e.x-p-t.width,t.left=i):(t.x=e.x+p+e.width,t.left=i),t.color||(t.color=e.color),e.top||(e.top=e.y-e.height/2),t.y=e.top+t.height/2,"root"===e.id){var n=e.grapType,s=e.children.length;1===n?s>2&&(i&&(s+=1),t.y=t.y-(Math.floor(s/2)-1)*c.a.elSpaceHeight/2):2!==n&&3!==n||(t.y=t.y-(s-1)*c.a.elSpaceHeight/2)}if(e.top+=t.height+c.a.elSpaceHeight,!t.children||0===t.children.length)return t;for(var o=0;o<t.children.length;o++)t.children[o]=a(t.children[o],t,i);return t}function s(t,e,i,n,a){var o,r,l,d;i?(o=e.x,l=t.x+t.width):(o=e.x+e.width,l=t.x),r=e.y+c.a.elHeight/2,d=t.y+c.a.elHeight/2;var u;if(1===a&&(u=v.pathZ(o,r,l,d,i)),2===a&&(u=v.pathC(o,r,l,d,i,p)),n.mindLine(t.id,u),t.children)for(var h=0;h<t.children.length;h++)s(t.children[h],t,i,n,a)}function o(t,e,i){if(t.y=i?e.y-c.a.elHeight-m:e.y+c.a.elHeight+m,t.color||(t.color=e.color),e.top||(e.widthCount>e.childWidthCount?e.top=e.x+e.width/2-e.childWidthCount/2:e.top=e.x+e.width/2-e.widthCount/2),t.x=e.top+t.widthCount/2-t.width/2,"root"===e.id){var n=e.grapType,a=e.children.length;"4"===n?a>2&&(i&&(a+=1),t.x=t.x-(Math.floor(a/2)-1)*c.a.elUPSpace/2):"5"!==n&&"6"!==n||(t.x=t.x-(a-1)*c.a.elUPSpace/2)}if(e.top+=t.widthCount+c.a.elUPSpace,!t.children||0===t.children.length)return t;for(var s=0;s<t.children.length;s++)t.children[s]=o(t.children[s],t,i);return t}function r(t,e,i,n,a){var s,o,l,d;s=e.x+e.width/2,l=t.x+t.width/2,i?(o=e.y,d=t.y+c.a.elHeight):(o=e.y+c.a.elHeight,d=t.y);var u;if(u=v.pathZType2(s,o,l,d,i),1===a?u=v.pathZType2(s,o,l,d,i):2===a&&(u=v.pathCType2(s,o,l,d,i,c.a.elUPSpace)),n.mindLine(t.id,u),t.children)for(var h=0;h<t.children.length;h++)r(t.children[h],t,i,n,a)}function l(t,e,i){var n=e.children;if(n&&n.length>0)for(var a=0;a<n.length;a++)l(t,n[a],i);t.mindNode(e,i,t)}var c=i(1),d={fill:"#000","font-size":13},u={height:function(t,e){var i,a,s=0;if(e.children||(e.children=[]),0===e.children.length)s=c.a.elHeight;else{a=e.children.length;for(var o=0;o<e.children.length;o++)(i=e.children[o]).children?s+=(i=this.height(t,i)).height:(s+=c.a.elHeight,i.top=0,i.height=c.a.elHeight,i.width=n(t,i));s+=(a-1)*c.a.elSpaceHeight}return e.top=0,e.height=s,e.width=n(t,e),e},width:function(t,e){var i,a,s=0,o=0;if(e.children||(e.children=[]),0===e.children.length)s=n(t,e),o+=s;else{a=e.children.length;for(var r=0;r<a;r++)(i=e.children[r]).children?o+=(i=this.width(t,i)).widthCount:(i.top=0,i.width=n(t,i),o+=i.widthCount);o+=(a-1)*c.a.elUPSpace,s=n(t,e)}return e.top=0,e.height=c.a.elHeight,e.width=s,e.childWidthCount=o,e.widthCount=o>s?o:s,e}},h=i(2),v={pathZ:function(t,e,i,n,a){var s,o,r;return a?(s=t-8,o=t-16):(s=t+8,o=t+16),r=e>n?n+8:e<n?n-8:n,"M"+t+","+e+" L"+s+","+e+" L"+s+","+r+" C"+s+","+n+" "+s+","+n+" "+o+","+n+" L"+i+","+n},pathC:function(t,e,i,n,a,s){var o,r,l,c;return a?(o=t-.3*s,l=i+.4*s):(o=t+.4*s,l=i-.3*s),r=e,c=n,"M"+t+","+e+" C"+o+","+r+" "+l+","+c+" "+i+","+n},pathZType2:function(t,e,i,n,a){var s,o,r;return a?(s=e-8,o=e-16):(s=e+8,o=e+16),r=t>i?i+8:t<i?i-8:i,"M"+t+","+e+" L"+t+","+s+" L"+r+","+s+" C"+i+","+s+" "+i+","+s+" "+i+","+o+" L"+i+","+n},pathCType2:function(t,e,i,n,a,s){var o,r,l,c;return a?(r=e-.3*s,c=n+.4*s):(r=e+.4*s,c=n-.3*s),o=t,l=i,"M"+t+","+e+" C"+o+","+r+" "+l+","+c+" "+i+","+n}},p=100,f=function(t,e,i){t.top=0,t.color||(t.color=h.a[h.a.length-1]);var n,o,r,l=0,c=parseInt(t.lineType);for(n=0;n<=e;n++)l+=(r=t.children[n]).height,r.color||(o=n%h.a.length,r.color=h.a[o]);for(t.height=l,n=0;n<=e;n++)a(t.children[n],t,!0),s(t.children[n],t,!0,i,c);for(l=0,n=++e;n<t.children.length;n++)l+=(r=t.children[n]).height,r.color||(o=n%h.a.length,r.color=h.a[o]);for(t.top=0,t.height=l,n=e;n<t.children.length;n++)a(t.children[n],t,!1),s(t.children[n],t,!1,i,c);return t},m=50,_=function(t,e,i){t.top=0,t.color||(t.color=h.a[h.a.length-1]);var n,a,s,l=0,c=parseInt(t.lineType);for(n=0;n<=e;n++)l+=(s=t.children[n]).widthCount,s.color||(a=n%h.a.length,s.color=h.a[a]);for(t.widthCount=l,n=0;n<=e;n++)o(t.children[n],t,!0),r(t.children[n],t,!0,i,c);for(l=0,n=++e;n<t.children.length;n++)l+=(s=t.children[n]).widthCount,s.color||(a=n%h.a.length,s.color=h.a[a]);for(t.top=0,t.widthCount=l,n=e;n<t.children.length;n++)o(t.children[n],t,!1),r(t.children[n],t,!1,i,c)};e.a={reset:function(t,e){e.clear(),this.init(t,e)},init:function(t,e){var i,n,a=parseInt(t.grapType),s=c.a.cavasSize;1===a||4===a?(n=t.children.length/2)%1==0?n-=1:n=Math.floor(n):2===a||5===a?n=-1:3!==a&&6!==a||(n=t.children.length-1),1===a||2===a||3===a?((i=u.height(e,t)).x=s/2,i.y=s/2,f(i,n,e)):4!==a&&5!==a&&6!==a||((i=u.width(e,t)).x=s/2,i.y=s/2,_(i,n,e)),l(e,i,t.shape)}}},function(t,e,i){"use strict";function n(t,e,i){var n={type:i,evt:t,target:e};$.emit("mindEvt","nodeEvent",n)}var a=i(2);e.a=function(){Raphael.fn.mindNode=function(t,e){var i,s,o=t.x,r=t.y,l=t.width,c=t.id,d="t_"+c,u=this.getById(d),h=this.getById(c);if(u.attr({x:o+l/2,y:r+15}),1===e){if("#ffffff"===t.color){var v=Math.floor(Math.random()*a.a.length);i=a.a[v]}else i=t.color;s={fill:i,stroke:i,"fill-opacity":.15,"stroke-width":1,cursor:"pointer"}}else s=2===e?"root"===t.id?{fill:"#ffffff",stroke:"#000","fill-opacity":.15,cursor:"pointer"}:{fill:"#ffffff",stroke:"","fill-opacity":.15,cursor:"pointer"}:{fill:t.color,stroke:t.color,"fill-opacity":.15,"stroke-width":1,cursor:"pointer"};h?(h.attr({x:o,y:r,width:l,height:32}),h.attr(s)):((h=this.rect(o,r,l,32,3)).click(function(t){n(t,this,"click")}),h.dblclick(function(t){n(t,this,"dblclick")}),h.mouseover(function(t){n(t,this,"mouseover")}),h.mouseout(function(t){n(t,this,"mouseout")}),h.attr(s),h.id=c)}}},function(t,e,i){"use strict";e.a=function(){Raphael.fn.mindLine=function(t,e){var i="l_"+t,n=this.getById(i);n?n.attr({path:e}):(n=this.path(e).attr({stroke:"#aaa","stroke-width":1,fill:"none"})).id=i}}},function(t,e,i){"use strict";e.a=function(t,e){e||(e=$(window));var i=e.width(),n=e.height(),a=parseInt(i-18e3)/2,s=parseInt(n-18e3)/2-100;t.style.left=a+"px",t.style.top=s+"px"}},function(t,e,i){"use strict";function n(t){var e={id:t._id,title:t.title};return t.quadrant&&(e.color=Nt[t.quadrant]),t.start>0&&(e.start=Mt(t.start)),t.end>0&&(t.end-t.start>Pt?e.allDay=!0:t.end>t.start&&(e.end=Mt(t.end))),e}function a(t,e,i,n){for(var s,o=0;o<i.children.length;o++){if((s=i.children[o]).id===t)return n?(s.children||(s.children=[]),s.children.push(e)):i.children.splice(o,0,e),!0;if(s.children&&s.children.length>0&&a(t,e,s,n))return!0}return!1}function s(t,e){for(var i,n=0;n<e.children.length;n++){if((i=e.children[n]).id===t)return i.children.length>0?(alert("\u8bf7\u5148\u5220\u9664\u5b50\u8282\u70b9"),!1):(e.children.splice(n,1),!0);if(i.children&&i.children.length>0&&s(t,i))return!0}return!1}function o(t,e){var i=t.localStorage.config;if(i&&(zen.user=JSON.parse(i),zen.user.id))return e(zen.user);$.http(null,"/system/my.do",function(i){var n=i.data,a={id:n._id,nick:n.nick,username:n.username,home:n.home,skin:n.skin,mode:n.mode,calendar:n.calendar};zen.user=a,t.localStorage.config=JSON.stringify(a),e(a)})}function r(t){$(document).ready(function(){if(t.skin){var e="";zen.mode<3&&(e="//a.yimiyisu.com/kooteam");var i="url('"+e+"/bg/"+t.skin+".jpg')";$("body").css("background-image",i)}var n=$("#J_navbar"),a="active";$("h2",n).on("click",function(){$.goto(zen.user.home)}),$("a",n).on("click",function(t){var e=$(t.currentTarget).parent();e.length&&"DD"===e[0].tagName&&(e.hasClass(a)||($("."+a,n).removeClass(a),e.addClass(a)))})})}i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-todo z-row"},t._l(t.data,function(e){return i("Quadrant",{key:e.tag,attrs:{data:e,now:t.now}})}),1)},c=[];l._withStripped=!0;var d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"z-12",class:t.data.tag},[i("Title",{attrs:{quadrant:t.data.tag,name:t.data.title}}),t._v(" "),i("div",{staticClass:"block",attrs:{"data-id":t.data.tag}},[i("z-draggable",{attrs:{list:t.data.sons,group:"things"},on:{add:t.add,end:t.end}},t._l(t.data.sons,function(e){return i("Thing",{key:e._id,attrs:{data:e,now:t.now}})}),1),t._v(" "),t.data.sons&&0!==t.data.sons.length?t._e():i("div",{staticClass:"empty"},[t._v("\u606d\u559c\u4f60\uff01\u5df2\u5b8c\u6210\u4e86\u6240\u6709\u5f85\u529e")])],1)],1)},u=[];d._withStripped=!0;var h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header z-row"},[i("div",{staticClass:"z-col"},[i("i",{staticClass:"z-icon flag"},[t._v("\ue153")]),t._v(t._s(t.name)+"\n    ")]),t._v(" "),i("div",{staticClass:"z-1",class:{active:t.active}},[i("label",{on:{click:function(e){return t.show(1)}}},[i("z-input",{attrs:{type:"text",maxlength:"200",width:"100%",placeholder:"\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u9700\u8981\u5904\u7406\u7684\u4e8b\u9879"},on:{blur:t.hide},nativeOn:{keyup:function(e){return t.keyup(e)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),i("i",{staticClass:"z-icon close",on:{click:function(e){return t.show(0)}}})])])},v=[];h._withStripped=!0;var p={props:["quadrant","name","todoList"],data:function(){return{text:"",isBlur:!0,active:!1}},methods:{stop:function(t){t.stopPropagation()},hide:function(){this.active=!1,this.isBlur=!0,this.$nextTick(function(){this.isBlur=!1})},show:function(t){this.active=0!==t||!this.active,this.active&&this.$nextTick(function(){this.$el.querySelector("input").focus()})},keyup:function(t){if(t.stopPropagation(),t.preventDefault(),13===t.keyCode){var e={},i=this.text;if(!i)return;e.title=i,e.quadrant=this.quadrant,$.http(e,"/thing/put.do",function(t){var i=t.data;e._id=i._id;var n=i.status;e.status=parseInt(n),this.$parent.data.sons.unshift(e),this.text=""},this)}}}},f=i(0),m=Object(f.a)(p,h,v,!1,null,null,null);m.options.__file="todo/title.vue";var _=m.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:2!==t.data.status,expression:"data.status !== 2"}],staticClass:"k-thing",class:{finish:t.data.status},attrs:{"data-id":t.data._id},on:{click:t.detail}},[i("label",{attrs:{"data-id":t.data._id},on:{click:function(e){return e.stopPropagation(),t.doFinish(e)}}},[i("i",{staticClass:"z-icon"})]),t._v(" "),i("div",[t._v(t._s(t.data.title))]),t._v(" "),t.data.finish<t.now?i("span",[t._v("\u5ef6\u671f"+t._s(t._f("time")(t.data.finish)))]):t._e()])},w=[];g._withStripped=!0;var y={props:["data","now"],methods:{sync:function(t){var e=this.data;t._id===e._id&&e.title!==t.title&&(e.title=t.title)},doFinish:function(t){var e,i="finish",n=this.data._id,a=$(t.currentTarget).parent();a.hasClass(i)?(a.removeClass(i),e=0):(a.addClass(i),e=1);var s={_id:n,status:e,projectId:this.data.projectId};$.http(s,"/thing/patch.do",function(){this.data.status=e;var t=this.$parent;t.sort&&t.sort(n,e)},this)},detail:function(){$.on("thingUpdate",this.sync),$.emit("thingDetail",this.data._id)}}},k=Object(f.a)(y,g,w,!1,null,null,null);k.options.__file="todo/thing.vue";var x=k.exports,b={sort:function(t,e,i){for(var n=null,a=0;a<i.length;a++)if(i[a]._id===t){n=i.splice(a,1);break}if(null!=n){if(n=n[0],0===e)return i.unshift(n);for(var s=i.length-1;s>=0;s--)if(0===i[s].status)return void i.splice(s+1,0,n);i.unshift(n)}}},C={props:["data","now"],components:{Title:_,Thing:x},data:function(){return{currentId:""}},methods:{add:function(t){t.pullMode&&this.drag(t)},end:function(t){t.pullMode||t.newIndex===t.oldIndex||this.drag(t)},drag:function(t){var e=t.newIndex,i={_id:this.data.sons[e]._id,quadrant:this.data.tag};if(0===e)if(1===this.data.sons.length)i.order=1e5;else{var n=this.data.sons[e+1];i.order=n.order-500}else if(e===this.data.length){var a=this.data.sons[e-1];i.order=a.order+500}else{var s=this.data.sons[e+1],o=this.data.sons[e-1];i.order=parseInt((s.order+o.order)/2)}$.http(i,"/thing/patch.do",function(t){},this)},sort:function(t,e){b.sort(t,e,this.data.sons)}}},S=Object(f.a)(C,d,u,!1,null,null,null);S.options.__file="todo/quadrant.vue";var z={data:function(){return{data:[{tag:"a",title:"\u91cd\u8981\u4e14\u7d27\u6025",sons:[]},{tag:"b",title:"\u91cd\u8981\u4e0d\u7d27\u6025",sons:[]},{tag:"c",title:"\u7d27\u6025\u4e0d\u91cd\u8981",sons:[]},{tag:"d",title:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025",sons:[]}],now:0,showDetail:!1}},components:{Quadrant:S.exports},mounted:function(){this.load();var t=new Date;this.now=t.getTime()%1e3},methods:{load:function(){$.http(null,"/thing/latest.do",function(t){var e,i,n=t.data;if(n)for(var a=0;a<n.length;a++)e=n[a],(i=this.getQuadrant(e.quadrant))&&i.sons.push(e)},this)},getQuadrant:function(t){for(var e,i=0;i<4;i++)if((e=this.data[i]).tag===t)return e;return null}}},E=Object(f.a)(z,l,c,!1,null,null,null);E.options.__file="todo/index.vue";var T=E.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item?i("z-dialog",{staticClass:"k-thing-detail-bg",attrs:{visible:t.isShow},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"dialog-header"},[i("z-button",{directives:[{name:"show",rawName:"v-show",value:0===t.item.status,expression:"item.status === 0"}],attrs:{plain:"",round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.doFinish(e)}}},[i("i",{staticClass:"z-icon"},[t._v("\ue5ca")]),t._v("\u6807\u8bb0\u5b8c\u6210\n        ")]),t._v(" "),i("z-button",{directives:[{name:"show",rawName:"v-show",value:1===t.item.status,expression:"item.status === 1"}],attrs:{plain:"",round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.doFinish(e)}}},[i("i",{staticClass:"z-icon"},[t._v("\ue5cd")]),t._v("\u6807\u8bb0\u672a\u5b8c\u6210\n        ")]),t._v(" "),i("z-button",{directives:[{name:"show",rawName:"v-show",value:2===t.item.status,expression:"item.status === 2"}],attrs:{plain:"",round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.doFinish(e)}}},[i("i",{staticClass:"z-icon"},[t._v("\ue042")]),t._v("\u64a4\u9500\u5220\u9664\n        ")]),t._v(" "),i("z-button",{attrs:{plain:"",round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.save(e)}}},[i("i",{staticClass:"z-icon"},[t._v("\ue161")]),t._v("\u4fdd\u5b58")])],1),t._v(" "),i("div",{staticClass:"dialog-content",on:{click:t.click}},[i("div",{staticClass:"editor-content"},[i("z-input",{staticClass:"title",attrs:{maxlength:"60",type:"text"},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}}),t._v(" "),i("textarea",{staticClass:"hide",attrs:{id:"J_Editor",name:"content"},domProps:{value:t.item.content}})],1),t._v(" "),i("div",{staticClass:"form"},[i("dl",{staticClass:"z-left"},[i("dt",[i("i",{staticClass:"z-icon"},[t._v("\ue916")]),t._v("\u8ba1\u5212\u65e5\u671f\n                ")]),t._v(" "),i("dd",[i("Plan",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),t._v(" "),i("dl",{staticClass:"z-left"},[i("dt",[i("i",{staticClass:"z-icon"},[t._v("\ue7fc")]),t._v("\u8d1f\u8d23\u4eba:")]),t._v(" "),i("dd",[i("Owner",{attrs:{nick:t.onwerNick},on:{changeUser:t.showUser},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}}),t._v(" "),t.showUserSearch?i("k-user-search",{attrs:{fixed:"true",my:"true"},model:{value:t.owner,callback:function(e){t.owner=e},expression:"owner"}}):t._e()],1)]),t._v(" "),t.quadrant?t._e():i("dl",{staticClass:"z-left"},[i("dt",[i("i",{staticClass:"z-icon"},[t._v("\ue228")]),t._v("\u4f18\u5148\u7ea7")]),t._v(" "),i("dd",[i("Priority",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),t._v(" "),i("dl",{staticClass:"z-left",staticStyle:{width:"98%"}},[i("dt",{staticStyle:{"line-height":"32px"}},[i("i",{staticClass:"z-icon"},[t._v("\ue190")]),t._v("\u63d0\u9192\u8bbe\u7f6e\n                ")]),t._v(" "),i("dd",[i("Clock",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),t._v(" "),i("Comment",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1),t._v(" "),i("CommentPost",{attrs:{item:t.item}})],1)]):t._e()},j=[];I._withStripped=!0;var O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-thing-comment"},[t._m(0),t._v(" "),0===t.commentsData.length?i("div",{staticClass:"empty"},[i("i",{staticClass:"z-icon"},[t._v("\ue24e")]),t._v("\u6682\u65e0\u8bc4\u8bba")]):t._e(),t._v(" "),t._l(t.commentsData,function(e,n){return i("div",{staticClass:"comment"},[i("div",{staticClass:"header z-row"},[i("div",{staticClass:"z-8"},[t._v(t._s(e.nick))]),t._v(" "),i("div",{staticClass:"z-16"},[t.myId===e.uid?i("span",{staticClass:"delete",on:{click:function(e){return t.remove(n)}}},[t._v("\u5220\u9664")]):t._e(),t._v(" "),i("span",[t._v(t._s(t._f("idate")(e._id)))])])]),t._v(" "),i("div",{staticClass:"content"},[t._v(t._s(e.content))])])})],2)},D=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header z-row"},[i("div",{staticClass:"z-6"},[i("i",{staticClass:"z-icon"},[t._v("\ue53b")]),t._v("\u52a8\u6001\n        ")]),t._v(" "),i("div",{staticClass:"z-18"})])}];O._withStripped=!0;var N={props:["value"],data:function(){return{commentsData:[],targetId:"",myId:""}},mounted:function(){this.value&&(this.targetId=this.value._id,this.queryComments(),this.myId=zen.user.id,$.on("addNewComent",this.addNewComent))},methods:{queryComments:function(){({}).targetId=this.targetId,$.http({targetId:this.targetId},"/comment/selectByParent.do",function(t){var e=t.data;e&&(this.commentsData=e)},this)},remove:function(t){var e=this.commentsData[t]._id;this.commentsData.splice(t,1),$.http({_id:e,status:0},"/patch/comment.json",function(){})},addNewComent:function(){this.queryComments()}}},P=Object(f.a)(N,O,D,!1,null,null,null);P.options.__file="todo/detail/comment.vue";var M=P.exports,q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},J=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"describe"},[i("textarea")])}];q._withStripped=!0;var B={}.hasOwnProperty,L={uploadDomain:function(){if(3===zen.mode||4===zen.mode)return"";var t="//bridge.kooteam.com";return"daily"===zen.env&&(t="//bridge.dev.zeto.me"),t},resDomain:function(){return 3===zen.mode||4===zen.mode?"":"//a.yimiyisu.com"},extend:function(t,e){function i(){this.constructor=t}for(var n in e)B.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}},F={props:["content"],data:function(){return{thing:null,localEmit:!1}},mounted:function(){},methods:{init:function(){var t=L.uploadDomain(),e=["title","bold","italic","underline","strikethrough","fontScale","color","ol","ul","blockquote","code","table","link","image","hr","alignment"];this.editor=new Simditor({textarea:$("textarea",this.$el),placeholder:"\u8fd9\u91cc\u8f93\u5165\u5f85\u529e\u63cf\u8ff0...",defaultImage:L.resDomain()+"/zeto/preview.png",params:{},tabIndent:!0,toolbar:e,toolbarFloat:!1,toolbarFloatOffset:0,height:"200px",toolbarHidden:!1,pasteImage:!0,cleanPaste:!0,upload:{url:t+"/upload/image.do",fileKey:"file"}}),this.editor.uploader.on("uploadsuccess",function(t,e,i){var n=JSON.parse(i);if(23===n.action)return alert(n.message);e.img.attr("src",n.data)});var i=this;void 0!==this.content&&i.editor.setValue(this.content),i.editor.on("valuechanged",function(){i.localEmit=!0,i.$parent.item.content=i.editor.getValue()})}}},U=Object(f.a)(F,q,J,!1,null,null,null);U.options.__file="todo/detail/describe.vue";var A=U.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-todo-owner"},[i("span",{staticClass:"nick",on:{click:function(e){return e.stopPropagation(),t.show(e)}}},[t._v(t._s(t.name))])])},R=[];H._withStripped=!0;var Q={props:["value","nick"],data:function(){return{name:""}},watch:{nick:function(t){t&&(this.name=t)}},mounted:function(){var t=this.value.owner;if(t===zen.user.id)return this.name="\u6211\u81ea\u5df1";$.http({uid:t},"/user/getById.do",function(t){this.name=t.data.nick},this)},methods:{show:function(){this.$emit("changeUser",!0)}}},V=Object(f.a)(Q,H,R,!1,null,null,null);V.options.__file="todo/detail/owner.vue";var W=V.exports,G=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sub-thing"},[i("h4",[i("i",{staticClass:"z-icon"},[t._v("\ue8d2")]),t._v("\u5b50\u4efb\u52a1")])])}];G._withStripped=!0;var K={},X=Object(f.a)(K,G,Z,!1,null,null,null);X.options.__file="todo/detail/subThing.vue";var Y=X.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-todo-plan"},[i("label",{on:{click:t.show}},[t._v("\n        "+t._s(t.text)+"\n    ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"calendar"},[i("div",{staticClass:"z-row"},[i("div",{staticClass:"z-12 modal"},[i("div",{staticClass:"day"},[i("span",{class:{active:t.modal<4},on:{click:function(e){return t.changeModal(1)}}},[t._v("\u5355\u65e5")])]),t._v(" "),i("span",{class:{active:4===t.modal},on:{click:function(e){return t.changeModal(4)}}},[t._v("\u91cd\u590d")])]),t._v(" "),i("div",{staticClass:"z-12"},[i("div",{staticClass:"operator"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:t.close}},[t._v("\u53d6\u6d88")]),t._v(" "),i("z-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:t.submit}},[t._v("\u786e\u5b9a")])],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.modal<4,expression:"modal<4"}]},[i("div",{staticClass:"J_calendar"})]),t._v(" "),t.cal?i("Repeat",{directives:[{name:"show",rawName:"v-show",value:4===t.modal,expression:"modal===4"}],on:{choseRepeat:t.choseRepeat},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}):t._e()],1)])},et=[];tt._withStripped=!0;var it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"repeat"},[i("div",{staticClass:"repeat-type"},[t._v("\n        \u91cd\u590d\u65b9\u5f0f\n        "),i("span",[t._v("\n            "+t._s(t.repeats[t.repeatType])+"\n            "),i("ul",t._l(t.repeats,function(e,n){return i("li",{key:n,on:{click:function(e){return t.change(n)}}},[t._v(t._s(e))])}),0)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.repeatType,expression:"repeatType===1"}],staticClass:"weeks"},t._l(t.weeks,function(e,n){return i("span",{key:n,class:{active:t.weekSelected.indexOf(n)>-1},on:{click:function(e){return t.selectWeek(n,e)}}},[t._v("\n                    "+t._s(e)+"\n                ")])}),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.repeatType,expression:"repeatType===2"}],staticClass:"days"},t._l(t.days,function(e,n){return i("span",{key:n,class:{active:t.daySelected.indexOf(n)>-1},on:{click:function(e){return t.selectDay(n,e)}}},[t._v("\n                    "+t._s(e)+"\n                ")])}),0),t._v(" "),t._m(0)])},nt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"repeat-time"},[i("input",{staticClass:"J_calendar-2",attrs:{type:"text",placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4\u70b9"}})])}];it._withStripped=!0;var at={props:["value"],data:function(){return{repeatType:1,time:"9:00",result:[],repeats:["\u6bcf\u5929","\u6bcf\u5468","\u6bcf\u6708"],weeks:["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d","\u5468\u65e5"],days:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],weekSelected:[],daySelected:[],selected:{}}},mounted:function(){var t=this,e=this.value;this.repeatType=e.type,1===e.type&&(this.weekSelected=e.data),2===e.type&&(this.daySelected=e.data),this.selected=e,$(".J_calendar-2",this.$el).el.flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:this.time,time_24hr:!0,onChange:function(e,i){t.time=i,this.emit()}})},methods:{change:function(t){this.repeatType=t,this.emit()},selectWeek:function(t){var e=this.weekSelected.indexOf(t);e>-1?this.weekSelected.splice(e,1):this.weekSelected.unshift(t),this.emit()},selectDay:function(t){var e=this.daySelected.indexOf(t);e>-1?this.daySelected.splice(e,1):this.daySelected.unshift(t),this.emit()},emit:function(){1===this.repeatType&&(this.selected.data=this.weekSelected),2===this.repeatType&&(this.selected.data=this.daySelected),this.selected.time=this.time,this.selected.type=this.repeatType,this.$emit("input",this.selected)}}},st=Object(f.a)(at,it,nt,!1,null,null,null);st.options.__file="todo/detail/repeat.vue";var ot={props:["value"],data:function(){return{modal:1,cal:null,thing:null,name:"\u5355\u65e5",modals:["","\u5355\u65e5","\u591a\u65e5","\u8d77\u6b62","\u91cd\u590d"],range:[],text:"",dateStr:"",isShow:!1,selected:{}}},components:{Repeat:st.exports},mounted:function(){var t=this.value;this.thing=t,t.plan&&(this.modal=t.plan),1===this.modal?this.text=$.date(t.start):this.text="\u91cd\u590d\u4efb\u52a1",this.name=this.modals[this.modal],this.modal>1&&t.planContent&&(this.selected=JSON.parse(t.planContent))},methods:{show:function(){$.lib(["/flatpickr2/flatpickr.min.css","/flatpickr2/flatpickr.min.js"],this.init,null,this)},submit:function(){if(this.thing.plan=this.modal,4===this.modal)this.text="\u91cd\u590d\u4efb\u52a1",this.thing.planContent=JSON.stringify(this.selected);else{this.text=this.dateStr;var t=new Date(this.dateStr).getTime()/1e3;(!this.thing.end||this.thing.end<this.thing.start)&&(this.thing.end=t+7200),this.thing.start=t}this.$emit("input",this.thing),this.close()},close:function(){this.isShow=!1},changeModal:function(t){if(t!==this.modal){if(t<4){var e=["","single","multiple","range"];this.name=this.modals[t],this.cal.clear(),this.cal.set("mode",e[t])}this.modal=t}},init:function(){if(this.isShow=!0,!this.cal){var t=$.date(this.thing.start),e=this,i=["","single","multiple","range"];this.cal=$(".J_calendar",this.$el).el.flatpickr({inline:!0,minDate:"today",defaultDate:t,mode:i[this.modal],enableTime:!0,time_24hr:!0,onChange:function(t,i){e.dateStr=i}})}},choseRepeat:function(t){this.modal=4,this.selected=t}}},rt=Object(f.a)(ot,tt,et,!1,null,null,null);rt.options.__file="todo/detail/plan.vue";var lt=rt.exports,ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-todo-tag"},[i("label",{on:{click:t.show}},[t._v("\u5f85\u6dfb\u52a0")]),t._v(" "),t.isShow&&t.isEdit?i("div",{staticClass:"tags"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newText,expression:"newText"}],attrs:{type:"text",placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0"},domProps:{value:t.newText},on:{input:function(e){e.target.composing||(t.newText=e.target.value)}}}),t._v(" "),i("div",{staticClass:"tag"},t._l(t.colors,function(e,n){return i("span",{style:"background:"+e,on:{click:function(e){return t.selectColor(n)}}},[t.newColor===n?i("i",{staticClass:"z-icon"},[t._v("\ue5ca")]):t._e()])}),0),t._v(" "),i("div",{staticClass:"operator"},[i("span",{staticClass:"z-button small",on:{click:t.cancel}},[t._v("\u53d6\u6d88")]),t._v(" "),i("span",{staticClass:"z-button primary small",on:{click:t.newTag}},[t._v("\u786e\u5b9a")])])]):t._e(),t._v(" "),t.isShow&&!t.isEdit?i("div",{staticClass:"tags"},[i("div",{staticClass:"tag"},t._l(t.tags,function(e,n){return i("span",{style:"background:"+e.color,on:{click:function(e){return t.selectTag(n)}}},[t._v(t._s(e.text))])}),0),t._v(" "),i("div",{staticClass:"operator"},[i("span",{staticClass:"z-button small",on:{click:t.editModal}},[t._v("\u65b0\u589e")]),t._v(" "),i("span",{staticClass:"z-button small",on:{click:t.close}},[t._v("\u53d6\u6d88")]),t._v(" "),i("span",{staticClass:"z-button small primary",on:{click:t.addTag}},[t._v("\u786e\u5b9a")])])]):t._e()])},dt=[];ct._withStripped=!0;var ut=i(2),ht={props:["value"],data:function(){return{isShow:!1,isEdit:!1,newText:"",newColor:0,selected:[],tags:[],colors:[]}},created:function(){this.colors=ut.a},methods:{close:function(){this.isShow=!1},addTag:function(){},newTag:function(){if(!this.newText)return alert("\u6807\u7b7e\u540d\u4e0d\u80fd\u4e3a\u7a7a");var t={text:this.newText,color:this.colors[this.newColor]};this.tags.push(t),this.newText="",this.cancel()},cancel:function(){this.isEdit=!1},editModal:function(){this.isEdit=!0},selectTag:function(t){},show:function(){this.isShow=!0,0===this.tags.length&&(this.isEdit=!0)},selectColor:function(t){this.newColor=t}}},vt=Object(f.a)(ht,ct,dt,!1,null,null,null);vt.options.__file="todo/detail/tag.vue";var pt=vt.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{directives:[{name:"tip",rawName:"v-tip",value:"\u91cd\u8981\u4e14\u7d27\u6025",expression:"'\u91cd\u8981\u4e14\u7d27\u6025'"}],staticClass:"k-prority a",class:{active:"a"===t.thing.quadrant},on:{click:function(e){return t.select("a")}}}),t._v(" "),i("label",{directives:[{name:"tip",rawName:"v-tip",value:"\u91cd\u8981\u4e0d\u7d27\u6025",expression:"'\u91cd\u8981\u4e0d\u7d27\u6025'"}],staticClass:"k-prority b",class:{active:"b"===t.thing.quadrant},on:{click:function(e){return t.select("b")}}}),t._v(" "),i("label",{directives:[{name:"tip",rawName:"v-tip",value:"\u7d27\u6025\u4e0d\u91cd\u8981",expression:"'\u7d27\u6025\u4e0d\u91cd\u8981'"}],staticClass:"k-prority c",class:{active:"c"===t.thing.quadrant},on:{click:function(e){return t.select("c")}}}),t._v(" "),i("label",{directives:[{name:"tip",rawName:"v-tip",value:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025",expression:"'\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025'"}],staticClass:"k-prority d",class:{active:"d"===t.thing.quadrant},on:{click:function(e){return t.select("d")}}})])},mt=[];ft._withStripped=!0;var _t={props:["value"],data:function(){return{thing:{}}},mounted:function(){this.thing=this.value},methods:{select:function(t){t!==this.thing.quadrant&&(this.thing.quadrant=t,this.$emit("input",this.thing))}}},gt=Object(f.a)(_t,ft,mt,!1,null,null,null);gt.options.__file="todo/detail/priority.vue";var wt=gt.exports,yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-comment-post"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"input",attrs:{placeholder:"\u6309\u56de\u8f66\u5065\u53d1\u9001\u8bc4\u8bba",type:"text"},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitComment(e)},input:function(e){e.target.composing||(t.text=e.target.value)}}})])},kt=[];yt._withStripped=!0;var xt={props:["item"],data:function(){return{text:"",placeholder:"\u6309\u56de\u8f66\u5065\u53d1\u9001\u8bc4\u8bba",isInput:!0}},methods:{submitComment:function(){var t={targetId:this.item._id,content:this.text,status:1};$.http(t,"/put/comment.json",function(){this.text="",$.emit("addNewComent",null)},this)}}},bt=Object(f.a)(xt,yt,kt,!1,null,null,null);bt.options.__file="todo/detail/commentPost.vue";var Ct=bt.exports,$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clock"},[0===t.selected.length?i("span",[t._v("\u5f85\u8bbe\u7f6e")]):t._e(),t._v(" "),t._l(t.selected,function(e,n){return i("span",{key:e},[t._v(t._s(t.options[e].name))])}),t._v(" "),i("ul",t._l(t.options,function(e){return i("li",{class:{active:e.checked},on:{click:function(i){return t.select(e.value)}}},[t._v(t._s(e.name))])}),0)],2)},St=[];$t._withStripped=!0;var zt={props:["value"],data:function(){return{selected:[],thing:{},options:[{name:"\u5f00\u59cb\u65f6\u524d5\u5206\u949f",value:0,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d15\u5206\u949f",value:1,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d30\u5206\u949f",value:2,checked:!1},{name:"\u5f00\u59cb\u65f6\u524d1\u5929",value:3,checked:!1}]}},mounted:function(){if(this.thing=this.value,!this.thing.remind)return this.selected=[];this.selected=this.thing.remind.split(","),this.checkStatus()},methods:{select:function(t){if(-1===this.selected.indexOf(t))this.selected.push(t);else for(var e=0;e<this.selected.length;e++)this.selected[e]===t&&this.selected.splice(e,1);this.emit()},checkStatus:function(){for(var t=0;t<this.options.length;t++){this.options[t].checked=!1;for(var e=0;e<this.selected.length;e++)this.options[t].value===this.selected[e]&&(this.options[t].checked=!0)}},emit:function(){this.checkStatus(),this.thing.remind=this.selected.join(","),this.$emit("input",this.thing)}}},Et=Object(f.a)(zt,$t,St,!1,null,null,null);Et.options.__file="todo/detail/clock.vue";var Tt={props:["quadrant"],data:function(){return{item:null,showUserSearch:!1,onwerNick:"",owner:{},isShow:!1}},components:{Comment:M,Describe:A,Owner:W,SubThing:Y,Tag:pt,Plan:lt,Priority:wt,CommentPost:Ct,Clock:Et.exports},mounted:function(){$.lib(["/tinymce/tinymce.min.js"]),this.$nextTick(function(){$.on("thingDetail",this.init)})},watch:{owner:function(t){this.onwerNick=t.nick,this.item.owner=t.uid}},methods:{editorFunc:function(){var t=this,e=L.uploadDomain()+"/upload/image.do";tinymce.init({selector:"#J_Editor",height:200,statusbar:!1,menubar:!1,language:"zh_CN",body_class:"article-body",images_upload_url:e,automatic_uploads:!1,plugins:["advlist autolink lists link image charmap emoticons anchor","searchreplace visualblocks","insertdatetime media table paste"],toolbar:"undo redo | bold italic backcolor | alignleft aligncenter alignright alignjustify  | removeformat",content_css:["//a.yimiyisu.com/zeto/lib/zetoui.css"]}).then(function(e){t.editor=e[0]})},init:function(t){$.http({_id:t},"/thing/get.do",function(t){var e=this;this.item=t.data,this.isShow=!0,setTimeout(function(){e.editorFunc()},500)},this)},close:function(){this.isShow=!1},showUser:function(t){this.showUserSearch=t},click:function(){this.showUserSearch&&(this.showUserSearch=!1)},preventEvt:function(t){t.stopPropagation()},doFinish:function(){var t,e=this.item.status,i=this.item._id;1===e&&(t=0),0!==e&&2!==e||(t=1),$.http({_id:i,status:t},"/thing/patch.do",function(e){this.item.status=t},this)},delTodo:function(){$.http({_id:this.item._id,status:2},"/thing/patch.do",function(t){this.item.status=2},this)},save:function(){$.http(this.item,"/thing/patch.do",function(t){this.isShow=!1,$.emit("thingUpdate",this.item)},this)}}},It=Object(f.a)(Tt,I,j,!1,null,null,null);It.options.__file="todo/detail.vue";var jt=It.exports,Ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"20px"}},[i("div",{attrs:{id:"calendar"}}),t._v(" "),i("k-todo-add",{attrs:{value:t.eventData,visible:t.isShow,"is-cal":!0}})],1)},Dt=[];Ot._withStripped=!0;var Nt={a:"#f80e15",b:"#d9b403",c:"#009fe3",d:"#79AA1C"},Pt=86400,Mt=function(t){var e=new Date(1e3*t),i=1900+e.getYear(),n="0"+(e.getMonth()+1),a="0"+e.getDate(),s="0"+e.getHours(),o="0"+e.getMinutes(),r="0"+e.getSeconds();return"00"===s?i+"-"+n.substring(n.length-2,n.length)+"-"+a.substring(a.length-2,a.length):i+"-"+n.substring(n.length-2,n.length)+"-"+a.substring(a.length-2,a.length)+" "+s.substring(s.length-2,s.length)+":"+o.substring(o.length-2,o.length)+":"+r.substring(r.length-2,r.length)},qt={convert:function(t){if(!Array.isArray(t))return n(t);for(var e,i=[],a=0;a<t.length;a++)e=n(t[a]),i.push(e);return i},unixTime:Mt,getColor:function(t){return Nt[t]}},Jt={props:["value"],data:function(){return{calendar:null,currentEvt:null,eventData:{},isShow:!1}},mounted:function(){$.lib(["/calendar/main.min.js","/calendar/interaction/min.js","/calendar/daygrid/min.js","/calendar/timegrid/min.js"],this.init),$.on("thingUpdate",this.update)},methods:{init:function(){var t={plugins:["interaction","dayGrid","timeGrid"],header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek"},locale:"zh-cn",navLinks:!0,timezone:"Asia/Shanghai",fixedWeekCount:!1,aspectRatio:1.8,windowResizeDelay:300,selectable:!0,selectHelper:!0,select:this.add,eventClick:this.detail,eventResize:this.change,eventDrop:this.change,minTime:"06:00:00",maxTime:"23:00:00",scrollTime:"08:00:00",editable:!0,eventLimit:!0,events:[]};t.defaultDate=new Date,t.events=qt.convert(this.value),this.calendar=new FullCalendar.Calendar(document.getElementById("calendar"),t),this.$nextTick(function(){this.calendar.render(),this.calendar.refetchEvents()})},change:function(t){var e={_id:t.event.id,start:t.event.start.getTime()/1e3};t.event.end&&(e.end=t.event.end.getTime()/1e3),$.http(e,"/thing/patch.do",function(t){},this)},update:function(t){if(t.owner!==zen.user.id)return this.remove(t._id);this.calendar.getEventById(t._id).remove();var e={color:qt.getColor(t.quadrant),id:t._id,start:1e3*t.start,title:t.title};this.calendar.addEvent(e)},add:function(t,e){this.isShow=!0,this.eventData={start:t,end:e}},addThing:function(t){if(t){var e=qt.convert(t);this.calendar.addEvent(e)}else this.calendar.unselect()},detail:function(t,e,i){this.currentEvt=t,$.emit("thingDetail",t.event.id)},remove:function(t){this.calendar.removeEvents([t])}}},Bt=Object(f.a)(Jt,Ot,Dt,!1,null,null,null);Bt.options.__file="calendar/index.vue";var Lt=Bt.exports,Ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-doc z-row"},[i("div",{staticClass:"z-4"},[i("h3",[t._v("\u6211\u7684\u77e5\u8bc6\u5e93\n            "),i("z-wicket",{staticClass:"new",attrs:{type:"text",size:"small",view:"J_new",action:"/note/add.do",title:"\u65b0\u5efa\u77e5\u8bc6\u5e93"}},[i("i",{staticClass:"z-icon hover"},[t._v("\ue145")])])],1),t._v(" "),i("Tree")],1),t._v(" "),i("div",{staticClass:"z-20"},[t.content?i("Editor",{attrs:{data:t.chapterData,summary:t.content}}):t._e()],1)])},Ut=[];Ft._withStripped=!0;var At=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"k-repository"},[i("div",{staticClass:"z-row"},[i("div",{staticClass:"z-12 h3"},[t._v("\n                "+t._s(t.data.title)+"\n            ")]),t._v(" "),i("div",{staticClass:"z-12",staticStyle:{"text-align":"right"}},[i("z-button",{directives:[{name:"href",rawName:"v-href",value:"/view.html?id="+t.data._id,expression:"'/view.html?id='+data._id"}],attrs:{plain:"",target:"_blank",size:"small"}},[t._v("\n                    \u67e5\u770b\n                ")]),t._v(" "),t.pid?t._e():i("z-button",{attrs:{plain:"",size:"small"},on:{click:t.set}},[t._v("\u8bbe\u7f6e")]),t._v(" "),i("z-wicket",{attrs:{plain:"",action:"/note/patch.do",size:"small",prop:t.data,view:"J_title",callback:t.changeTitle}},[t._v("\u4fee\u6539\u6807\u9898\n                ")]),t._v(" "),i("z-button",{attrs:{plain:"",size:"small"},on:{click:t.addNode}},[t._v("\u65b0\u589e\u7ae0\u8282")])],1)]),t._v(" "),i("Chapter",{key:"root",attrs:{value:t.summary.sons,readonly:t.readonly}})],1),t._v(" "),i("AddDoc",{attrs:{parent:t.data._id}}),t._v(" "),i("Board",{attrs:{itemId:t.docId,nodes:t.summary.sons}}),t._v(" "),i("Set",{attrs:{permision:t.data.permision,note:t.data._id}})],1)},Ht=[];At._withStripped=!0;var Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("z-draggable",{attrs:{list:t.value,group:"item"},on:{end:t.end}},t._l(t.value,function(e){return i("div",{key:e.id,staticClass:"group"},[i("div",{staticClass:"guide",attrs:{"data-id":e.id}}),t._v(" "),i("div",{staticClass:"item",attrs:{"data-id":e.id}},[i("hr"),t._v(" "),"folder"===e.link?i("i",{staticClass:"folder z-icon",class:{hide:!1===e.status},on:{click:function(i){return t.fold(e)}}}):t._e(),t._v(" "),i("div",{staticClass:"header"},[i("Icon",{attrs:{type:e.type||e.link}}),t._v(" "),i("div",{staticClass:"title",on:{click:function(i){return t.view(e)}}},[t._v("\n                        "+t._s(e.title)+"\n                    ")])],1),t._v(" "),t.readonly?i("div",{staticClass:"info"},[t._v("\n                    "+t._s(t._f("idate")(e.link))+"\n                ")]):i("div",{staticClass:"info"},[i("i",{staticClass:"z-icon hover",attrs:{title:"\u4fee\u6539\u6807\u9898"},on:{click:function(i){return t.change(e)}}},[t._v("\ue22b")]),t._v(" "),i("i",{staticClass:"z-icon hover",attrs:{title:"\u6dfb\u52a0\u5b50\u7ae0\u8282"},on:{click:function(i){return t.trigger(e,"add")}}},[t._v("\ue145")]),t._v(" "),i("z-confirm",{staticClass:"z-icon hover",attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u6587\u6863\u5417"},on:{click:function(i){return t.trigger(e,"remove")}}},[t._v("\n                        \ue872\n                    ")])],1)]),t._v(" "),!1!==e.status&&e.sons&&e.sons.length>0?i("Chapter",{key:"s"+e.id,attrs:{readonly:t.readonly,value:e.sons}}):t._e()],1)}),0),t._v(" "),i("z-dialog",{attrs:{title:"\u4fee\u6539\u6807\u9898",width:"540px",visible:t.isEdit},on:{"update:visible":function(e){t.isEdit=e}}},[i("z-form",{attrs:{"label-width":"100px"}},[i("z-field",{attrs:{label:"\u6587\u6863\u6807\u9898"}},[i("z-input",{attrs:{width:"340px",type:"text",koo:"need"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{on:{click:function(e){t.isEdit=!1}}},[t._v("\u53d6 \u6d88")]),t._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("\u786e \u5b9a")])],1)],1)],1)},Qt=[];Rt._withStripped=!0;var Vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip"},[1===t.type?i("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u6587\u672c\u6587\u6863",expression:"'\u6587\u672c\u6587\u6863'"}],staticClass:"doc-txt"}):t._e(),t._v(" "),2===t.type?i("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u601d\u7ef4\u5bfc\u56fe",expression:"'\u601d\u7ef4\u5bfc\u56fe'"}],staticClass:"doc-mind"}):t._e(),t._v(" "),3===t.type?i("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u6d41\u7a0b\u56fe",expression:"'\u6d41\u7a0b\u56fe'"}],staticClass:"doc-graph"}):t._e(),t._v(" "),5===t.type?i("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u6d41\u7a0b\u56fe",expression:"'\u6d41\u7a0b\u56fe'"}],staticClass:"doc-graph"}):t._e(),t._v(" "),t.type?t._e():i("i",{directives:[{name:"tip",rawName:"v-tip",value:"\u6b64\u6587\u6863\u5c1a\u672a\u521b\u5efa",expression:"'\u6b64\u6587\u6863\u5c1a\u672a\u521b\u5efa'"}],staticClass:"z-icon why"},[t._v("\ue8fd")])])},Wt=[];Vt._withStripped=!0;var Gt={props:["type"]},Zt=Object(f.a)(Gt,Vt,Wt,!1,null,null,null);Zt.options.__file="doc/repository/icon.vue";var Kt={name:"Chapter",props:["value","readonly","parent"],components:{Icon:Zt.exports},data:function(){return{title:"",current:null,isEdit:!1}},methods:{toggle:function(){this.isEdit=!this.isEdit},change:function(t){this.current=t,this.title=t.title,this.isEdit=!0},end:function(t){t.newIndex!==t.oldIndex&&this.trigger(null,"save")},update:function(){this.current.title=this.title,this.isEdit=!1;var t={_id:this.current.id,title:this.title};t._id&&$.http(t,"/note/patch.do",function(t){},this),this.trigger(null,"save")},view:function(t){return"folder"===t.link?t.status=!t.status:t.link?"folder"===t.link?(t.status=!t.status,this.trigger(t.id,"folder")):void this.trigger(t.link,"doc"):this.trigger(t,"newDoc")},fold:function(t){t.status=!t.status},trigger:function(t,e){var i={event:e,data:t};$.emit("chapterEvt",i)}}},Xt=Object(f.a)(Kt,Rt,Qt,!1,null,null,null);Xt.options.__file="doc/repository/chapter.vue";var Yt=Xt.exports,te={set:function(){return $.emit("docSet",!0)},remove:function(t,e,i){for(var n,a,s=0;s<e.length;s++){if((n=e[s]).id===t)return!i&&n.sons.length>0?(alert("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u5148\u5220\u9664\u5b50\u6587\u6863\u3002"),null):(a=e.splice(s,1))[0];if(n.sons&&n.sons.length>0&&(a=this.remove(t,n.sons,i)))return a}return null},addNode:function(){var t={title:"\u65b0\u589e\u6587\u6863",link:"",date:"",sons:[]};this.summary.id++,t.id=this.summary.id,this.summary.sons.push(t),this.save(!0)},add:function(t,e,i,n){for(var a,s=0;s<e.length;s++){if((a=e[s]).id===t)return n?a.sons.unshift(i):e.splice(s,0,i),!0;if(a.sons&&a.sons.length>0&&this.add(t,a.sons,i,n))return!0}return!1},edit:function(t,e){for(var i,n=0;n<e.length;n++){if((i=e[n]).id===t.data){if("folder"===t.event)return i.status=!i.status,!1;if("edit"===t.event&&(i.link=t.link,"folder"===t.link&&(i.status=!0),i.title=t.title,i.uid=t.uid,t.type&&(i.type=t.type)),"title"===t.event){if(i.title===t.title)return!1;i.title=t.title}return!0}if(i.sons&&i.sons.length>0&&this.edit(t,i.sons))return!0}return!1},move:function(t){var e=this.remove(t.from,this.summary.sons,!0),i=$.extend({},e,!1);return this.add(t.to,this.summary.sons,i,t.isSon)},subscribe:function(t){var e,i=this.summary;if("move"===t.event)return e=this.move(t),this.save(e);if("add"===t.event){var n={title:"\u65b0\u589e\u6587\u6863",link:"",date:"",sons:[]};return i.id++,n.id=i.id,t.data.sons.push(n),this.save(!0)}return"remove"===t.event?(e=this.remove(t.data.id,i.sons),this.save(e)):"save"===t.event?this.save(!0):"doc"===t.event?this.docId=t.data:"newDoc"===t.event?$.emit("showAddDocBox",!0,t):(e=this.edit(t,i.sons),void this.save(e))},saveModel:function(){this.readonly=!0,this.$parent.save(!0,this.summary,0)},cancel:function(){this.readonly=!0},editModel:function(){this.readonly=!1},changeTitle:function(t,e){this.data.title=$("input[name='title']",e.$el).val(),e.destory()},save:function(t){this.$parent.save(t,this.summary)}},ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("z-dialog",{attrs:{title:"\u65b0\u5efa\u6587\u6863",width:"540px",visible:t.isShow},on:{"update:visible":function(e){t.isShow=e}}},[i("z-form",{attrs:{"label-width":"100px"}},[i("z-field",{attrs:{label:"\u6587\u6863\u6807\u9898"}},[i("z-input",{attrs:{width:"340px",type:"text"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),i("z-field",{attrs:{label:"\u6587\u6863\u7c7b\u578b"}},[i("z-radio",{attrs:{type:"button"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[i("var",{attrs:{value:"1"}},[t._v("\u6587\u672c")]),t._v(" "),i("var",{attrs:{value:"2"}},[t._v("\u8111\u56fe")]),t._v(" "),i("var",{attrs:{value:"5"}},[t._v("\u6d41\u7a0b\u56fe")]),t._v(" "),i("var",{attrs:{value:"4"}},[t._v("\u76ee\u5f55")])])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{attrs:{plain:""},on:{click:t.toggle}},[t._v("\u53d6 \u6d88")]),t._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("\u786e \u5b9a")])],1)],1)},ie=[];ee._withStripped=!0;var ne={props:["parent"],data:function(){return{type:1,isShow:!1,title:"",item:{},types:[{value:1,title:"\u6587\u672c"},{value:2,title:"\u8111\u56fe"},{value:5,title:"\u6d41\u7a0b\u56fe"},{value:4,title:"\u76ee\u5f55"}]}},mounted:function(){this.$nextTick(function(){$.on("showAddDocBox",this.show)})},methods:{show:function(t,e){this.item=e.data,this.title=e.data.title,this.isShow=t},add:function(){var t={content:"",title:this.item.title,type:this.type,chapterId:this.item.id,parentId:this.parent};if(this.$parent.pid&&(t.isProject="1"),4===this.type){var e={event:"edit",link:"folder",data:this.item.id,uid:zen.user.id,title:this.title};return $.emit("chapterEvt",e),this.toggle()}$.http(t,"/note/add.do",function(t){var e=t.data,i={event:"edit",link:e._id,data:this.item.id,type:this.type,uid:e.uid,title:this.title};$.emit("chapterEvt",i),this.title="",this.toggle(),i={event:"doc",data:e._id},$.emit("chapterEvt",i)},this)},toggle:function(){this.isShow=!this.isShow}}},ae=Object(f.a)(ne,ee,ie,!1,null,null,null);ae.options.__file="doc/repository/addDoc.vue";var se=ae.exports,oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("div",{staticClass:"k-doc-board"},[i("dl",{staticClass:"rep-nav z-left"},[i("dt",{staticClass:"active",on:{click:t.close}},[i("i",{staticClass:"z-icon"},[t._v("\ue5d9")])]),t._v(" "),i("dt",{directives:[{name:"tip",rawName:"v-tip",value:"\u6587\u5e93\u76ee\u5f55",expression:"'\u6587\u5e93\u76ee\u5f55'"}],on:{click:t.nav}},[i("i",{staticClass:"z-icon"},[t._v("\ue8fe")])]),t._v(" "),i("dt",{directives:[{name:"show",rawName:"v-show",value:!t.readonly,expression:"!readonly"},{name:"tip",rawName:"v-tip",value:"\u4fdd\u5b58\u6587\u6863",expression:"'\u4fdd\u5b58\u6587\u6863'"}],on:{click:t.saved}},[i("i",{staticClass:"z-icon"},[t._v("\ue161")])]),t._v(" "),i("dt",{directives:[{name:"tip",rawName:"v-tip",value:"\u9605\u8bfb\u6a21\u5f0f",expression:"'\u9605\u8bfb\u6a21\u5f0f'"}]},[i("a",{attrs:{href:"/view.html?id="+t.itemId,target:"_blank"}},[i("i",{staticClass:"z-icon"},[t._v("\ue8f4")])])]),t._v(" "),i("dd",{staticClass:"z-noselect"},[t._v("\n            "+t._s(t.tooltip)+"\n        ")])]),t._v(" "),i("div",{staticClass:"success"},[t._v(t._s(t.tipMsg))]),t._v(" "),i(t.name,{tag:"component",attrs:{readonly:t.readonly,emitSave:t.emitSave},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),i("div",{staticClass:"doc-nav",class:{show:t.showNav||4===t.value.type}},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.showNav,expression:"showNav"}],staticClass:"z-icon close hover",on:{click:t.nav}},[t._v("\ue14c")]),t._v(" "),i("Nav",{attrs:{value:t.nodes,current:t.itemId}})],1)],1):t._e()},re=[];oe._withStripped=!0;var le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isMD?i("MD",{attrs:{readonly:t.readonly,value:t.item,emitSave:t.emitSave}}):i("Rich",{attrs:{readonly:t.readonly,value:t.item,emitSave:t.emitSave}})],1)},ce=[];le._withStripped=!0;var de=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.readonly,expression:"readonly"}],staticClass:"k-rich-content"},[i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[t._v(t._s(t.item.title))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.item.content)}})])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.readonly,expression:"!readonly"}],staticClass:"k-rich"},[i("textarea",{staticClass:"hide",attrs:{id:"J_Editor",name:"content"},domProps:{value:t.item.content}}),t._v(" "),t._m(0)])])},ue=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"hide",attrs:{id:"J_uploadFile001"}},[i("input",{attrs:{type:"file"}})])}];de._withStripped=!0;var he={props:["value","readonly","emitSave"],data:function(){return{editor:null,isChange:!1,item:{}}},watch:{value:function(t){this.item=t},readonly:function(t){t||this.initEditor()},emitSave:function(t){t&&this.save()}},mounted:function(){this.item=this.value;var t=$(window).height()-50;$(".k-rich-content",this.$el).css("height",t+"px"),this.readonly||this.initEditor()},destroyed:function(){this.editor.destroy()},methods:{initEditor:function(){$.lib(["/tinymce/tinymce.min.js"],this.init)},init:function(){var t=this,e=L.uploadDomain()+"/upload/image.do";tinymce.init({selector:"#J_Editor",statusbar:!1,menubar:!1,auto_focus:!0,language:"zh_CN",body_class:"article-body",plugins:["advlist autolink lists link image charmap emoticons anchor","searchreplace visualblocks","insertdatetime media table paste"],images_upload_url:e,automatic_uploads:!1,toolbar:" undo redo | formatselect | bold italic forecolor backcolor | copy paste cut image link table | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat ",content_css:["//a.yimiyisu.com/zeto/lib/zetoui.css"],save_enablewhendirty:!0,save_onsavecallback:function(){t.save()},init_instance_callback:function(e){e.addShortcut("meta+s","",function(){t.save()})}}).then(function(e){t.editor=e[0],t.template()})},template:function(){var t=this;$.http({_id:this.item._id},"/note/get.do",function(e){t.editor.setContent(e.data.content)},this);var e=0;!function i(){if(e++,$(".tox-toolbar__group").el.length>0){var n=document.createElement("div");n.className="tox-toolbar__group",n.innerHTML='<button class="tox-tbtn markdown">Md</button>',$(".tox-toolbar__group").el[0].before(n),n.addEventListener("click",function(){t.$parent.isMD=!0},!1)}else e<5&&setTimeout(function(){i()},300)}()},save:function(t){this.$parent.save(this.editor.getContent(),t)},change:function(t,e){"oninput"===e&&this.save(!0)}}},ve=Object(f.a)(he,de,ue,!1,null,null,null);ve.options.__file="doc/word/rich.vue";var pe=ve.exports,fe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-md",attrs:{id:"J_md"}},[i("textarea",{staticClass:"hide"}),t._v(" "),i("label",{staticClass:"uploadImage hide"},[i("input",{attrs:{type:"file"},on:{change:t.selectFile}})])])},me=[];fe._withStripped=!0;var _e={props:["value","readonly","emitSave"],data:function(){return{isShow:!1,fileDom:null,editor:null}},watch:{value:function(t){this.editor.value(t.content)},emitSave:function(t){if(t){var e=this.editor.value();this.$parent.save(e)}}},mounted:function(){this.fileDom=$(".uploadImage",this.$el),$.lib(["/note/markdown.css","/note/markdown.js"],this.init)},methods:{init:function(){var t=$("textarea",this.$el).el;this.editor=new mdEditor({element:t[0],spellChecker:!1,saveDoc:this.$parent.save,changeModel:this.changeMode,uploadImage:this.image,status:!1}),this.editor.value(this.value.content)},image:function(t){this.fileDom.trigger("click"),this.isShow=!0},toggle:function(){this.isShow=!this.isShow},selectFile:function(){var t=new window.FormData,e=this,i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var t=i.responseText,n=JSON.parse(t);if(4===n.action)return alert("\u767b\u5f55\u5df2\u5931\u6548");if(23===n.action)return alert(n.message);e.insertImage(n.data),$("input",e.fileDom).val("")}};var n=$("input",this.fileDom)[0].files[0];if(n){t.append("file",n);var a=Config.uploadDomain()+"/upload/image.do";i.open("POST",a,!0),i.send(t)}},insertImage:function(t){this.editor.insertImage(t)},changeMode:function(){this.$parent.isMD=!1,window.localStorage.editorMode="rich"}}},ge=Object(f.a)(_e,fe,me,!1,null,null,null);ge.options.__file="doc/word/markdown.vue";var we={props:["readonly","value","emitSave"],components:{Rich:pe,MD:ge.exports},data:function(){return{isMD:!1,item:null}},created:function(){this.item=this.value,"md"===window.localStorage.editorMode&&(this.isMD=!0)},methods:{save:function(t,e){var i=this.value,n={_id:this.value._id,title:i.title,content:t};n.title||(n.title="\u65b0\u5efa\u6587\u7ae0\u6807\u9898");var a=0;e&&(a=15),$.http(n,"/note/patch.do",function(e){$.notice(e.data,"success"),this.item.content=t},this,a)}}},ye=Object(f.a)(we,le,ce,!1,null,null,null);ye.options.__file="doc/word/index.vue";var ke=ye.exports,xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"z-mind",attrs:{tabindex:"-1"}},[i("Sidebar",{class:{show:!t.readonly},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),t._v(" "),i("div",{staticClass:"k-mind-map",on:{contextmenu:function(e){return t.right(e)}}},[i("Editor"),t._v(" "),i("Tool")],1)],1)},be=[];xe._withStripped=!0;var Ce=i(4),$e=i(5),Se=i(1),ze=i(3),Ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("div",{staticClass:"k-grap-editor",style:t.style,on:{click:t.click}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],domProps:{value:t.title},on:{keydown:t.keyup,blur:t.save,input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("div",{staticClass:"theme",style:{background:t.color},on:{click:t.colorClick}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isColor,expression:"isColor"}],staticClass:"colors"},t._l(t.colors,function(e,n){return i("span",{key:n,class:{active:e===t.color},style:{background:e},on:{click:function(i){return t.select(e)}}})}),0)]):t._e()},Te=[];Ee._withStripped=!0;var Ie={queryNodeById:function(t,e){if(e.id===t)return e;var i,n=e.children;if(n&&n.length>0)for(var a=0;a<n.length;a++)if(i=this.queryNodeById(t,n[a]))return i;return null}},je={props:["current"],data:function(){return{isShow:!1,isColor:!1,node:null,title:null,color:ut.a[0],colors:[],style:"",txt:"",id:""}},mounted:function(){var t=this;this.colors=ut.a,this.$parent.$on("showEditor",function(e,i){t.init(e,i)})},methods:{init:function(t,e){if(!t){if(!1===this.isShow)return;return this.isShow=!1,this.style=Se.a.hideStyle}this.isShow=!0,this.id=e.id,this.isColor=!1;var i=this.$parent,n=e.attrs.x-30,a=e.attrs.y-30,s=e.getBBox().width+60,o=e.getBBox().height+60;s<150&&(s=150),o<110&&(o=110),this.style="top:"+a+"px;left:"+n+"px;width:"+s+"px;height:"+o+"px",this.txt=i.paper.getById("t_"+e.id),this.title=this.txt.attrs.text,this.$nextTick(function(){$("textarea").el[0].focus()})},keyup:function(t){t.stopPropagation();var e=t.keyCode,i=this.$parent;return 27===e?i.emitEditor(!1):13===e?this.save():void 0},save:function(){var t=this.$parent;if(this.txt.attrs.text!==this.title){var e=Ie.queryNodeById(this.id,t.data);if(!e)return;e.name=this.title,t.save()}t.emitEditor(!1)},colorClick:function(){this.isColor=!this.isColor},select:function(t){if(this.color!==t){this.color=t;var e=this.$parent;Ie.queryNodeById(this.id,e.data).color=t,e.save()}},click:function(t){t.stopPropagation()}}},Oe=Object(f.a)(je,Ee,Te,!1,null,null,null);Oe.options.__file="doc/mind/editor.vue";var De=Oe.exports,Ne=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"toolbar"},[t._m(0),t._v(" "),i("div",{staticClass:"tools"},[i("div",{staticClass:"attr"},[t._v("\n            "+t._s(t.grapType[t.grap])+"\n            "),i("div",[i("span",{on:{click:function(e){return t.choseGrapType("1")}}},[t._v(t._s(t.grapType[1]))]),t._v(" "),i("span",{on:{click:function(e){return t.choseGrapType("3")}}},[t._v(t._s(t.grapType[3]))]),t._v(" "),i("span",{on:{click:function(e){return t.choseGrapType("2")}}},[t._v(t._s(t.grapType[2]))]),t._v(" "),i("span",{on:{click:function(e){return t.choseGrapType("4")}}},[t._v(t._s(t.grapType[4]))]),t._v(" "),i("span",{on:{click:function(e){return t.choseGrapType("5")}}},[t._v(t._s(t.grapType[5]))]),t._v(" "),i("span",{on:{click:function(e){return t.choseGrapType("6")}}},[t._v(t._s(t.grapType[6]))])])]),t._v(" "),i("div",{staticClass:"attr"},[t._v("\n            "+t._s(t.lineType[t.line])+"\n            "),i("div",[i("span",{on:{click:function(e){return t.choseLineType("1")}}},[t._v(t._s(t.lineType[1]))]),t._v(" "),i("span",{on:{click:function(e){return t.choseLineType("2")}}},[t._v(t._s(t.lineType[2]))])])])])])},Pe=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"handle"},[i("i",{staticClass:"z-icon"},[t._v("\ue25d")])])}];Ne._withStripped=!0;var Me={props:["value"],data:function(){return{line:1,grap:1,lineType:{1:"\u6298\u7ebf",2:"\u66f2\u7ebf"},grapType:{1:"\u5de6\u53f3",2:"\u5411\u53f3",3:"\u5411\u5de6",4:"\u4e0a\u4e0b",5:"\u5411\u4e0b",6:"\u5411\u4e0a"}}},mounted:function(){this.line=this.value.lineType,this.grap=this.value.grapType,$(this.$el).draggable(".handle")},methods:{choseLineType:function(t){if(this.line!==t){var e=this.$parent;this.line=t,e.data.lineType=t,ze.a.reset(e.data,e.paper)}},choseGrapType:function(t){if(this.grap!==t){var e=this.$parent;this.grap=t,e.data.grapType=t,ze.a.reset(e.data,e.paper)}}}},qe=Object(f.a)(Me,Ne,Pe,!1,null,null,null);qe.options.__file="doc/mind/sidebar.vue";var Je=qe.exports,Be={context:null,add:function(t,e){var i=e.current;if(i){var n=i.id,s={y:0,x:0,top:0,children:[],name:"\u65b0\u5efa\u8282\u70b9",color:null},o=e.data,r=o.ids++;s.id="i"+r,"root"===n?o.children.push(s):a(n,s,o,t),e.save()}},remove:function(t){var e=t.current;if(e){var i=e.id;"root"!==i&&s(i,t.data)&&(t.current=null,t.save())}}},Le={context:null,init:function(t){this.context=t},on:function(t,e){if("addNode"===t)return Be.add(e,this.context);"removeNode"===t&&Be.remove(this.context),"nodeEvent"===t&&this.nodeEvent(e)},nodeEvent:function(t){var e=this.context,i=t.target,n=t.type,a=i.id;if(a&&(!e.readonly||"click"!==n&&"dblclick"!==n)){if("click"===n){if(e.current){if(e.current.id===a)return;e.current.attr({"stroke-width":1,"fill-opacity":.15})}return e.current=i}if("mouseover"===n)return e.current=i,e.emitTool(!0),i.attr({"stroke-width":2,"fill-opacity":.1});if("mouseout"===n)return i.attr({"stroke-width":1,"fill-opacity":.15});if("dblclick"===n){if(!i.id)return;return e.current=i,e.emitEditor(!0)}}},keydown:function(t,e){var i=this.context;if(null!==i.current&&!i.readonly){var n=!0;13===t&&(e.ctrlKey||e.metaKey)&&(n=!1),9===t&&(n=!1),Be.add(n,i)}},keyboard:function(){var t=this;$.on("mindEvt",function(e,i){t.on(e,i)})}},Fe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tool",style:t.style},[t.readonly?t._e():i("span",{staticClass:"z-icon",attrs:{title:"\u6dfb\u52a0"},on:{click:t.add}},[t._v("\ue145")]),t._v(" "),t.readonly?t._e():i("span",{staticClass:"z-icon",attrs:{title:"\u7f16\u8f91"},on:{click:t.edit}},[t._v("\ue3c9")]),t._v(" "),t.readonly?t._e():i("span",{staticClass:"z-icon",attrs:{title:"\u5220\u9664"},on:{click:t.remove}},[t._v("\ue92b")])])},Ue=[];Fe._withStripped=!0;var Ae={data:function(){return{isShow:!1,readonly:!1,style:""}},mounted:function(){var t=this;this.$parent.$on("showTool",function(e,i){t.init(e,i)})},methods:{add:function(t){t.stopPropagation(),$.emit("mindEvt","addNode",!0)},remove:function(t){t.stopPropagation(),$.emit("mindEvt","removeNode",!0)},edit:function(t){t.stopPropagation(),this.$parent.emitEditor(!0)},init:function(t,e){if(!t){if(!1===this.isShow)return;return this.isShow=!1,this.style=Se.a.hideStyle}this.readonly=this.$parent.readonly,this.isShow=!0;var i=e.getBBox(),n=i.y-Se.a.elHeight;this.style="left:"+i.x+"px;top:"+n+"px"}}},He=Object(f.a)(Ae,Fe,Ue,!1,null,null,null);He.options.__file="doc/mind/tool.vue";var Re=He.exports,Qe=i(6),Ve={props:["value","readonly","emitSave"],data:function(){return{current:null,paper:null,data:{id:"root",ids:1,name:"\u65b0\u5efa\u601d\u7ef4\u5bfc\u56fe",children:[],lineType:1,grapType:1,shape:1}}},components:{Node:Node,Editor:De,Sidebar:Je,Tool:Re},watch:{value:function(){this.init()},emitSave:function(t){t&&this.save()}},mounted:function(){$.lib(["/raphael.min.js"],this.init),$(".k-mind-map",this.$el).draggable()},methods:{init:function(){var t=this.value.content;t&&(this.data=JSON.parse(t)),Le.init(this),Raphael.fn.mindLine||(Object(Ce.a)(),Object($e.a)(),Le.keydown(),Le.keyboard());var e=$(".k-mind-map",this.$el);this.paper&&this.paper.clear();var i=this.data,n=Se.a.cavasSize;this.paper=Raphael(e.el[0],n,n),ze.a.init(i,this.paper),Object(Qe.a)(e.el[0])},emitEditor:function(t){this.$emit("showEditor",t,this.current),t&&this.$emit("showTool",!1)},emitTool:function(t){this.$emit("showTool",t,this.current)},save:function(){if(!this.readonly){var t={_id:this.value._id,content:JSON.stringify(this.data)};$.http(t,"/note/patch.do",function(t){this.$parent.tip(t.data)},this,4),ze.a.reset(this.data,this.paper)}},right:function(t){t.preventDefault(),t.stopPropagation()}}},We=Object(f.a)(Ve,xe,be,!1,null,null,null);We.options.__file="doc/mind/index.vue";var Ge=We.exports,Ze=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ke=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-graph"},[i("iframe",{attrs:{id:"J_graphIframe",src:"/doc/flow.html"}})])}];Ze._withStripped=!0;var Xe={props:["value"],watch:{value:function(){this.changeData()}},mounted:function(){var t=this;window.addEventListener("message",function(e){var i=e.data;"graphLoad"===i.type&&t.changeData(),"xmlsave"===i.type&&t.$parent.tip("\u4fdd\u5b58\u5b8c\u6210")},!1)},methods:{changeData:function(){var t=document.getElementById("J_graphIframe"),e=this.value,i={type:"load",content:e.content,id:e._id};t.contentWindow.postMessage(i,"/")}}},Ye=Object(f.a)(Xe,Ze,Ke,!1,null,null,null);Ye.options.__file="doc/graph/index.vue";var ti=Ye.exports,ei=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.value,function(e){return i("div",{key:"nav"+e.id,staticClass:"chapter"},[i("div",{staticClass:"item",class:{active:e.link===t.current},on:{click:function(i){return t.selected(e)}}},[t._v("\n            "+t._s(e.title)+"\n        ")]),t._v(" "),e.sons&&e.sons.length>0?i("Nav",{attrs:{current:t.current,value:e.sons}}):t._e()],1)}),0)},ii=[];ei._withStripped=!0;var ni={props:["value","current"],name:"Nav",methods:{selected:function(t){if(!t.link)return alert(t.title+"\u6587\u6863\u5c1a\u672a\u521b\u5efa");if("folder"!==t.link){var e={event:"doc",data:t.link};$.emit("chapterEvt",e)}}}},ai=Object(f.a)(ni,ei,ii,!1,null,null,null);ai.options.__file="doc/repository/nav.vue";var si={1:"Editor",2:"Mind",3:"Flow",5:"Graph"},oi={1:"\u6309Ctr+S \u7acb\u5373\u4fdd\u5b58\u6587\u6863",2:"\u9009\u4e2d\u8282\u70b9\uff0c\u6309enter\u952e\u6dfb\u52a0\u5b50\u8282\u70b9\uff0ctab\u952e\u6dfb\u52a0\u540c\u7ea7\u8282\u70b9",3:"\u9009\u4e2d\u8282\u70b9\uff0c\u53cc\u51fb\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f\uff0c\u6309del\u952e\u5220\u9664\u8282\u70b9",5:""},ri={props:["itemId","nodes"],components:{Editor:ke,Mind:Ge,Nav:ai.exports,Graph:ti},data:function(){return{isShow:!1,showNav:!1,readonly:!1,emitSave:!1,timerId:1,tipMsg:"",value:null,tooltip:"",name:"Editor"}},watch:{itemId:function(t){this.init(t)}},mounted:function(){this.init(this.itemId)},methods:{init:function(t){if(!t)return this.isShow=!1;$.http({_id:t},"/note/get.do",function(e){$.lockBody(!0);var i=e.data;this.name=si[i.type],this.tooltip=oi[i.type],this.value=i,i&&i.content||(this.readonly=!1),this.isShow=!0;var n=window.location.href;n.indexOf("docId")>-1?(n=$.setParam("docId",t,n),window.history.replaceState(null,i.title,n)):(n=$.setParam("docId",t,n),window.history.pushState(null,i.title,n))},this)},edit:function(){this.readonly=!this.readonly},saved:function(){"Graph"!==this.name?this.emitSave=!0:document.getElementById("J_graphIframe").contentWindow.postMessage({type:"save"},"/")},nav:function(){this.showNav=!this.showNav},close:function(){this.$parent.docId="";var t=$.setParam("docId","");$.lockBody(!1),window.history.replaceState(null,null,t)},tip:function(t){this.tipMsg=t,this.emitSave=!1,clearTimeout(this.timerId);var e=this;this.timerId=setTimeout(function(){e.tipMsg=""},5e3)}}},li=Object(f.a)(ri,oe,re,!1,null,null,null);li.options.__file="doc/repository/board.vue";var ci=li.exports,di=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("z-dialog",{staticClass:"k-repository-set",attrs:{title:"\u77e5\u8bc6\u5e93\u6743\u9650\u8bbe\u7f6e",visible:t.isShow},on:{"update:visible":function(e){t.isShow=e}}},[i("z-form",{attrs:{"label-width":"100px;"}},[i("z-field",{attrs:{label:"\u9605\u8bfb\u6743\u9650"}},[i("z-radio",{model:{value:t.def,callback:function(e){t.def=e},expression:"def"}},[i("var",{attrs:{value:"1"}},[t._v("\u79c1\u6709\u6587\u5e93")]),t._v(" "),i("var",{attrs:{value:"3"}},[t._v("\u540c\u4e8b\u5f00\u653e")]),t._v(" "),i("var",{attrs:{value:"2"}},[t._v("\u5b8c\u5168\u5f00\u653e")])])],1),t._v(" "),i("z-field",{attrs:{label:"\u7f16\u8f91\u4eba\u5458"}},[i("z-button",{attrs:{type:"primary",size:"small"},on:{click:t.showSearch}},[t._v("\u6dfb\u52a0\u7528\u6237")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.searchTag,expression:"searchTag"}],staticClass:"search"},[i("k-user-search",{model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}),t._v(" "),i("div",{staticClass:"action"},[i("z-button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("\u53d6\u6d88")]),t._v(" "),i("z-button",{attrs:{size:"small",type:"primary"},on:{click:t.select}},[t._v("\u786e\u5b9a")])],1)],1)],1),t._v(" "),i("z-field",t._l(t.users,function(e){return i("div",{key:e._id,staticClass:"user"},[i("z-avator",{attrs:{uid:e._id}}),t._v(" "),i("strong",[t._v(t._s(e.nick))]),t._v(" "),i("span",{staticClass:"z-icon hover",on:{click:function(i){return t.remove(e)}}},[t._v("\ue5c9")])],1)}),0)],1)],1)},ui=[];di._withStripped=!0;var hi={props:["note","permision"],data:function(){return{def:"1",users:[],current:{},searchTag:!1,isShow:!1}},watch:{def:function(){var t={_id:this.note,permision:this.def};$.http(t,"/note/patch.do",function(e){this.$parent.chapterData.public=t.permision},this)}},mounted:function(){this.$nextTick(function(){$.on("docSet",this.show)})},methods:{show:function(t){this.isShow=t,this.def=this.permision,this.loadData()},cancel:function(){this.searchTag=!1},select:function(){var t={noteId:this.note,permision:2,uid:this.current.uid};t.uid&&$.http(t,"/note/addUser.do",function(t){this.searchTag=!1,this.loadData()},this)},showSearch:function(){this.searchTag=!0},close:function(){this.$parent.showSet=!1},remove:function(t){$.http({_id:t._id,noteId:this.note},"/note/removeUser.do",function(t){this.loadData()},this)},loadData:function(){$.http({noteId:this.note},"/note/users.do",function(t){this.users=t.data},this)}}},vi=Object(f.a)(hi,di,ui,!1,null,null,null);vi.options.__file="doc/repository/set.vue";var pi={props:["data","summary","pid"],components:{Chapter:Yt,AddDoc:se,Board:ci,Set:vi.exports},data:function(){return{showSet:!1,readonly:!1,docId:null}},mounted:function(){$.on("chapterEvt",this.subscribe);var t=$.getParam("docId");t&&(this.docId=t)},methods:te},fi=Object(f.a)(pi,At,Ht,!1,null,null,null);fi.options.__file="doc/repository/editor.vue";var mi=fi.exports,_i={initData:function(){return{id:3,sons:[{title:"\u6b22\u8fce\u4f7f\u7528",link:"",date:"2016-09-18",id:1,sons:[{title:"\u600e\u4e48\u521b\u5efa",id:3,link:"",date:"2016-09-18",sons:[]}]},{title:"\u5173\u4e8ekooteam",id:2,link:"",date:"2016-09-18",sons:[]}]}}},gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[t._l(t.data,function(e,n){return i("div",{key:e._id,staticClass:"doc-item",class:{active:t.current===e._id},on:{click:function(i){return t.select(e,i)}}},[t._v(t._s(e.title)),i("span",[t._v("\n            "+t._s(t._f("idate")(e._id))+"\n            "),i("z-execute",{staticClass:"z-icon hover",attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",action:"/note/remove.do?_id="+e._source,destory:{index:n,parent:t.data}}},[t._v("\ue5c9")])],1)])}),t._v(" "),t.total>10?i("z-pager",{attrs:{type:"simple",total:t.list.total,target:"list"}}):t._e()],2)},wi=[];gi._withStripped=!0;var yi={data:function(){return{data:[],current:null,total:0}},mounted:function(){$.http(null,"/note/my.do",function(t){var e=t.data;this.data=e.data,this.total=t.total,this.load()||(this.$parent.value=this.data[0])},this)},methods:{remove:function(t){var e=this;$.http({_id:t._source},"/note/remove.do?_id=",function(i){if(0===i.action)for(var n=0;n<e.data.length;n++)if(e.data[n]._source===t._source&&e.data.splice(n,1),e.current===t._id){e.current=t._id,e.$parent.value=t;var a=$.setParam("rid",e.data[0]._id);window.history.replaceState(null,null,a),e.load()}})},select:function(t){if(this.current!==t._id){this.current=t._id,this.$parent.value=t;var e=$.setParam("rid",t._id);window.history.replaceState(null,null,e)}},load:function(){var t=$.getParam("rid");return!!t&&(this.current=t,$.http({_id:t},"/get/note.json",function(t){this.$parent.value=t.data},this),!0)}}},ki=Object(f.a)(yi,gi,wi,!1,null,null,null);ki.options.__file="doc/tree.vue";var xi={data:function(){return{chapterData:{},content:null,value:null}},watch:{value:function(t){t&&(this.chapterData=t,this.loadContent(t._id,_i.initData()))}},components:{Editor:mi,Tree:ki.exports},methods:{save:function(t,e,i){if(!t)return!1;void 0===i&&(i=3);var n={_id:this.chapterData._id,content:JSON.stringify(e)};$.http(n,"/note/patch.do",function(t){0===t.action&&$.notice(t.data,"success")},this,i)},loadContent:function(t,e){t&&$.http({_id:t},"/extend/note.json",function(t){var i=t.data;i.content?this.content=JSON.parse(i.content):this.content=e},this)}}},bi=Object(f.a)(xi,Ft,Ut,!1,null,null,null);bi.options.__file="doc/index.vue";var Ci=bi.exports,$i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("i",{staticClass:"z-icon search-icon hover",on:{click:t.click}},[t._v("\ue8b6")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"search-dialog"})])},Si=[];$i._withStripped=!0;var zi={data:function(){return{show:!1}},methods:{click:function(){this.show=!this.show}}},Ei=Object(f.a)(zi,$i,Si,!1,null,null,null);Ei.options.__file="doc/search.vue";var Ti=Ei.exports,Ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"z-1"},[i("div",{staticClass:"z-row header"},[i("div",{staticClass:"z-20"},[t._v("\u76d8\u53e4\u9879\u76ee\u7518\u7279\u56fe"),i("i",{staticClass:"z-icon add",on:{click:t.add}},[t._v("\ue148")])]),t._v(" "),i("div",{staticClass:"z-4",on:{click:t.startPosition}},[t._v(t._s(t.now.date)),i("i",{staticClass:"z-icon hover"},[t._v("\ue0c8")])])]),t._v(" "),i("div",{staticClass:"table-fixed"},[i("span",{staticClass:"z-icon prev"},[t._v("\ue408")]),t._v(" "),i("span",{staticClass:"z-icon next"},[t._v("\ue409")]),t._v(" "),i("div",{staticClass:"wrap",attrs:{id:"J_wrap"}},[i("table",[i("thead",[i("Scale",{attrs:{data:t.scales,start:t.start}})],1),t._v(" "),i("tbody",t._l(t.things,function(e,n){return i("Thing",{key:e._id,attrs:{time:t.time,start:t.start,scales:t.scales},model:{value:t.things[n],callback:function(e){t.$set(t.things,n,e)},expression:"things[idx]"}})}),1)])])]),t._v(" "),i("k-todo-add",{attrs:{visible:t.isShow}})],1)},ji=[];Ii._withStripped=!0;var Oi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[t._m(0),t._v(" "),i("td",{key:"scale",class:{weekend:t.start.isWeekend,month:t.start.isFirst}},[t._v(t._s(t.start.text)+"\n    ")]),t._v(" "),t._l(t.data,function(e,n){return i("td",{key:"scale"+n,class:{weekend:e.isWeekend,month:e.isFirst}},[t._v(t._s(e.text)+"\n    ")])})],2)},Di=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",[i("span",[t._v("\u6240\u6709\u4e8b\u9879")])])}];Oi._withStripped=!0;var Ni={props:["data","start"],data:function(){return{list:[]}},created:function(){}},Pi=Object(f.a)(Ni,Oi,Di,!1,null,null,null);Pi.options.__file="plan/scale.vue";var Mi=Pi.exports,qi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{class:{empty:0===t.data.start}},[i("th",[i("div",{staticClass:"thing"},[t._v(t._s(t.data.title))])]),t._v(" "),i("td",{key:"thing"+t.data._id,class:{weekend:t.start.isWeekend},attrs:{date:t.start.date}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.data.start>0,expression:"data.start>0"},{name:"tip",rawName:"v-tip",value:"\u65f6\u95f4\u63d0\u793a",expression:"'\u65f6\u95f4\u63d0\u793a'"}],class:"scale "+t.data.quadrant,style:t.css,on:{dblclick:t.show}})]),t._v(" "),t._l(t.scales,function(e,n){return i("td",{key:"thing"+t.data._id+n,class:{weekend:e.isWeekend},on:{click:function(e){return t.addDate(n)}}})})],2)},Ji=[];qi._withStripped=!0;var Bi={props:["scales","value","length","start","time"],data:function(){return{data:{},lefe:0,width:0,css:""}},created:function(){this.data=this.value,this.left=45*(Math.floor((this.data.start-this.time)/86400)+60),this.width=45*(this.data.end-this.data.start)/86400,this.css="left:"+this.left+"px;width:"+this.width+"px"},methods:{addDate:function(t){if($(this.$el).hasClass("empty")){var e=45*(t+1);this.data.start=86400*(t-59)+this.time,this.css="left:"+e+"px;width:45px",this.save(e,45)}},show:function(){$.emit("thingDetail",this.data)},save:function(t,e){this.left=t,this.width=e;var i=86400*(t/45-60)+this.time;isNaN(i)||(this.data.start=i,this.data.end=e/45*86400+i,$.http(this.data,"/thing/patch.do",function(){},this))}}},Li=Object(f.a)(Bi,qi,Ji,!1,null,null,null);Li.options.__file="plan/thing.vue";var Fi={props:["value"],data:function(){return{scales:[],things:[],length:180,isShow:!1,now:{},time:0,start:{}}},components:{Scale:Mi,Thing:Li.exports},mounted:function(){this.projectId=$.getParam("id"),$.http({projectId:this.projectId},"/select/thingByprojectId.json",function(t){t.data&&(this.things=t.data.data)},this),this.initScale(),this.$nextTick(function(){this.startPosition()})},methods:{add:function(){this.isShow=!0},addThing:function(t){t.start=0,t.end=0,this.things.unshift(t)},startPosition:function(){$("#J_wrap").scrollLeft(2520)},initScale:function(){var t,e=-parseInt(this.length/3),i=new Date;this.time=parseInt(i.getTime()/1e3),this.now=this.createScale(i),i.setDate(e);for(var n=0;n<this.length;n++)i.setDate(i.getDate()+1),t=this.createScale(i),0===n?this.start=t:this.scales.push(t)},createScale:function(t){var e,i,n;return i=t.getDate(),e={date:null,month:t.getMonth()+1,text:null,isWeekend:!1,isFirst:!1},e.date=t.getFullYear()+"-"+e.month+"-"+i,1===i?(e.isFirst=!0,e.text=e.month+"\u6708"):(i<10&&(i="0"+i),e.text=i),0!==(n=t.getDay())&&6!==n||(e.isWeekend=!0),e}}},Ui=Object(f.a)(Fi,Ii,ji,!1,null,null,null);Ui.options.__file="plan/index.vue";var Ai=Ui.exports,Hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("z-dialog",{attrs:{title:"\u6dfb\u52a0\u5f85\u529e",size:"size",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[i("z-input",{attrs:{type:"textarea",placeholder:"\u8bf7\u8f93\u5165\u5f85\u529e\u5185\u5bb9",width:"100%",size:"small"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),i("div",{staticClass:"k-cal-add"},[i("div",{staticClass:"config-item"},[i("div",[i("i",{staticClass:"z-icon"},[t._v("\ue228")]),t._v("\u4f18\u5148\u7ea7:")]),t._v(" "),i("div",{staticStyle:{margin:"0 10px"}},[i("Priority",{model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)]),t._v(" "),t.isCal?t._e():i("div",{staticClass:"config-item"},[i("div",[i("i",{staticClass:"z-icon"},[t._v("\ue7fc")]),t._v("\u8d1f\u8d23\u4eba:")]),t._v(" "),i("div",{staticStyle:{margin:"0 10px"}},[i("div",{staticClass:"user-info",on:{click:t.show}},[t._v("\n                    "+t._s(t.user.nick)+"\n                ")]),t._v(" "),t.isShow?i("k-user-search",{attrs:{fixed:"true",my:"true"},on:{blur:t.blur},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}):t._e()],1)])]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("z-button",{on:{click:t.close}},[t._v("\u53d6\u6d88")]),t._v(" "),i("z-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("\u786e\u5b9a")])],1)],1)},Ri=[];Hi._withStripped=!0;var Qi={props:["value","visible","isCal"],data:function(){return{quadrant:"a",title:"",user:{},isShow:!1,item:{quadrant:"a"}}},components:{Priority:wt},watch:{user:function(t){this.user=t,this.isShow=!1}},created:function(){var t=zen.user;this.user={userId:t.id,nick:t.nick}},methods:{close:function(){this.isCal&&this.$parent.addThing(null),this.$parent.isShow=!1},show:function(){this.isShow=!0},blur:function(){this.isShow=!1},submit:function(){if(!this.title)return alert("\u5f85\u529e\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var t={quadrant:this.item.quadrant,title:this.title,projectId:"",onwer:this.user.userId,tag:""};if(this.isCal){var e=parseInt(this.value.start.start.getTime()/1e3),i=parseInt(this.value.start.end.getTime()/1e3);t.start=e;var n=i-e;(n>86400||n<43200)&&(t.end=i)}this.$parent.projectId&&(t.projectId=this.$parent.projectId),$.http(t,"/thing/put.do",function(e){t._id=e.data._id,this.$parent.addThing(t),this.close(),this.title=""},this)},select:function(t){this.quadrant=t}}},Vi=Object(f.a)(Qi,Hi,Ri,!1,null,null,null);Vi.options.__file="todo/add.vue";var Wi=Vi.exports,Gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{on:{click:t.login}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDD&&t.timer,expression:"isDD&&timer"}],staticStyle:{width:"150px",margin:"20px auto"}},[t.checkId?i("input",{attrs:{type:"hidden",id:"J_qrId"},domProps:{value:t.checkId}}):t._e(),t._v(" "),i("div",{staticClass:"qr"})]),t._v(" "),i("div",{staticClass:"z-link"},[t._t("default")],2)])},Zi=[];Gi._withStripped=!0;var Ki={props:["timer","showTip","type"],data:function(){return{timerId:null,isDD:!1,checkId:null,isShow:!1}},mounted:function(){if(this.type&&(this.isDD=!0,this.timer&&$.http(null,"/ding/qr.do",function(t){var e=$(".qr",this.$el),i=t.data,n=i.host+"/ding/home.wap?checkId="+i.checkId;new QRCode(e[0],{width:150,height:150}).makeCode(n),this.checkId=i.checkId},this)),this.timer){var t=this;this.timerId=setInterval(function(){t.login()},1e3*this.timer)}else this.login()},destroyed:function(){clearInterval(this.timerId)},methods:{login:function(){var t,e=$("#J_qrId").val();if(this.isDD)t="/ding/checkLogin.do";else{var i="//bridge.kooteam.com";"daily"===zen.env&&(i="//bridge.dev.zeto.me"),t=i+"/weixin/checkLogin.do"}$.http({id:e},t,function(t){if(!t.hasError){this.timerId&&(clearInterval(this.timerId),this.timerId=null);var e=window.localStorage.config,i="/todo/home.htm";e&&e.home&&(i=(e=JSON.parse(e)).home),window.location=i}},this)}}},Xi=Object(f.a)(Ki,Gi,Zi,!1,null,null,null);Xi.options.__file="common/checkLogin.vue";var Yi=Xi.exports,tn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"z-1",staticStyle:{background:"#fff"}},[t.isLoad?i("Editor",{attrs:{pid:t.id,data:t.data,summary:t.content}}):t._e()],1)},en=[];tn._withStripped=!0;var nn={data:function(){return{isLoad:!1,id:null,data:{}}},components:{Editor:mi},mounted:function(){this.id=$.getParam("id"),$.http({id:this.id},"/project/chapter.do",function(t){var e=t.data;e.content?this.content=JSON.parse(e.content):this.content=_i.initData(),this.data={_id:this.id,title:e.title+"-\u6587\u6863"},this.isLoad=!0},this)},methods:{save:function(t,e,i){if(void 0===i&&(i=3),!t)return!1;var n={_id:this.id,content:JSON.stringify(e)};$.http(n,"/project/saveDoc.do",function(t){0===i&&$.notice(t.data,"success")},this,i)}}},an=Object(f.a)(nn,tn,en,!1,null,null,null);an.options.__file="doc/project.vue";var sn=an.exports,on=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"z-1"},[i("div",{staticClass:"k-board-detail",on:{click:t.hideUserSearch}},[i("z-draggable",{staticClass:"k-board-column",attrs:{list:t.columns},on:{end:t.save}},t._l(t.columns,function(e){return i("Column",{key:e.tag+t.projectId,attrs:{now:t.now,data:e}})}),1),t._v(" "),i("Add")],1)])},rn=[];on._withStripped=!0;var ln=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column",attrs:{"data-id":t.things.tag}},[i("div",{staticClass:"header"},[t.isAddThing?i("AddThing",{attrs:{data:t.things},on:{changeCategory:t.addTing}}):t._e(),t._v(" "),i("div",{staticClass:"h4"},[t.isEdit?i("input",{attrs:{maxlength:"12",type:"text"},domProps:{value:t.things.title},on:{blur:t.rename,keyup:t.keyup}}):i("div",[t._v("\n                "+t._s(t.things.title)+"\n                "),i("i",{staticClass:"z-icon hover plus",on:{click:t.add}},[t._v("\ue148")])]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!isEdit"}],staticClass:"z-icon hover do",on:{click:t.focus}},[t._v("\ue313")]),t._v(" "),t.showAction?i("div",{staticClass:"action",attrs:{tabindex:"-1"},on:{blur:t.blur}},[i("span",{on:{click:t.renameClk}},[t._v("\u91cd\u547d\u540d")]),t._v(" "),i("z-confirm",{attrs:{tip:"\u786e\u5b9a\u5220\u9664\u5417"},on:{click:t.remove}},[t._v("\u5220\u9664")])],1):t._e()])],1),t._v(" "),i("div",{staticClass:"things",attrs:{"data-id":t.things.tag}},[i("z-draggable",{attrs:{list:t.things.sons,group:"things"},on:{add:t.begin,end:t.end}},t._l(t.things.sons,function(e){return i("Thing",{key:e._id,attrs:{data:e,now:t.now,drag:"board"}})}),1),t._v(" "),t.things.sons&&0!==t.things.sons.length?t._e():i("div",{staticClass:"empty"},[t._v("\u6682\u65e0\u5f85\u529e\u4e8b\u9879")])],1)])},cn=[];ln._withStripped=!0;var dn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-board-add"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",maxlength:"60",placeholder:"\u8bf7\u8f93\u5165\u8981\u5904\u7406\u7684\u4efb\u52a1"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("div",{staticClass:"owner"},[t._v("\u8d1f\u8d23\u4eba\uff1a\n        "),i("div",{staticClass:"avator",on:{click:function(e){return e.stopPropagation(),t.userShow(e)}}},[i("z-avator",{attrs:{uid:t.uid}}),t._v(" "),i("span",[t._v(t._s(t.nick))])],1),t._v(" "),t.isShow?i("k-user-search",{attrs:{my:"true"},on:{blur:t.userBlur},model:{value:t.owner,callback:function(e){t.owner=e},expression:"owner"}}):t._e()],1),t._v(" "),i("div",{staticClass:"prority"},[i("span",{staticClass:"title"},[t._v("\u4f18\u5148\u7ea7\uff1a")]),t._v(" "),t._l(t.prorityData,function(e){return i("label",{class:"k-prority "+e.key,on:{click:function(i){return t.select(e,i)}}})})],2),t._v(" "),i("div",{staticClass:"btns"},[i("z-button",{attrs:{plain:"",size:"mini"},on:{click:t.close}},[t._v("\u53d6\u6d88")]),t._v(" "),i("z-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:t.save}},[t._v("\u4fdd\u5b58")])],1)])},un=[];dn._withStripped=!0;var hn=[{key:"a",title:"\u91cd\u8981\u4e14\u7d27\u6025"},{key:"b",title:"\u91cd\u8981\u4e0d\u7d27\u6025"},{key:"c",title:"\u7d27\u6025\u4e0d\u91cd\u8981"},{key:"d",title:"\u4e0d\u91cd\u8981\u4e0d\u7d27\u6025"}],vn={props:["data"],data:function(){return{title:"",owner:null,uid:"",nick:"",prority:"",prorityData:hn,isShow:!1}},watch:{owner:function(t){this.nick=t.nick,this.uid=t.userId,this.isShow=!1}},mounted:function(){this.nick="\u6211\u81ea\u5df1",this.uid=zen.user.id,this.$parent.$parent.$on("hideUserSearch",this.userBlur)},methods:{userShow:function(){this.isShow=!0},userBlur:function(){this.isShow&&(this.isShow=!1)},select:function(t,e){t.key!==this.prority&&(this.prority=t.key,$(".k-prority",this.$el).removeClass("active"),$(e.currentTarget).addClass("active"))},save:function(){if(!this.title)return alert("\u4efb\u52a1\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");var t={title:this.title,tag:this.data.tag,projectId:$.getParam("id"),quadrant:"b",status:0};this.prority&&(t.quadrant=this.prority),this.owner&&(t.owner=this.owner.uid),$.http(t,"/thing/put.do",function(e){var i=e.data;parent.columns;t._id=i._id,this.$emit("changeCategory",t),this.close()},this)},close:function(){this.$parent.isAddThing=!1}}},pn=Object(f.a)(vn,dn,un,!1,null,null,null);pn.options.__file="board/addThing.vue";var fn={props:["data","now"],components:{Thing:x,AddThing:pn.exports},data:function(){return{things:{},currentId:"",title:"",isAddThing:!1,isEdit:!1,showAction:!1}},mounted:function(){this.things=this.data},methods:{begin:function(t){t.pullMode&&this.drag(t)},end:function(t){t.pullMode||t.newIndex===t.oldIndex||this.drag(t)},drag:function(t){var e=t.newIndex,i=this.things.sons[e],n={_id:i._id,tag:i.tag};if(0===e)if(1===this.things.sons.length)n.order=1e5;else{var a=this.things.sons[e+1];n.order=a.order-500}else if(e===this.things.sons.length){var s=this.things.sons[e-1];n.order=s.order+500}else{var o=this.things.sons[e+1],r=this.things.sons[e-1];n.order=parseInt((o.order+r.order)/2)}$.http(n,"/thing/patch.do",function(t){},this)},blur:function(){this.showAction=!1},add:function(){this.isAddThing=!0,this.$nextTick(function(){$("textarea",this.$el).el[0].focus()})},focus:function(){this.showAction=!0,this.$nextTick(function(){$(".action",this.$el).el[0].focus()})},renameClk:function(){this.isEdit=!0,this.$nextTick(function(){$("input",this.$el).focus()})},keyup:function(t){var e=t.keyCode;if(27===e)return this.blur();13===e&&this.rename(t)},rename:function(t){var e=$(t.currentTarget).val(),i=this.$parent.columns;if(e&&(this.isEdit=!1,e!==this.things.title)){for(var n=0;n<i.length;n++)i[n].tag===this.things.tag&&(i[n].title=e);this.$parent.save()}},sort:function(t,e){b.sort(t,e,this.things.sons)},addTing:function(t){this.things.sons.unshift(t)},remove:function(){for(var t,e=this.$parent.columns,i=0;i<e.length;i++)if((t=e[i]).tag===this.things.tag){t=e.splice(i,1)[0];break}this.$parent.save(),t.sons.length>0&&e.length>0&&$.refresh()}}},mn=Object(f.a)(fn,ln,cn,!1,null,null,null);mn.options.__file="board/column.vue";var _n=mn.exports,gn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add"},[i("div",{staticClass:"wrap"},[t.isEdit?i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{maxlength:"12",type:"text"},domProps:{value:t.title},on:{keyup:t.keyup,input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("div",{staticClass:"btn"},[i("z-button",{attrs:{size:"mini"},on:{click:t.cancel}},[t._v("\u53d6\u6d88")]),t._v(" "),i("z-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:t.save}},[t._v("\u4fdd\u5b58")])],1)]):i("div",{staticClass:"tip",on:{click:t.focus}},[i("i",{staticClass:"z-icon"},[t._v("\ue145")]),t._v("\u65b0\u5efa\u4efb\u52a1")])])])},wn=[];gn._withStripped=!0;var yn={data:function(){return{title:"",isEdit:!1}},methods:{focus:function(){this.isEdit=!0},cancel:function(){this.isEdit=!1},keyup:function(t){var e=t.keyCode;if(27===e)return this.cancel();13===e&&this.save()},save:function(){if(!this.title)return alert("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a");var t=this.$parent;t.rndId++;var e={title:this.title,tag:"t"+t.rndId,sons:[]};t.columns.push(e),this.title="",this.cancel(),t.save()}}},kn=Object(f.a)(yn,gn,wn,!1,null,null,null);kn.options.__file="board/add.vue";var xn=[{title:"\u4ea7\u54c1\u89c4\u5212",tag:"t1",sons:[]},{title:"\u524d\u7aef\u5f00\u53d1",tag:"t2",sons:[]},{title:"\u540e\u7aef\u5f00\u53d1",tag:"t3",sons:[]},{title:"\u6d4b\u8bd5",tag:"t4",sons:[]},{title:"\u53d1\u5e03",tag:"t5",sons:[]},{title:"\u5176\u5b83",tag:"t6",sons:[]}],bn={props:["value"],data:function(){return{projectId:"",now:0,data:{},columns:[]}},watch:{value:function(){this.init()}},components:{Column:_n,Add:kn.exports},mounted:function(){this.init()},destroyed:function(){$.lockBody(!1)},methods:{hideUserSearch:function(){this.$emit("hideUserSearch",!0)},init:function(){var t=this;this.columns=[],this.projectId=$.getParam("id");var e=new Date,i=this.value;if(this.now=e.getTime()%1e3,i.board){var n=JSON.parse(i.board);this.rndId=n.id,this.columns=n.content}else this.rndId=zen.id(),this.columns=xn;var a=310*this.columns.length+360;$(".k-board-detail",this.$el).css("width",a+"px"),$(".k-board-column",this.$el).css("width",310*this.columns.length+"px");for(var s=0;s<this.columns.length;s++)this.columns[s].sons=[];var o=i.things;o&&0!==o.length&&(o.forEach(function(e){var i=t.getColumn(e.tag);1===e.status?i.sons.push(e):i.sons.unshift(e)}),"\u672a\u5f52\u7c7b"===this.columns[0].tag&&0===this.columns[0].length&&this.columns.splice(0,1),this.$nextTick(function(){$.lockBody(!0);var t=$(window).height()-150;t<680&&$("#J_app .k-project-toolbar").css("min-height",t+"px"),$(".column",this.$el).css("height",t+"px"),this.resize()}))},resize:function(){var t=300*(this.columns.length+2)+20;$(".k-board-detail",this.$el).css("width",t+"px")},getColumn:function(t){for(var e,i=0;i<this.columns.length;i++)if((e=this.columns[i]).tag===t)return e;if("\u672a\u5f52\u7c7b"===this.columns[0].tag)return this.columns[0];var n={tag:"\u672a\u5f52\u7c7b",title:"\u672a\u5f52\u7c7b",sons:[]};return this.columns.unshift(n),this.columns[0]},save:function(t){if(!t.pullMode&&t.newIndex!==t.oldIndex){var e={id:this.rndId,content:[]};this.columns.forEach(function(t){e.content.push({title:t.title,tag:t.tag,sons:[]})});var i={_id:this.projectId,board:JSON.stringify(e)};$.http(i,"/patch/project.json",function(){this.resize()},this)}}}},Cn=Object(f.a)(bn,on,rn,!1,null,null,null);Cn.options.__file="board/index.vue";var $n=Cn.exports,Sn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"k-user-search z-form",class:{fixed:t.fixed},on:{click:function(e){return e.stopPropagation(),t.stop(e)}}},[i("z-input",{attrs:{value:t.keyword,name:"keyword",placeholder:"\u8f93\u5165\u6635\u79f0\u5173\u952e\u5b57\u641c\u7d22",type:"text"}}),t._v(" "),i("div",[t._l(t.users,function(e){return i("label",{key:e.uid,staticClass:"item",on:{click:function(i){return t.select(e,i)}}},[i("z-avator",{attrs:{uid:e.uid}}),t._v(" "),i("div",[t._v(t._s(e.nick))])],1)}),t._v(" "),t.name?i("input",{attrs:{name:t.name,type:"hidden"},domProps:{value:t.uid}}):t._e()],2),t._v(" "),t.localApp&&t.loaded&&0===t.users.length?i("div",{staticStyle:{"text-align":"center"}},[i("div",[t._v("\u6ca1\u6709\u641c\u7d22\u5230\u76f8\u5173\u597d\u53cb\uff0c\u53ef\u4ee5\u7528\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801\u6dfb\u52a0\u597d\u53cb")]),t._v(" "),i("img",{attrs:{width:"180",src:"//a.yimiyisu.com/kooteam/friend.png"}})]):t._e()],1)},zn=[];Sn._withStripped=!0;var En={props:["name","max","value","my","fixed"],data:function(){return{keyword:"",loaded:!1,uid:"",history:{},localApp:!0,users:[]}},watch:{keyword:function(){this.load()}},mounted:function(){this.localApp=!!window.localApp;var t=window.localStorage.userCache;t&&(this.history=JSON.parse(t));for(var e in this.history){var i={uid:e,nick:this.history[e]};this.users.push(i)}if(this.my){var n={uid:zen.user.id,nick:"\u6211\u81ea\u5df1"};this.users.unshift(n)}},methods:{stop:function(){},err:function(t){$(t.currentTarget).attr("src","https://img.yimiyisu.com/avator.jpg")},select:function(t,e){e.stopPropagation();var i=$(e.currentTarget);i.hasClass("selected")?(i.removeClass("selected"),this.uid="",this.$emit("input",null)):($(".selected",this.$el).removeClass("selected"),i.addClass("selected"),this.uid=t.uid,this.uid!==zen.user.id&&(this.history[t.uid]=t.nick),window.localStorage.userCache=JSON.stringify(this.history),this.$emit("input",t))},load:function(){$.http({keyword:this.keyword,size:6},"/user/searchFriend.do",function(t){if(t.data?this.users=t.data:this.users=[],this.loaded=!0,this.my){var e=zen.user,i={_id:"my",uid:e.id,nick:e.nick};this.users.unshift(i)}},this)}}},Tn=Object(f.a)(En,Sn,zn,!1,null,null,null);Tn.options.__file="common/userSearch.vue";var In=Tn.exports,jn=function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.name,{tag:"component",attrs:{value:t.value}})},On=[];jn._withStripped=!0;var Dn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[t._l(t.imgs,function(e){return i("div",{staticClass:"skin",class:{active:e===t.def},on:{click:function(i){return t.select(e)}}},[i("img",{attrs:{src:"//a.yimiyisu.com/kooteam/bg/"+e+".jpg"}})])}),t._v(" "),i("input",{attrs:{type:"hidden",name:"skin"},domProps:{value:t.def}})],2)},Nn=[];Dn._withStripped=!0;var Pn={props:["value","data"],data:function(){return{imgs:[1,2,3,4,5,6,7,8,9,10],def:3}},mounted:function(){this.value&&(this.def=this.value)},methods:{select:function(t){this.def=t;var e="//a.yimiyisu.com/kooteam/bg/"+t+".jpg";$("body").css("background-image","url('"+e+"')")}}},Mn=Object(f.a)(Pn,Dn,Nn,!1,null,null,null);Mn.options.__file="system/components/skin.vue";var qn=Mn.exports,Jn=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\u6b63\u5728\u9000\u51fa\uff0c\u8bf7\u7a0d\u7b49...")])},Bn=[];Jn._withStripped=!0;var Ln={mounted:function(){var t="//bridge.kooteam.com";"daily"===zen.env&&(t="//bridge.dev.zeto.me");var e=t+"/home/logout.do";zen.mode>2&&(e="/home/quit.do"),$.http(null,e,function(){window.localStorage.removeItem("config"),document.cookie="",window.location="/home.html"})}},Fn=Object(f.a)(Ln,Jn,Bn,!1,null,null,null);Fn.options.__file="system/components/logout.vue";var Un=Fn.exports,An=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},t._l(t.value,function(e){return i("Thing",{key:e._id,attrs:{now:t.now,data:e}})}),1)},Hn=[];An._withStripped=!0;var Rn={props:["value"],components:{Thing:x},data:function(){return{list:[],now:0}},created:function(){var t=new Date;this.now=t.getTime()%1e3}},Qn=Object(f.a)(Rn,An,Hn,!1,null,null,null);Qn.options.__file="system/components/things.vue";var Vn=Qn.exports,Wn=function(){var t=this,e=t.$createElement;return(t._self._c||e)("z-submit",{attrs:{action:"/patch/user.json"},on:{finish:t.finish}},[t._v("\u4fdd\u5b58")])},Gn=[];Wn._withStripped=!0;var Zn={props:["value"],methods:{finish:function(t){var e=t.data;zen.user.calendar=e.calendar,zen.user.home=e.home,window.localStorage.config=""}}},Kn=Object(f.a)(Zn,Wn,Gn,!1,null,null,null);Kn.options.__file="system/components/set.vue";var Xn={props:["name","value"],components:{skin:qn,logout:Un,things:Vn,set:Kn.exports}},Yn=Object(f.a)(Xn,jn,On,!1,null,null,null);Yn.options.__file="system/index.vue";var ta=Yn.exports,ea=function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.name,{tag:"component",attrs:{value:t.value}})},ia=[];ea._withStripped=!0;var na=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{on:{click:t.click}},[i("li",[i("z-execute",{attrs:{type:"text",action:"/project/favi.do?projectId="+t.id}},[t._v("\u6536\u85cf")])],1),t._v(" "),i("li",[i("z-wicket",{attrs:{type:"text",view:"J_edit",prop:t.value,size:"small",title:"\u91cd\u547d\u540d",action:"/project/edit.do"}},[t._v("\u91cd\u547d\u540d\n        ")])],1),t._v(" "),t.isOnwer?i("li",[i("z-wicket",{attrs:{type:"text",view:"J_trans",size:"small",prop:t.value,title:"\u8bf7\u9009\u62e9\u7528\u6237",action:"/project/trans.do"}},[t._v("\n            \u8f6c\u4ea4\u9879\u76ee\n        ")])],1):t._e(),t._v(" "),t.isOnwer?i("li",[i("z-execute",{attrs:{type:"text",tip:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",action:"/project/remove.do?_id="+t.id}},[t._v("\u5220\u9664")])],1):t._e(),t._v(" "),t.isOnwer?t._e():i("li",[i("z-execute",{attrs:{type:"text",action:"/project/quit.do?projectId="+t.id}},[t._v("\u9000\u51fa")])],1)])},aa=[];na._withStripped=!0;var sa={props:["value"],data:function(){return{id:"",isOnwer:!1}},mounted:function(){this.id=this.value._id;var t=zen.user.id;this.value.owner===t&&(this.isOnwer=!0)},methods:{click:function(t){t.stopPropagation()}}},oa=Object(f.a)(sa,na,aa,!1,null,null,null);oa.options.__file="project/action.vue";var ra={props:["name","value"],components:{action:oa.exports}},la=Object(f.a)(ra,ea,ia,!1,null,null,null);la.options.__file="project/index.vue";var ca=la.exports,da=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.check?t._e():i("div",{staticClass:"k-login"},[t.isQr?i("QR",{model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}):t._e(),t._v(" "),t.isQr?t._e():i("Password",{attrs:{target:t.target},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}}),t._v(" "),t.isQr?i("span",{staticClass:"z-red hover",on:{click:t.change}},[t._v("\u5207\u6362\u5230\u8d26\u6237\u767b\u9646")]):t._e(),t._v(" "),!t.isQr&&t.hasQr?i("span",{staticClass:"z-red hover",on:{click:t.change}},[t._v("\u5207\u6362\u5230\u626b\u7801\u767b\u9646")]):t._e()],1)},ua=[];da._withStripped=!0;var ha=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("z-form",{attrs:{"label-width":"100px"}},[i("z-field",{attrs:{label:"\u7528\u6237\u540d"}},[i("z-input",{model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),t._v(" "),i("z-field",{attrs:{label:"\u767b\u5f55\u5bc6\u7801"}},[i("z-input",{attrs:{"show-password":""},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1),t._v(" "),i("z-field",[i("z-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("\u63d0\u4ea4")])],1)],1)},va=[];ha._withStripped=!0;var pa={props:["value","target"],data:function(){return{user:"",pwd:""}},mounted:function(){},methods:{submit:function(){$.http({user:this.user,pwd:this.pwd},"/login/checkPwd.do",function(t){t.hasError||(window.location=this.target)},this)}}},fa=Object(f.a)(pa,ha,va,!1,null,null,null);fa.options.__file="login/password.vue";var ma=fa.exports,_a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["dd"===t.value.qr?i("div",[t._v("\u8bf7\u7528\u9489\u9489\u626b\u7801\u4e8c\u7ef4\u7801")]):t._e(),t._v(" "),"wechat"===t.value.qr?i("div",[t._v("\u8bf7\u7528\u4f01\u4e1a\u5fae\u4fe1\u626b\u7801\u4e8c\u7ef4\u7801")]):t._e(),t._v(" "),i("div",{staticClass:"qr"})])},ga=[];_a._withStripped=!0;var wa={props:["value"],mounted:function(){var t=$(".qr",this.$el).el,e=this.value,i=e.host+"?checkId="+e.checkId;new QRCode(t[0],{width:150,height:150}).makeCode(i)}},ya=Object(f.a)(wa,_a,ga,!1,null,null,null);ya.options.__file="login/qr.vue";var ka={props:["check","timer"],components:{Password:ma,QR:ya.exports},data:function(){return{isQr:!1,hasQr:!1,params:null,target:"/todo/home.htm",timerId:null}},mounted:function(){this.check?this.status():$.http(null,"/login/type.do",function(t){var e=t.data;this.params=e,e&&e.qr&&(this.isQr=!0,this.hasQr=!0,this.timerId=setInterval(this.checkId,2e3))},this)},destory:function(){clearInterval(this.timerId)},methods:{change:function(){this.isQr=!this.isQr},checkId:function(){var t=this.params.checkId;t&&$.http({checkId:t},"/login/checkId.do",function(t){t.hasError||(window.location.href=this.target)},this)},status:function(){$.http(null,"/login/checkStatus.do",function(t){if(!t.hasError){var e=this.target,i=t.data;i&&i.home&&(e=i.home),window.location=e}},this)}}},xa=Object(f.a)(ka,da,ua,!1,null,null,null);xa.options.__file="login/index.vue";var ba=xa.exports,Ca=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("z-dialog",{attrs:{"custom-class":"k-report",visible:t.isShow,width:"80%",top:"20px"},on:{"update:visible":function(e){t.isShow=e}}},["new"===t.type||"edit"===t.type?i("Writer",{attrs:{data:t.report}}):t._e(),t._v(" "),"view"===t.type?i("Preview",{attrs:{data:t.report}}):t._e()],1)},$a=[];Ca._withStripped=!0;var Sa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"input-title",staticStyle:{margin:"0 14px"}},[t._v(t._s(t.report.title))]),t._v(" "),i("div",{staticClass:"article-body",domProps:{innerHTML:t._s(t.report.content)}})])},za=[];Sa._withStripped=!0;var Ea={props:["data"],watch:{data:function(t){this.report=t}},data:function(){return{report:{}}},mounted:function(){this.report=this.data}},Ta=Object(f.a)(Ea,Sa,za,!1,null,null,null);Ta.options.__file="report/view.vue";var Ia=Ta.exports,ja=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("z-form",{staticStyle:{width:"100%"},attrs:{"label-width":"90px"}},[i("div",{staticClass:"z-row header"},[i("div",{staticClass:"z-20"},[i("input",{staticClass:"input-title",attrs:{type:"text",name:"title"},domProps:{value:t.report.title}}),t._v(" "),i("input",{attrs:{type:"hidden",name:"_id"},domProps:{value:t.report._id}})]),t._v(" "),i("div",{staticClass:"z-4"},[i("z-radio",{attrs:{name:"type",type:"button",size:"mini"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},[i("var",{attrs:{value:"1"}},[t._v("\u5468\u62a5")]),t._v(" "),i("var",{attrs:{value:"2"}},[t._v("\u65e5\u62a5")])])],1)]),t._v(" "),i("div",[i("textarea",{staticClass:"hide",attrs:{id:"J_reportEditor",name:"content"},domProps:{value:t.report.content}})]),t._v(" "),i("z-field",{staticClass:"form-item",attrs:{label:"\u6284\u9001\u4eba"}},[i("z-employee",{attrs:{value:t._f("parse")(t.report.readers),name:"readers"}})],1),t._v(" "),i("z-field",{attrs:{label:"\u6284\u9001\u90ae\u7bb1"}},[i("z-input-tag",{attrs:{name:"mails",value:t.report.mails,placeholder:"\u6284\u9001\u90ae\u7bb1"}})],1),t._v(" "),i("z-field",[i("z-submit",{attrs:{size:"small",refresh:"reports",action:"/report/save.do"},on:{finish:t.save}},[t._v("\u4fdd\u5b58")]),t._v(" "),i("z-submit",{attrs:{size:"small",plain:!1,type:"text",action:"/report/saveWithSend.do"},on:{finish:t.save}},[t._v("\u7acb\u5373\u53d1\u9001\n        ")])],1)],1)},Oa=[];ja._withStripped=!0;var Da={props:["data"],data:function(){return{report:"",mode:"1",editor:null}},watch:{data:function(t){if(this.report=t,this.mode===t.type)return this.template(this.mode);this.mode=t.type},mode:function(t){this.template(t)}},mounted:function(){this.report=this.data,$.lib(["/tinymce/tinymce.min.js"],this.init)},destroyed:function(){this.editor.destroy()},methods:{init:function(){var t=this,e=L.uploadDomain()+"/upload/image.do";tinymce.init({selector:"#J_reportEditor",height:380,statusbar:!1,menubar:!0,language:"zh_CN",body_class:"article-body",images_upload_url:e,automatic_uploads:!1,plugins:["advlist autolink lists link image charmap emoticons anchor","searchreplace visualblocks","insertdatetime media table paste"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat",content_css:["//a.yimiyisu.com/zeto/lib/zetoui.css"]}).then(function(e){t.editor=e[0],t.template(t.mode)})},template:function(t){this.report._id||$.http({mode:t},"/report/template.do",function(t){var e=t.data,i=this.report;i.title=e.title,i.readers=e.readers,i.mails=e.mails,e.content&&this.editor.setContent(e.content)},this)},save:function(t){var e=t.data._id;e&&(this.report._id=e)}}},Na=Object(f.a)(Da,ja,Oa,!1,null,null,null);Na.options.__file="report/writer.vue";var Pa={components:{Writer:Na.exports,Preview:Ia},data:function(){return{type:"",report:null,isShow:!1}},mounted:function(){$.on("report",this.init)},methods:{init:function(t,e){this.type=t,"new"===t&&(this.report={_id:"",type:"1",title:"",readers:"",mails:""}),e?$.http({_id:e},"/report/detail.do",function(t){this.report=t.data,this.isShow=!0},this):this.isShow=!0},close:function(){if("set"===this.type)return this.type="new";this.isShow=!1}}},Ma=Object(f.a)(Pa,Ca,$a,!1,null,null,null);Ma.options.__file="report/index.vue";var qa=Ma.exports;!function(){var t=window,e=t.location.pathname;"/"===e||e.indexOf(".html")>-1||o(t,function(t){r(t)})}(),Vue.component("k-doc",Ci),Vue.component("k-project-doc",sn),Vue.component("k-board",$n),Vue.component("k-doc-search",Ti),Vue.component("k-check-login",Yi),Vue.component("k-calendar",Lt),Vue.component("k-todo",T),Vue.component("k-todo-add",Wi),Vue.component("k-todo-detail",jt),Vue.component("k-plan",Ai),Vue.component("k-user-search",In),Vue.component("k-system",ta),Vue.component("k-project",ca),Vue.component("k-login",ba),Vue.component("k-report",qa)}]);